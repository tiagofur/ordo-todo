---
import { getLangFromUrl } from '../../i18n/utils';
import BaseLayout from '../../layouts/BaseLayout.astro';
import Card from '../../components/ui/Card.astro';

const currentLang = getLangFromUrl(Astro.url);

const meta = {
  en: {
    title: 'User Guide - Ordo-Todo',
    description: 'Complete guide to master Ordo-Todo and transform your productivity with AI-powered task management.'
  },
  es: {
    title: 'Guia de Usuario - Ordo-Todo',
    description: 'Guia completa para dominar Ordo-Todo y transformar tu productividad con gestion de tareas con IA.'
  },
  'pt-br': {
    title: 'Guia do Usuario - Ordo-Todo',
    description: 'Guia completo para dominar o Ordo-Todo e transformar sua produtividade com gerenciamento de tarefas com IA.'
  }
};

const pageMeta = meta[currentLang] || meta.en;

const sections = {
  en: {
    gettingStarted: {
      title: 'Getting Started',
      icon: 'üöÄ',
      items: [
        { title: 'Create your account', desc: 'Sign up at ordo-todo.com or download the app, enter your email and create a password' },
        { title: 'Set up your workspace', desc: 'Personal for daily tasks, Work for professional projects, or Team for collaboration' },
        { title: 'Create your first task', desc: 'Click "+" or press "N", add title, date, priority, and project' }
      ]
    },
    taskManagement: {
      title: 'Task Management',
      icon: '‚úÖ',
      items: [
        { title: 'Task anatomy', desc: 'Title, description (Markdown), project, date, priority (Low/Medium/High/Urgent), status, tags, subtasks' },
        { title: 'Available views', desc: 'List (group by project/date), Kanban (drag & drop), Calendar (day/week/month), Focus (one task at a time)' },
        { title: 'Subtasks', desc: 'Break complex tasks into smaller steps with automatic progress tracking' }
      ]
    },
    timer: {
      title: 'Timer & Pomodoro',
      icon: '‚è±Ô∏è',
      items: [
        { title: 'Pomodoro Mode', desc: '25 min work + 5 min break, with longer breaks every 4 pomodoros' },
        { title: 'Continuous Mode', desc: 'Uninterrupted timer with manual breaks when you need them' },
        { title: 'Advanced features', desc: 'Switch tasks mid-session, mark complete and continue, view session history' }
      ]
    },
    workspaces: {
      title: 'Workspaces & Projects',
      icon: 'üìÅ',
      items: [
        { title: 'Workspace types', desc: 'Personal (private), Work (professional), Team (shared with others)' },
        { title: 'Projects', desc: 'Group related tasks, assign colors, set deadlines, track progress' },
        { title: 'Quick switch', desc: 'Use Ctrl/Cmd + 1/2/3 to jump between workspaces instantly' }
      ]
    },
    analytics: {
      title: 'Analytics & Metrics',
      icon: 'üìä',
      items: [
        { title: 'Key metrics', desc: 'Tasks completed, pomodoros, Focus Score (0-100%), streak days, time worked' },
        { title: 'Visualizations', desc: 'Weekly heatmap, project distribution, completion trends, weekly comparison' },
        { title: 'Actionable insights', desc: 'AI-powered suggestions like "You complete 40% more tasks on Tuesday mornings"' }
      ]
    },
    ai: {
      title: 'AI & Productivity',
      icon: 'ü§ñ',
      items: [
        { title: 'Auto-categorization', desc: 'AI suggests project, tags, and priority based on task title' },
        { title: 'Time estimation', desc: 'Predicts how long tasks will take based on similar past tasks' },
        { title: 'Productivity Coach', desc: 'Chat with AI for personalized productivity advice and weekly reviews' }
      ]
    },
    collaboration: {
      title: 'Team Collaboration',
      icon: 'üë•',
      items: [
        { title: 'Invite members', desc: 'Add team members with Admin, Editor, or Viewer roles' },
        { title: 'Assign tasks', desc: 'Assign tasks to team members, they receive notifications' },
        { title: 'Comments & mentions', desc: 'Add comments, use @name to mention and notify teammates' }
      ]
    },
    shortcuts: {
      title: 'Keyboard Shortcuts',
      icon: '‚å®Ô∏è',
      items: [
        { title: 'Essential shortcuts', desc: 'N (new task), T (timer), Space (complete), / (search), Cmd+K (command palette)' },
        { title: 'Navigation', desc: 'G+H (home), G+P (projects), G+C (calendar), ? (show all shortcuts)' },
        { title: 'Pro tip', desc: 'Learn 5 shortcuts and your productivity will increase significantly' }
      ]
    }
  },
  es: {
    gettingStarted: {
      title: 'Primeros Pasos',
      icon: 'üöÄ',
      items: [
        { title: 'Crea tu cuenta', desc: 'Registrate en ordo-todo.com o descarga la app, ingresa tu email y crea una contrasena' },
        { title: 'Configura tu workspace', desc: 'Personal para tareas diarias, Trabajo para proyectos profesionales, o Equipo para colaborar' },
        { title: 'Crea tu primera tarea', desc: 'Haz clic en "+" o presiona "N", agrega titulo, fecha, prioridad y proyecto' }
      ]
    },
    taskManagement: {
      title: 'Gestion de Tareas',
      icon: '‚úÖ',
      items: [
        { title: 'Anatomia de una tarea', desc: 'Titulo, descripcion (Markdown), proyecto, fecha, prioridad (Baja/Media/Alta/Urgente), estado, etiquetas, subtareas' },
        { title: 'Vistas disponibles', desc: 'Lista (agrupar por proyecto/fecha), Kanban (arrastrar y soltar), Calendario (dia/semana/mes), Enfoque (una tarea a la vez)' },
        { title: 'Subtareas', desc: 'Divide tareas complejas en pasos mas pequenos con seguimiento automatico del progreso' }
      ]
    },
    timer: {
      title: 'Timer y Pomodoro',
      icon: '‚è±Ô∏è',
      items: [
        { title: 'Modo Pomodoro', desc: '25 min trabajo + 5 min descanso, con descansos largos cada 4 pomodoros' },
        { title: 'Modo Continuo', desc: 'Timer ininterrumpido con pausas manuales cuando las necesites' },
        { title: 'Funciones avanzadas', desc: 'Cambia de tarea durante la sesion, marca como completada y continua, ve historial' }
      ]
    },
    workspaces: {
      title: 'Workspaces y Proyectos',
      icon: 'üìÅ',
      items: [
        { title: 'Tipos de workspace', desc: 'Personal (privado), Trabajo (profesional), Equipo (compartido)' },
        { title: 'Proyectos', desc: 'Agrupa tareas relacionadas, asigna colores, establece fechas limite, sigue el progreso' },
        { title: 'Cambio rapido', desc: 'Usa Ctrl/Cmd + 1/2/3 para cambiar entre workspaces al instante' }
      ]
    },
    analytics: {
      title: 'Analytics y Metricas',
      icon: 'üìä',
      items: [
        { title: 'Metricas clave', desc: 'Tareas completadas, pomodoros, Focus Score (0-100%), dias de racha, tiempo trabajado' },
        { title: 'Visualizaciones', desc: 'Heatmap semanal, distribucion por proyecto, tendencias, comparativa semanal' },
        { title: 'Insights accionables', desc: 'Sugerencias con IA como "Completas 40% mas tareas los martes por la manana"' }
      ]
    },
    ai: {
      title: 'IA y Productividad',
      icon: 'ü§ñ',
      items: [
        { title: 'Auto-categorizacion', desc: 'La IA sugiere proyecto, etiquetas y prioridad basandose en el titulo' },
        { title: 'Estimacion de tiempo', desc: 'Predice cuanto tomaran las tareas basandose en tareas similares' },
        { title: 'Productivity Coach', desc: 'Chatea con la IA para consejos personalizados y revisiones semanales' }
      ]
    },
    collaboration: {
      title: 'Colaboracion en Equipo',
      icon: 'üë•',
      items: [
        { title: 'Invitar miembros', desc: 'Agrega miembros con roles de Admin, Editor o Visualizador' },
        { title: 'Asignar tareas', desc: 'Asigna tareas a miembros del equipo, reciben notificaciones' },
        { title: 'Comentarios y menciones', desc: 'Agrega comentarios, usa @nombre para mencionar y notificar' }
      ]
    },
    shortcuts: {
      title: 'Atajos de Teclado',
      icon: '‚å®Ô∏è',
      items: [
        { title: 'Atajos esenciales', desc: 'N (nueva tarea), T (timer), Espacio (completar), / (buscar), Cmd+K (paleta)' },
        { title: 'Navegacion', desc: 'G+H (inicio), G+P (proyectos), G+C (calendario), ? (ver todos)' },
        { title: 'Pro tip', desc: 'Aprende 5 atajos y tu productividad aumentara significativamente' }
      ]
    }
  },
  'pt-br': {
    gettingStarted: {
      title: 'Primeiros Passos',
      icon: 'üöÄ',
      items: [
        { title: 'Crie sua conta', desc: 'Registre-se em ordo-todo.com ou baixe o app, insira seu email e crie uma senha' },
        { title: 'Configure seu workspace', desc: 'Pessoal para tarefas diarias, Trabalho para projetos profissionais, ou Equipe para colaborar' },
        { title: 'Crie sua primeira tarefa', desc: 'Clique em "+" ou pressione "N", adicione titulo, data, prioridade e projeto' }
      ]
    },
    taskManagement: {
      title: 'Gerenciamento de Tarefas',
      icon: '‚úÖ',
      items: [
        { title: 'Anatomia de uma tarefa', desc: 'Titulo, descricao (Markdown), projeto, data, prioridade (Baixa/Media/Alta/Urgente), status, tags, subtarefas' },
        { title: 'Visualizacoes disponiveis', desc: 'Lista (agrupar por projeto/data), Kanban (arrastar e soltar), Calendario (dia/semana/mes), Foco (uma tarefa por vez)' },
        { title: 'Subtarefas', desc: 'Divida tarefas complexas em passos menores com rastreamento automatico do progresso' }
      ]
    },
    timer: {
      title: 'Timer e Pomodoro',
      icon: '‚è±Ô∏è',
      items: [
        { title: 'Modo Pomodoro', desc: '25 min trabalho + 5 min pausa, com pausas longas a cada 4 pomodoros' },
        { title: 'Modo Continuo', desc: 'Timer ininterrupto com pausas manuais quando precisar' },
        { title: 'Recursos avancados', desc: 'Troque de tarefa durante a sessao, marque como concluida e continue, veja historico' }
      ]
    },
    workspaces: {
      title: 'Workspaces e Projetos',
      icon: 'üìÅ',
      items: [
        { title: 'Tipos de workspace', desc: 'Pessoal (privado), Trabalho (profissional), Equipe (compartilhado)' },
        { title: 'Projetos', desc: 'Agrupe tarefas relacionadas, atribua cores, defina prazos, acompanhe o progresso' },
        { title: 'Troca rapida', desc: 'Use Ctrl/Cmd + 1/2/3 para trocar entre workspaces instantaneamente' }
      ]
    },
    analytics: {
      title: 'Analytics e Metricas',
      icon: 'üìä',
      items: [
        { title: 'Metricas principais', desc: 'Tarefas concluidas, pomodoros, Focus Score (0-100%), dias de sequencia, tempo trabalhado' },
        { title: 'Visualizacoes', desc: 'Heatmap semanal, distribuicao por projeto, tendencias, comparativo semanal' },
        { title: 'Insights acionaveis', desc: 'Sugestoes com IA como "Voce completa 40% mais tarefas nas tercas de manha"' }
      ]
    },
    ai: {
      title: 'IA e Produtividade',
      icon: 'ü§ñ',
      items: [
        { title: 'Auto-categorizacao', desc: 'A IA sugere projeto, tags e prioridade baseado no titulo' },
        { title: 'Estimativa de tempo', desc: 'Preve quanto as tarefas levarao baseado em tarefas similares' },
        { title: 'Productivity Coach', desc: 'Converse com a IA para conselhos personalizados e revisoes semanais' }
      ]
    },
    collaboration: {
      title: 'Colaboracao em Equipe',
      icon: 'üë•',
      items: [
        { title: 'Convidar membros', desc: 'Adicione membros com funcoes de Admin, Editor ou Visualizador' },
        { title: 'Atribuir tarefas', desc: 'Atribua tarefas a membros da equipe, eles recebem notificacoes' },
        { title: 'Comentarios e mencoes', desc: 'Adicione comentarios, use @nome para mencionar e notificar' }
      ]
    },
    shortcuts: {
      title: 'Atalhos de Teclado',
      icon: '‚å®Ô∏è',
      items: [
        { title: 'Atalhos essenciais', desc: 'N (nova tarefa), T (timer), Espaco (concluir), / (buscar), Cmd+K (paleta)' },
        { title: 'Navegacao', desc: 'G+H (inicio), G+P (projetos), G+C (calendario), ? (ver todos)' },
        { title: 'Dica pro', desc: 'Aprenda 5 atalhos e sua produtividade aumentara significativamente' }
      ]
    }
  }
};

const content = sections[currentLang] || sections.en;
const sectionOrder = ['gettingStarted', 'taskManagement', 'timer', 'workspaces', 'analytics', 'ai', 'collaboration', 'shortcuts'];
---

<BaseLayout title={pageMeta.title} description={pageMeta.description}>
  <section class="py-20 bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <!-- Header -->
      <div class="text-center mb-16">
        <div class="inline-flex items-center px-4 py-2 rounded-full text-sm font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 mb-6">
          <span class="mr-2">üìñ</span>
          {currentLang === 'en' ? 'Complete User Guide' : currentLang === 'es' ? 'Guia Completa de Usuario' : 'Guia Completo do Usuario'}
        </div>

        <h1 class="text-4xl sm:text-5xl font-bold text-gray-900 dark:text-white mb-6">
          {currentLang === 'en' ? 'Master Ordo-Todo' : currentLang === 'es' ? 'Domina Ordo-Todo' : 'Domine o Ordo-Todo'}
        </h1>

        <p class="text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto">
          {currentLang === 'en' ?
            'Everything you need to know to transform your productivity with AI-powered task management.' :
           currentLang === 'es' ?
            'Todo lo que necesitas saber para transformar tu productividad con gestion de tareas con IA.' :
            'Tudo o que voce precisa saber para transformar sua produtividade com gerenciamento de tarefas com IA.'}
        </p>
      </div>

      <!-- Table of Contents -->
      <div class="mb-16">
        <Card class="max-w-2xl mx-auto p-6">
          <h2 class="text-xl font-bold text-gray-900 dark:text-white mb-4">
            {currentLang === 'en' ? 'Quick Navigation' : currentLang === 'es' ? 'Navegacion Rapida' : 'Navegacao Rapida'}
          </h2>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            {sectionOrder.map((key, index) => (
              <a
                href={`#${key}`}
                class="flex items-center p-3 rounded-lg bg-gray-50 dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors"
              >
                <span class="text-2xl mr-2">{content[key].icon}</span>
                <span class="text-sm font-medium text-gray-700 dark:text-gray-300">{content[key].title}</span>
              </a>
            ))}
          </div>
        </Card>
      </div>

      <!-- Sections -->
      <div class="space-y-16">
        {sectionOrder.map((key) => {
          const section = content[key];
          return (
            <div id={key} class="scroll-mt-24">
              <div class="flex items-center mb-8">
                <span class="text-4xl mr-4">{section.icon}</span>
                <h2 class="text-3xl font-bold text-gray-900 dark:text-white">{section.title}</h2>
              </div>

              <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                {section.items.map((item) => (
                  <Card hover={true} class="p-6 h-full">
                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">{item.title}</h3>
                    <p class="text-gray-600 dark:text-gray-400">{item.desc}</p>
                  </Card>
                ))}
              </div>
            </div>
          );
        })}
      </div>

      <!-- CTA Section -->
      <div class="mt-20 text-center">
        <div class="bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-12 text-white">
          <h2 class="text-3xl font-bold mb-4">
            {currentLang === 'en' ? 'Ready to Get Started?' : currentLang === 'es' ? 'Listo para Empezar?' : 'Pronto para Comecar?'}
          </h2>
          <p class="text-xl mb-8 opacity-90">
            {currentLang === 'en' ?
              'Start your productivity journey today with a free account.' :
             currentLang === 'es' ?
              'Comienza tu viaje de productividad hoy con una cuenta gratuita.' :
              'Comece sua jornada de produtividade hoje com uma conta gratuita.'}
          </p>
          <a
            href={`/${currentLang}/pricing`}
            class="inline-flex items-center px-8 py-4 text-lg font-medium bg-white text-blue-600 rounded-lg hover:bg-gray-100 transition-colors"
          >
            {currentLang === 'en' ? 'Start Free Trial' : currentLang === 'es' ? 'Comenzar Prueba Gratis' : 'Comecar Teste Gratis'}
            <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
            </svg>
          </a>
        </div>
      </div>

      <!-- Support Section -->
      <div class="mt-16 text-center">
        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">
          {currentLang === 'en' ? 'Need Help?' : currentLang === 'es' ? 'Necesitas Ayuda?' : 'Precisa de Ajuda?'}
        </h3>
        <div class="flex flex-wrap justify-center gap-4">
          <a href="mailto:support@ordo-todo.com" class="text-blue-600 hover:text-blue-700 dark:text-blue-400">
            support@ordo-todo.com
          </a>
          <span class="text-gray-300 dark:text-gray-600">|</span>
          <a href="https://discord.gg/ordo-todo" class="text-blue-600 hover:text-blue-700 dark:text-blue-400">
            Discord Community
          </a>
          <span class="text-gray-300 dark:text-gray-600">|</span>
          <a href="https://twitter.com/ordotodo" class="text-blue-600 hover:text-blue-700 dark:text-blue-400">
            @ordotodo
          </a>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
