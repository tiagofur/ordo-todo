---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import Card from '../../components/ui/Card.astro';
import { getLangFromUrl } from '../../i18n/utils';

const currentLang = getLangFromUrl(Astro.url);
const features = await getCollection('features');

const meta = {
  en: {
    title: 'Features - Ordo-Todo',
    description: 'Discover all powerful features of Ordo-Todo, from AI-powered task management to advanced analytics and team collaboration.'
  },
  es: {
    title: 'Caracter√≠sticas - Ordo-Todo',
    description: 'Descubre todas las potentes caracter√≠sticas de Ordo-Todo, desde gesti√≥n de tareas impulsada por IA hasta an√°lisis avanzados y colaboraci√≥n en equipo.'
  },
  'pt-br': {
    title: 'Recursos - Ordo-Todo',
    description: 'Descubra todos os recursos poderosos do Ordo-Todo, desde gerenciamento de tarefas alimentado por IA at√© an√°lises avan√ßadas e colabora√ß√£o em equipe.'
  }
};

const pageMeta = meta[currentLang] || meta.en;

const categories = {
  ai: {
    title: currentLang === 'en' ? 'AI-Powered Features' : 
           currentLang === 'es' ? 'Caracter√≠sticas con IA' : 
           'Recursos com IA',
    description: currentLang === 'en' ? 
      'Experience the future of productivity with our advanced AI capabilities' :
      currentLang === 'es' ? 
      'Experimenta el futuro de la productividad con nuestras avanzadas capacidades de IA' :
      'Experimente o futuro da produtividade com nossos recursos avan√ßados de IA',
    icon: 'ü§ñ'
  },
  productivity: {
    title: currentLang === 'en' ? 'Productivity Tools' : 
           currentLang === 'es' ? 'Herramientas de Productividad' : 
           'Ferramentas de Produtividade',
    description: currentLang === 'en' ? 
      'Powerful features designed to maximize your efficiency' :
      currentLang === 'es' ? 
      'Caracter√≠sticas poderosas dise√±adas para maximizar tu eficiencia' :
      'Recursos poderosos projetados para maximizar sua efici√™ncia',
    icon: '‚ö°'
  },
  collaboration: {
    title: currentLang === 'en' ? 'Team Collaboration' : 
           currentLang === 'es' ? 'Colaboraci√≥n en Equipo' : 
           'Colabora√ß√£o em Equipe',
    description: currentLang === 'en' ? 
      'Work together seamlessly with real-time sync and communication' :
      currentLang === 'es' ? 
      'Trabaja juntos sin problemas con sincronizaci√≥n y comunicaci√≥n en tiempo real' :
      'Trabalhe juntos sem problemas com sincroniza√ß√£o e comunica√ß√£o em tempo real',
    icon: 'üë•'
  },
  'time-management': {
    title: currentLang === 'en' ? 'Time Management' : 
           currentLang === 'es' ? 'Gesti√≥n del Tiempo' : 
           'Gerenciamento de Tempo',
    description: currentLang === 'en' ? 
      'Master your time with advanced tracking and insights' :
      currentLang === 'es' ? 
      'Domina tu tiempo con seguimiento avanzado e insights' :
      'Domine seu tempo com rastreamento avan√ßado e insights',
    icon: '‚è∞'
  }
};
---

<BaseLayout title={pageMeta.title} description={pageMeta.description}>
  <section class="py-20 bg-gray-50 dark:bg-gray-900">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <!-- Header -->
      <div class="text-center mb-16">
        <h1 class="text-4xl sm:text-5xl font-bold text-gray-900 dark:text-white mb-4">
          {currentLang === 'en' ? 'Everything You Need to Stay Productive' : 
           currentLang === 'es' ? 'Todo lo que Necesitas para Mantenerte Productivo' : 
           'Tudo o que Voc√™ Precisa para se Manter Produtivo'}
        </h1>
        <p class="text-xl text-gray-600 dark:text-gray-300 max-w-4xl mx-auto">
          {currentLang === 'en' ? 
            'From AI-powered task creation to advanced analytics, discover all the tools that will transform how you work.' :
            currentLang === 'es' ? 
            'Desde la creaci√≥n de tareas con IA hasta an√°lisis avanzados, descubre todas las herramientas que transformar√°n c√≥mo trabajas.' :
            'Da cria√ß√£o de tarefas com IA at√© an√°lises avan√ßadas, descubra todas as ferramentas que transformar√£o como voc√™ trabalha.'}
        </p>
      </div>

      <!-- Features by Category -->
      {Object.entries(categories).map(([key, category]) => {
        const categoryFeatures = features.filter(f => f.data.category === key);
        
        return (
          <div class="mb-20">
            <div class="text-center mb-12">
              <span class="text-5xl mb-4 block">{category.icon}</span>
              <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">
                {category.title}
              </h2>
              <p class="text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">
                {category.description}
              </p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
              {categoryFeatures.map(feature => (
                <Card hover={true} class="h-full">
                  <div class="p-6">
                    <div class="text-3xl mb-4">{feature.data.icon}</div>
                    <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-3">
                      {feature.data.title}
                    </h3>
                    <p class="text-gray-600 dark:text-gray-400 mb-4">
                      {feature.data.description}
                    </p>
                    {feature.data.featured && (
                      <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200">
                        {currentLang === 'en' ? 'Featured' : 
                         currentLang === 'es' ? 'Destacado' : 'Destaque'}
                      </span>
                    )}
                  </div>
                </Card>
              ))}
            </div>
          </div>
        );
      })}

      <!-- CTA Section -->
      <div class="text-center bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-12 text-white">
        <h2 class="text-3xl font-bold mb-4">
          {currentLang === 'en' ? 'Ready to Transform Your Productivity?' : 
           currentLang === 'es' ? '¬øListo para Transformar tu Productividad?' : 
           'Pronto para Transformar sua Produtividade?'}
        </h2>
        <p class="text-xl mb-8 opacity-90">
          {currentLang === 'en' ? 
            'Join thousands of users who have already made the switch to intelligent task management.' :
            currentLang === 'es' ? 
            '√önete a miles de usuarios que ya han hecho el cambio a la gesti√≥n inteligente de tareas.' :
            'Junte-se a milhares de usu√°rios que j√° fizeram a mudan√ßa para o gerenciamento inteligente de tarefas.'}
        </p>
        <a 
          href={`/${currentLang === 'en' ? '' : currentLang + '/'}pricing`}
          class="inline-flex items-center px-8 py-4 text-lg font-medium text-white bg-white dark:bg-gray-900 text-blue-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
        >
          {currentLang === 'en' ? 'Start Free Trial' : 
           currentLang === 'es' ? 'Comenzar Prueba Gratis' : 
           'Come√ßar Teste Gr√°tis'}
          <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5-5m5 5H7m2 4H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
          </svg>
        </a>
      </div>
    </div>
  </section>
</BaseLayout>