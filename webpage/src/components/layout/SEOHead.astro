---
interface Props {
  title: string;
  description: string;
  currentPath: string;
}

const { title, description, currentPath } = Astro.props;
const locales = ['en', 'es', 'pt-br'];
const siteUrl = 'https://ordo-todo.com';

// Extract the path without locale prefix for building hreflang URLs
const pathWithoutLocale = currentPath.replace(/^\/(en|es|pt-br)/, '') || '/';

// Build JSON-LD data
const jsonLd = JSON.stringify({
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "Ordo-Todo",
  "description": description,
  "url": siteUrl,
  "applicationCategory": "ProductivityApplication",
  "operatingSystem": "Web, iOS, Android, Windows, macOS, Linux",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  }
});
---

<title>{title}</title>
<meta name="description" content={description} />

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website" />
<meta property="og:url" content={`${siteUrl}${currentPath}`} />
<meta property="og:title" content={title} />
<meta property="og:description" content={description} />
<meta property="og:image" content={`${siteUrl}/og-image.jpg`} />

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:url" content={`${siteUrl}${currentPath}`} />
<meta property="twitter:title" content={title} />
<meta property="twitter:description" content={description} />
<meta property="twitter:image" content={`${siteUrl}/og-image.jpg`} />

<!-- hreflang tags for SEO -->
{locales.map(locale => (
  <link
    rel="alternate"
    hreflang={locale}
    href={`${siteUrl}/${locale}${pathWithoutLocale}`}
  />
))}

<!-- x-default for international targeting -->
<link
  rel="alternate"
  hreflang="x-default"
  href={`${siteUrl}/en${pathWithoutLocale}`}
/>

<!-- Canonical URL -->
<link rel="canonical" href={`${siteUrl}${currentPath}`} />

<!-- Additional SEO meta tags -->
<meta name="robots" content="index, follow" />
<meta name="author" content="Ordo-Todo" />
<meta name="keywords" content="task management, productivity, AI, pomodoro, collaboration, time tracking" />

<!-- JSON-LD Structured Data -->
<script type="application/ld+json" set:html={jsonLd} />