
> @ordo-todo/backend@1.0.0 test
> jest

PASS src/app.controller.spec.ts
PASS src/repositories/timer.repository.spec.ts
FAIL src/common/guards/ws-throttle.guard.spec.ts
  ÔùÅ WsThrottleGuard ÔÇ║ should be defined

    Nest can't resolve dependencies of the WsThrottleGuard (?, Object). Please make sure that the argument dependency at index [0] is available in the current context.

    Potential solutions:
    - The dependency at index [0] appears to be undefined at runtime
    - This commonly occurs when using 'import type' instead of 'import' for injectable classes
    - Check your imports and change:
      ÔØî import type { SomeService } from './some.service';
      Ô£à import { SomeService } from './some.service';
    - Ensure the imported class is decorated with @Injectable() or is a valid provider
    - If using dynamic imports, ensure the class is available at runtime, not just for type checking

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      28 |
      29 |   beforeEach(async () => {
    > 30 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      31 |       providers: [WsThrottleGuard],
      32 |     }).compile();
      33 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (common/guards/ws-throttle.guard.spec.ts:30:35)

  ÔùÅ WsThrottleGuard ÔÇ║ canActivate ÔÇ║ should allow requests under the limit

    Nest can't resolve dependencies of the WsThrottleGuard (?, Object). Please make sure that the argument dependency at index [0] is available in the current context.

    Potential solutions:
    - The dependency at index [0] appears to be undefined at runtime
    - This commonly occurs when using 'import type' instead of 'import' for injectable classes
    - Check your imports and change:
      ÔØî import type { SomeService } from './some.service';
      Ô£à import { SomeService } from './some.service';
    - Ensure the imported class is decorated with @Injectable() or is a valid provider
    - If using dynamic imports, ensure the class is available at runtime, not just for type checking

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      28 |
      29 |   beforeEach(async () => {
    > 30 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      31 |       providers: [WsThrottleGuard],
      32 |     }).compile();
      33 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (common/guards/ws-throttle.guard.spec.ts:30:35)

  ÔùÅ WsThrottleGuard ÔÇ║ canActivate ÔÇ║ should throw WsException when limit is exceeded

    Nest can't resolve dependencies of the WsThrottleGuard (?, Object). Please make sure that the argument dependency at index [0] is available in the current context.

    Potential solutions:
    - The dependency at index [0] appears to be undefined at runtime
    - This commonly occurs when using 'import type' instead of 'import' for injectable classes
    - Check your imports and change:
      ÔØî import type { SomeService } from './some.service';
      Ô£à import { SomeService } from './some.service';
    - Ensure the imported class is decorated with @Injectable() or is a valid provider
    - If using dynamic imports, ensure the class is available at runtime, not just for type checking

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      28 |
      29 |   beforeEach(async () => {
    > 30 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      31 |       providers: [WsThrottleGuard],
      32 |     }).compile();
      33 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (common/guards/ws-throttle.guard.spec.ts:30:35)

  ÔùÅ WsThrottleGuard ÔÇ║ canActivate ÔÇ║ should track different users separately

    Nest can't resolve dependencies of the WsThrottleGuard (?, Object). Please make sure that the argument dependency at index [0] is available in the current context.

    Potential solutions:
    - The dependency at index [0] appears to be undefined at runtime
    - This commonly occurs when using 'import type' instead of 'import' for injectable classes
    - Check your imports and change:
      ÔØî import type { SomeService } from './some.service';
      Ô£à import { SomeService } from './some.service';
    - Ensure the imported class is decorated with @Injectable() or is a valid provider
    - If using dynamic imports, ensure the class is available at runtime, not just for type checking

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      28 |
      29 |   beforeEach(async () => {
    > 30 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      31 |       providers: [WsThrottleGuard],
      32 |     }).compile();
      33 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (common/guards/ws-throttle.guard.spec.ts:30:35)

  ÔùÅ WsThrottleGuard ÔÇ║ canActivate ÔÇ║ should return true immediately if no userId

    Nest can't resolve dependencies of the WsThrottleGuard (?, Object). Please make sure that the argument dependency at index [0] is available in the current context.

    Potential solutions:
    - The dependency at index [0] appears to be undefined at runtime
    - This commonly occurs when using 'import type' instead of 'import' for injectable classes
    - Check your imports and change:
      ÔØî import type { SomeService } from './some.service';
      Ô£à import { SomeService } from './some.service';
    - Ensure the imported class is decorated with @Injectable() or is a valid provider
    - If using dynamic imports, ensure the class is available at runtime, not just for type checking

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      28 |
      29 |   beforeEach(async () => {
    > 30 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      31 |       providers: [WsThrottleGuard],
      32 |     }).compile();
      33 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (common/guards/ws-throttle.guard.spec.ts:30:35)

  ÔùÅ WsThrottleGuard ÔÇ║ rate limiting reset ÔÇ║ should reset count after time window

    Nest can't resolve dependencies of the WsThrottleGuard (?, Object). Please make sure that the argument dependency at index [0] is available in the current context.

    Potential solutions:
    - The dependency at index [0] appears to be undefined at runtime
    - This commonly occurs when using 'import type' instead of 'import' for injectable classes
    - Check your imports and change:
      ÔØî import type { SomeService } from './some.service';
      Ô£à import { SomeService } from './some.service';
    - Ensure the imported class is decorated with @Injectable() or is a valid provider
    - If using dynamic imports, ensure the class is available at runtime, not just for type checking

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      28 |
      29 |   beforeEach(async () => {
    > 30 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      31 |       providers: [WsThrottleGuard],
      32 |     }).compile();
      33 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (common/guards/ws-throttle.guard.spec.ts:30:35)

PASS src/tags/tags.service.spec.ts
PASS src/auth/auth.service.spec.ts
PASS src/analytics/analytics.controller.spec.ts
PASS src/ai/gemini-ai.service.spec.ts
PASS src/notifications/notifications.gateway.spec.ts
PASS src/chat/chat.service.spec.ts
FAIL src/templates/templates.controller.spec.ts (5.06 s)
  ÔùÅ TemplatesController ÔÇ║ create ÔÇ║ should create a new template

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "user-123", {"description": "Template for weekly review task", "name": "Weekly Review", "taskData": {"estimatedMinutes": 30, "priority": "MEDIUM", "title": "Weekly Review"}}
    Received: {"description": "Template for weekly review task", "name": "Weekly Review", "taskData": {"estimatedMinutes": 30, "priority": "MEDIUM", "title": "Weekly Review"}}

    Number of calls: 1

      56 |       const result = await controller.create(createDto, mockUser);
      57 |
    > 58 |       expect(templatesService.create).toHaveBeenCalledWith(
         |                                       ^
      59 |         mockUser.id,
      60 |         createDto,
      61 |       );

      at Object.<anonymous> (templates/templates.controller.spec.ts:58:39)

  ÔùÅ TemplatesController ÔÇ║ findAll ÔÇ║ should return all templates for user

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "user-123"
    Received: {"email": "test@example.com", "id": "user-123", "name": "Test"}

    Number of calls: 1

      74 |       const result = await controller.findAll(mockUser);
      75 |
    > 76 |       expect(templatesService.findAll).toHaveBeenCalledWith(mockUser.id);
         |                                        ^
      77 |       expect(result).toEqual(mockTemplates);
      78 |     });
      79 |   });

      at Object.<anonymous> (templates/templates.controller.spec.ts:76:40)

  ÔùÅ TemplatesController ÔÇ║ findOne ÔÇ║ should return template by id

    TypeError: this.templatesService.findOne is not a function

      35 |   @Get(':id')
      36 |   findOne(@Param('id') id: string) {
    > 37 |     return this.templatesService.findOne(id);
         |                                  ^
      38 |   }
      39 |
      40 |   @Patch(':id')

      at TemplatesController.findOne (templates/templates.controller.ts:37:34)
      at Object.<anonymous> (templates/templates.controller.spec.ts:86:39)

  ÔùÅ TemplatesController ÔÇ║ update ÔÇ║ should update template

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "tmpl-123", "user-123", {"name": "Updated Template"}
    Received: "tmpl-123", {"name": "Updated Template"}

    Number of calls: 1

      102 |       const result = await controller.update('tmpl-123', updateDto, mockUser);
      103 |
    > 104 |       expect(templatesService.update).toHaveBeenCalledWith(
          |                                       ^
      105 |         'tmpl-123',
      106 |         mockUser.id,
      107 |         updateDto,

      at Object.<anonymous> (templates/templates.controller.spec.ts:104:39)

  ÔùÅ TemplatesController ÔÇ║ remove ÔÇ║ should delete template

    TypeError: this.templatesService.remove is not a function

      48 |   @Delete(':id')
      49 |   remove(@Param('id') id: string) {
    > 50 |     return this.templatesService.remove(id);
         |                                  ^
      51 |   }
      52 | }
      53 |

      at TemplatesController.remove (templates/templates.controller.ts:50:34)
      at Object.<anonymous> (templates/templates.controller.spec.ts:117:24)

  ÔùÅ TemplatesController ÔÇ║ createTask ÔÇ║ should create task from template

    TypeError: controller.createTask is not a function

      135 |       );
      136 |
    > 137 |       const result = await controller.createTask(
          |                                       ^
      138 |         'tmpl-123',
      139 |         createDto,
      140 |         mockUser,

      at Object.<anonymous> (templates/templates.controller.spec.ts:137:39)

FAIL src/workflows/workflows.controller.spec.ts
  ÔùÅ WorkflowsController ÔÇ║ create ÔÇ║ should create a new workflow

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "user-123", {"name": "Development", "stages": [{"name": "Backlog", "order": 0}, {"name": "In Progress", "order": 1}, {"name": "Done", "order": 2}], "workspaceId": "ws-123"}
    Received: {"name": "Development", "stages": [{"name": "Backlog", "order": 0}, {"name": "In Progress", "order": 1}, {"name": "Done", "order": 2}], "workspaceId": "ws-123"}

    Number of calls: 1

      52 |       const result = await controller.create(createDto, mockUser);
      53 |
    > 54 |       expect(workflowsService.create).toHaveBeenCalledWith(
         |                                       ^
      55 |         mockUser.id,
      56 |         createDto,
      57 |       );

      at Object.<anonymous> (workflows/workflows.controller.spec.ts:54:39)

  ÔùÅ WorkflowsController ÔÇ║ findAll ÔÇ║ should return workflows for workspace

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "ws-123", "user-123"
    Received: "ws-123"

    Number of calls: 1

      70 |       const result = await controller.findAll('ws-123', mockUser);
      71 |
    > 72 |       expect(workflowsService.findAll).toHaveBeenCalledWith(
         |                                        ^
      73 |         'ws-123',
      74 |         mockUser.id,
      75 |       );

      at Object.<anonymous> (workflows/workflows.controller.spec.ts:72:40)

  ÔùÅ WorkflowsController ÔÇ║ findOne ÔÇ║ should return workflow by id

    TypeError: controller.findOne is not a function

      83 |       workflowsService.findById.mockResolvedValue(mockWorkflow as any);
      84 |
    > 85 |       const result = await controller.findOne('wf-123', mockUser);
         |                                       ^
      86 |
      87 |       expect(workflowsService.findById).toHaveBeenCalledWith(
      88 |         'wf-123',

      at Object.<anonymous> (workflows/workflows.controller.spec.ts:85:39)

  ÔùÅ WorkflowsController ÔÇ║ update ÔÇ║ should update workflow

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "wf-123", "user-123", {"name": "Updated Workflow"}
    Received: "wf-123", {"name": "Updated Workflow"}

    Number of calls: 1

      101 |       const result = await controller.update('wf-123', updateDto, mockUser);
      102 |
    > 103 |       expect(workflowsService.update).toHaveBeenCalledWith(
          |                                       ^
      104 |         'wf-123',
      105 |         mockUser.id,
      106 |         updateDto,

      at Object.<anonymous> (workflows/workflows.controller.spec.ts:103:39)

  ÔùÅ WorkflowsController ÔÇ║ remove ÔÇ║ should delete workflow

    TypeError: this.workflowsService.remove is not a function

      44 |   @HttpCode(HttpStatus.NO_CONTENT)
      45 |   remove(@Param('id') id: string) {
    > 46 |     return this.workflowsService.remove(id);
         |                                  ^
      47 |   }
      48 | }
      49 |

      at WorkflowsController.remove (workflows/workflows.controller.ts:46:34)
      at Object.<anonymous> (workflows/workflows.controller.spec.ts:116:24)

  ÔùÅ WorkflowsController ÔÇ║ reorder ÔÇ║ should reorder workflow stages

    TypeError: controller.reorder is not a function

      135 |       workflowsService.reorder.mockResolvedValue(reorderedWorkflow as any);
      136 |
    > 137 |       const result = await controller.reorder('wf-123', reorderDto, mockUser);
          |                                       ^
      138 |
      139 |       expect(workflowsService.reorder).toHaveBeenCalledWith(
      140 |         'wf-123',

      at Object.<anonymous> (workflows/workflows.controller.spec.ts:137:39)

PASS src/tasks/tasks.service.spec.ts (5.127 s)
PASS src/projects/projects.service.spec.ts
C:\Users\tfurt\source\repos\ordo-todo\node_modules\@nestjs\passport\dist\auth.guard.js:52
            return context.switchToHttp().getResponse();
                                          ^

[TypeError: context.switchToHttp(...).getResponse is not a function]

Node.js v22.17.0
[Nest] 46172  - 17/12/2025, 4:10:24 p.m.   ERROR [CollaborationGateway] Connection error: Invalid
FAIL src/gamification/gamification.service.spec.ts
  ÔùÅ GamificationService ÔÇ║ should be defined

    Nest can't resolve dependencies of the GamificationService (PrismaService, ?). Please make sure that the argument NotificationsService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If NotificationsService is a provider, is it part of the current RootTestModule?
    - If NotificationsService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing NotificationsService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      31 |     };
      32 |
    > 33 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      34 |       providers: [
      35 |         GamificationService,
      36 |         { provide: PrismaService, useValue: mockPrisma },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (gamification/gamification.service.spec.ts:33:35)

  ÔùÅ GamificationService ÔÇ║ getAchievements ÔÇ║ should return all achievements with unlock status

    Nest can't resolve dependencies of the GamificationService (PrismaService, ?). Please make sure that the argument NotificationsService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If NotificationsService is a provider, is it part of the current RootTestModule?
    - If NotificationsService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing NotificationsService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      31 |     };
      32 |
    > 33 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      34 |       providers: [
      35 |         GamificationService,
      36 |         { provide: PrismaService, useValue: mockPrisma },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (gamification/gamification.service.spec.ts:33:35)

  ÔùÅ GamificationService ÔÇ║ getUserPoints ÔÇ║ should calculate total points from unlocked achievements

    Nest can't resolve dependencies of the GamificationService (PrismaService, ?). Please make sure that the argument NotificationsService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If NotificationsService is a provider, is it part of the current RootTestModule?
    - If NotificationsService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing NotificationsService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      31 |     };
      32 |
    > 33 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      34 |       providers: [
      35 |         GamificationService,
      36 |         { provide: PrismaService, useValue: mockPrisma },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (gamification/gamification.service.spec.ts:33:35)

  ÔùÅ GamificationService ÔÇ║ getUserPoints ÔÇ║ should return 0 when no achievements

    Nest can't resolve dependencies of the GamificationService (PrismaService, ?). Please make sure that the argument NotificationsService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If NotificationsService is a provider, is it part of the current RootTestModule?
    - If NotificationsService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing NotificationsService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      31 |     };
      32 |
    > 33 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      34 |       providers: [
      35 |         GamificationService,
      36 |         { provide: PrismaService, useValue: mockPrisma },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (gamification/gamification.service.spec.ts:33:35)

  ÔùÅ GamificationService ÔÇ║ getLeaderboard ÔÇ║ should return sorted leaderboard

    Nest can't resolve dependencies of the GamificationService (PrismaService, ?). Please make sure that the argument NotificationsService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If NotificationsService is a provider, is it part of the current RootTestModule?
    - If NotificationsService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing NotificationsService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      31 |     };
      32 |
    > 33 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      34 |       providers: [
      35 |         GamificationService,
      36 |         { provide: PrismaService, useValue: mockPrisma },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (gamification/gamification.service.spec.ts:33:35)

  ÔùÅ GamificationService ÔÇ║ checkAndUnlockAchievements ÔÇ║ should unlock achievement when criteria met

    Nest can't resolve dependencies of the GamificationService (PrismaService, ?). Please make sure that the argument NotificationsService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If NotificationsService is a provider, is it part of the current RootTestModule?
    - If NotificationsService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing NotificationsService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      31 |     };
      32 |
    > 33 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      34 |       providers: [
      35 |         GamificationService,
      36 |         { provide: PrismaService, useValue: mockPrisma },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (gamification/gamification.service.spec.ts:33:35)

  ÔùÅ GamificationService ÔÇ║ checkAndUnlockAchievements ÔÇ║ should not unlock already unlocked achievement

    Nest can't resolve dependencies of the GamificationService (PrismaService, ?). Please make sure that the argument NotificationsService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If NotificationsService is a provider, is it part of the current RootTestModule?
    - If NotificationsService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing NotificationsService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      31 |     };
      32 |
    > 33 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      34 |       providers: [
      35 |         GamificationService,
      36 |         { provide: PrismaService, useValue: mockPrisma },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (gamification/gamification.service.spec.ts:33:35)

  ÔùÅ GamificationService ÔÇ║ getStreakInfo ÔÇ║ should calculate current streak

    Nest can't resolve dependencies of the GamificationService (PrismaService, ?). Please make sure that the argument NotificationsService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If NotificationsService is a provider, is it part of the current RootTestModule?
    - If NotificationsService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing NotificationsService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      31 |     };
      32 |
    > 33 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      34 |       providers: [
      35 |         GamificationService,
      36 |         { provide: PrismaService, useValue: mockPrisma },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (gamification/gamification.service.spec.ts:33:35)

PASS src/collaboration/collaboration.gateway.spec.ts (5.027 s)
PASS src/users/users.controller.spec.ts (5.123 s)
FAIL src/workspaces/workspaces.controller.spec.ts (5.151 s)
  ÔùÅ WorkspacesController ÔÇ║ should be defined

    Nest can't resolve dependencies of the WorkspaceGuard (Reflector, ?). Please make sure that the argument PrismaService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If PrismaService is a provider, is it part of the current RootTestModule?
    - If PrismaService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing PrismaService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      24 |     };
      25 |
    > 26 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      27 |       controllers: [WorkspacesController],
      28 |       providers: [
      29 |         { provide: WorkspacesService, useValue: mockWorkspacesService },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadInjectable (../../../node_modules/@nestjs/core/injector/injector.js:99:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:80:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstancesOfInjectables (../../../node_modules/@nestjs/core/injector/instance-loader.js:79:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:41:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (workspaces/workspaces.controller.spec.ts:26:35)

  ÔùÅ WorkspacesController ÔÇ║ create ÔÇ║ should create a new workspace

    Nest can't resolve dependencies of the WorkspaceGuard (Reflector, ?). Please make sure that the argument PrismaService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If PrismaService is a provider, is it part of the current RootTestModule?
    - If PrismaService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing PrismaService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      24 |     };
      25 |
    > 26 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      27 |       controllers: [WorkspacesController],
      28 |       providers: [
      29 |         { provide: WorkspacesService, useValue: mockWorkspacesService },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadInjectable (../../../node_modules/@nestjs/core/injector/injector.js:99:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:80:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstancesOfInjectables (../../../node_modules/@nestjs/core/injector/instance-loader.js:79:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:41:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (workspaces/workspaces.controller.spec.ts:26:35)

  ÔùÅ WorkspacesController ÔÇ║ findAll ÔÇ║ should return all workspaces for user

    Nest can't resolve dependencies of the WorkspaceGuard (Reflector, ?). Please make sure that the argument PrismaService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If PrismaService is a provider, is it part of the current RootTestModule?
    - If PrismaService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing PrismaService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      24 |     };
      25 |
    > 26 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      27 |       controllers: [WorkspacesController],
      28 |       providers: [
      29 |         { provide: WorkspacesService, useValue: mockWorkspacesService },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadInjectable (../../../node_modules/@nestjs/core/injector/injector.js:99:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:80:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstancesOfInjectables (../../../node_modules/@nestjs/core/injector/instance-loader.js:79:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:41:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (workspaces/workspaces.controller.spec.ts:26:35)

  ÔùÅ WorkspacesController ÔÇ║ findOne ÔÇ║ should return workspace by id

    Nest can't resolve dependencies of the WorkspaceGuard (Reflector, ?). Please make sure that the argument PrismaService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If PrismaService is a provider, is it part of the current RootTestModule?
    - If PrismaService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing PrismaService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      24 |     };
      25 |
    > 26 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      27 |       controllers: [WorkspacesController],
      28 |       providers: [
      29 |         { provide: WorkspacesService, useValue: mockWorkspacesService },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadInjectable (../../../node_modules/@nestjs/core/injector/injector.js:99:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:80:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstancesOfInjectables (../../../node_modules/@nestjs/core/injector/instance-loader.js:79:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:41:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (workspaces/workspaces.controller.spec.ts:26:35)

  ÔùÅ WorkspacesController ÔÇ║ update ÔÇ║ should update workspace

    Nest can't resolve dependencies of the WorkspaceGuard (Reflector, ?). Please make sure that the argument PrismaService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If PrismaService is a provider, is it part of the current RootTestModule?
    - If PrismaService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing PrismaService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      24 |     };
      25 |
    > 26 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      27 |       controllers: [WorkspacesController],
      28 |       providers: [
      29 |         { provide: WorkspacesService, useValue: mockWorkspacesService },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadInjectable (../../../node_modules/@nestjs/core/injector/injector.js:99:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:80:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstancesOfInjectables (../../../node_modules/@nestjs/core/injector/instance-loader.js:79:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:41:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (workspaces/workspaces.controller.spec.ts:26:35)

  ÔùÅ WorkspacesController ÔÇ║ remove ÔÇ║ should delete workspace

    Nest can't resolve dependencies of the WorkspaceGuard (Reflector, ?). Please make sure that the argument PrismaService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If PrismaService is a provider, is it part of the current RootTestModule?
    - If PrismaService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing PrismaService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      24 |     };
      25 |
    > 26 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      27 |       controllers: [WorkspacesController],
      28 |       providers: [
      29 |         { provide: WorkspacesService, useValue: mockWorkspacesService },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadInjectable (../../../node_modules/@nestjs/core/injector/injector.js:99:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:80:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstancesOfInjectables (../../../node_modules/@nestjs/core/injector/instance-loader.js:79:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:41:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (workspaces/workspaces.controller.spec.ts:26:35)

  ÔùÅ WorkspacesController ÔÇ║ getMembers ÔÇ║ should return workspace members

    Nest can't resolve dependencies of the WorkspaceGuard (Reflector, ?). Please make sure that the argument PrismaService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If PrismaService is a provider, is it part of the current RootTestModule?
    - If PrismaService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing PrismaService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      24 |     };
      25 |
    > 26 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      27 |       controllers: [WorkspacesController],
      28 |       providers: [
      29 |         { provide: WorkspacesService, useValue: mockWorkspacesService },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadInjectable (../../../node_modules/@nestjs/core/injector/injector.js:99:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:80:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstancesOfInjectables (../../../node_modules/@nestjs/core/injector/instance-loader.js:79:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:41:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (workspaces/workspaces.controller.spec.ts:26:35)

  ÔùÅ WorkspacesController ÔÇ║ addMember ÔÇ║ should add member to workspace

    Nest can't resolve dependencies of the WorkspaceGuard (Reflector, ?). Please make sure that the argument PrismaService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If PrismaService is a provider, is it part of the current RootTestModule?
    - If PrismaService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing PrismaService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      24 |     };
      25 |
    > 26 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      27 |       controllers: [WorkspacesController],
      28 |       providers: [
      29 |         { provide: WorkspacesService, useValue: mockWorkspacesService },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadInjectable (../../../node_modules/@nestjs/core/injector/injector.js:99:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:80:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstancesOfInjectables (../../../node_modules/@nestjs/core/injector/instance-loader.js:79:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:41:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (workspaces/workspaces.controller.spec.ts:26:35)

  ÔùÅ WorkspacesController ÔÇ║ updateMember ÔÇ║ should update member role

    Nest can't resolve dependencies of the WorkspaceGuard (Reflector, ?). Please make sure that the argument PrismaService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If PrismaService is a provider, is it part of the current RootTestModule?
    - If PrismaService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing PrismaService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      24 |     };
      25 |
    > 26 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      27 |       controllers: [WorkspacesController],
      28 |       providers: [
      29 |         { provide: WorkspacesService, useValue: mockWorkspacesService },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadInjectable (../../../node_modules/@nestjs/core/injector/injector.js:99:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:80:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstancesOfInjectables (../../../node_modules/@nestjs/core/injector/instance-loader.js:79:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:41:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (workspaces/workspaces.controller.spec.ts:26:35)

  ÔùÅ WorkspacesController ÔÇ║ removeMember ÔÇ║ should remove member from workspace

    Nest can't resolve dependencies of the WorkspaceGuard (Reflector, ?). Please make sure that the argument PrismaService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If PrismaService is a provider, is it part of the current RootTestModule?
    - If PrismaService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing PrismaService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      24 |     };
      25 |
    > 26 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      27 |       controllers: [WorkspacesController],
      28 |       providers: [
      29 |         { provide: WorkspacesService, useValue: mockWorkspacesService },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadInjectable (../../../node_modules/@nestjs/core/injector/injector.js:99:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:80:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstancesOfInjectables (../../../node_modules/@nestjs/core/injector/instance-loader.js:79:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:41:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (workspaces/workspaces.controller.spec.ts:26:35)

PASS src/notifications/notifications.service.spec.ts
PASS src/comments/comments.service.spec.ts
FAIL src/tasks/tasks.controller.spec.ts (5.654 s)
  ÔùÅ TasksController ÔÇ║ should be defined

    Nest can't resolve dependencies of the CreateTaskGuard (Reflector, ?). Please make sure that the argument PrismaService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If PrismaService is a provider, is it part of the current RootTestModule?
    - If PrismaService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing PrismaService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      11 |
      12 |   beforeEach(async () => {
    > 13 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      14 |       controllers: [TasksController],
      15 |       providers: [
      16 |         {

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadInjectable (../../../node_modules/@nestjs/core/injector/injector.js:99:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:80:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstancesOfInjectables (../../../node_modules/@nestjs/core/injector/instance-loader.js:79:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:41:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (tasks/tasks.controller.spec.ts:13:35)

  ÔùÅ TasksController ÔÇ║ create ÔÇ║ should create a task

    Nest can't resolve dependencies of the CreateTaskGuard (Reflector, ?). Please make sure that the argument PrismaService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If PrismaService is a provider, is it part of the current RootTestModule?
    - If PrismaService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing PrismaService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      11 |
      12 |   beforeEach(async () => {
    > 13 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      14 |       controllers: [TasksController],
      15 |       providers: [
      16 |         {

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadInjectable (../../../node_modules/@nestjs/core/injector/injector.js:99:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:80:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstancesOfInjectables (../../../node_modules/@nestjs/core/injector/instance-loader.js:79:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:41:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (tasks/tasks.controller.spec.ts:13:35)

PASS src/chat/chat.controller.spec.ts (5.285 s)
PASS src/ai/ai.controller.spec.ts (5.336 s)
PASS src/timers/timers.controller.spec.ts (5.49 s)
FAIL src/attachments/attachments.controller.spec.ts (5.665 s)
  ÔùÅ AttachmentsController ÔÇ║ upload ÔÇ║ should upload file and create attachment

    TypeError: controller.upload is not a function

      53 |       attachmentsService.create.mockResolvedValue(mockAttachment as any);
      54 |
    > 55 |       const result = await controller.upload(taskId, mockFile, mockUser);
         |                                       ^
      56 |
      57 |       expect(attachmentsService.create).toHaveBeenCalledWith(
      58 |         taskId,

      at Object.<anonymous> (attachments/attachments.controller.spec.ts:55:39)

  ÔùÅ AttachmentsController ÔÇ║ findByTask ÔÇ║ should return attachments for task

    TypeError: controller.findByTask is not a function

      72 |       attachmentsService.findByTask.mockResolvedValue(mockAttachments as any);
      73 |
    > 74 |       const result = await controller.findByTask('task-123', mockUser);
         |                                       ^
      75 |
      76 |       expect(attachmentsService.findByTask).toHaveBeenCalledWith(
      77 |         'task-123',

      at Object.<anonymous> (attachments/attachments.controller.spec.ts:74:39)

  ÔùÅ AttachmentsController ÔÇ║ findOne ÔÇ║ should return attachment by id

    TypeError: controller.findOne is not a function

      87 |       attachmentsService.findById.mockResolvedValue(mockAttachment as any);
      88 |
    > 89 |       const result = await controller.findOne('att-123', mockUser);
         |                                       ^
      90 |
      91 |       expect(attachmentsService.findById).toHaveBeenCalledWith(
      92 |         'att-123',

      at Object.<anonymous> (attachments/attachments.controller.spec.ts:89:39)

  ÔùÅ AttachmentsController ÔÇ║ remove ÔÇ║ should delete attachment

    TypeError: this.attachmentsService.remove is not a function

      115 |   @HttpCode(HttpStatus.NO_CONTENT)
      116 |   remove(@Param('id') id: string, @CurrentUser() user: RequestUser) {
    > 117 |     return this.attachmentsService.remove(id, user.id);
          |                                    ^
      118 |   }
      119 | }
      120 |

      at AttachmentsController.remove (attachments/attachments.controller.ts:117:36)
      at Object.<anonymous> (attachments/attachments.controller.spec.ts:103:24)

  ÔùÅ AttachmentsController ÔÇ║ download ÔÇ║ should return download URL

    TypeError: controller.download is not a function

      115 |       attachmentsService.getDownloadUrl.mockResolvedValue(mockUrl);
      116 |
    > 117 |       const result = await controller.download('att-123', mockUser);
          |                                       ^
      118 |
      119 |       expect(attachmentsService.getDownloadUrl).toHaveBeenCalledWith(
      120 |         'att-123',

      at Object.<anonymous> (attachments/attachments.controller.spec.ts:117:39)

C:\Users\tfurt\source\repos\ordo-todo\node_modules\@nestjs\passport\dist\auth.guard.js:52
            return context.switchToHttp().getResponse();
                                          ^

[TypeError: context.switchToHttp(...).getResponse is not a function]

Node.js v22.17.0
C:\Users\tfurt\source\repos\ordo-todo\node_modules\@nestjs\passport\dist\auth.guard.js:52
            return context.switchToHttp().getResponse();
                                          ^

[TypeError: context.switchToHttp(...).getResponse is not a function]

Node.js v22.17.0
C:\Users\tfurt\source\repos\ordo-todo\node_modules\@nestjs\passport\dist\auth.guard.js:52
            return context.switchToHttp().getResponse();
                                          ^

[TypeError: context.switchToHttp(...).getResponse is not a function]

Node.js v22.17.0
FAIL src/common/guards/jwt-auth.guard.spec.ts
  ÔùÅ Test suite failed to run

    Jest worker encountered 4 child process exceptions, exceeding retry limit

      at ChildProcessWorker.initialize (../../../node_modules/jest-worker/build/index.js:805:21)

Summary of all failing tests
FAIL common/guards/ws-throttle.guard.spec.ts
  ÔùÅ WsThrottleGuard ÔÇ║ should be defined

    Nest can't resolve dependencies of the WsThrottleGuard (?, Object). Please make sure that the argument dependency at index [0] is available in the current context.

    Potential solutions:
    - The dependency at index [0] appears to be undefined at runtime
    - This commonly occurs when using 'import type' instead of 'import' for injectable classes
    - Check your imports and change:
      ÔØî import type { SomeService } from './some.service';
      Ô£à import { SomeService } from './some.service';
    - Ensure the imported class is decorated with @Injectable() or is a valid provider
    - If using dynamic imports, ensure the class is available at runtime, not just for type checking

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      28 |
      29 |   beforeEach(async () => {
    > 30 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      31 |       providers: [WsThrottleGuard],
      32 |     }).compile();
      33 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (common/guards/ws-throttle.guard.spec.ts:30:35)

  ÔùÅ WsThrottleGuard ÔÇ║ canActivate ÔÇ║ should allow requests under the limit

    Nest can't resolve dependencies of the WsThrottleGuard (?, Object). Please make sure that the argument dependency at index [0] is available in the current context.

    Potential solutions:
    - The dependency at index [0] appears to be undefined at runtime
    - This commonly occurs when using 'import type' instead of 'import' for injectable classes
    - Check your imports and change:
      ÔØî import type { SomeService } from './some.service';
      Ô£à import { SomeService } from './some.service';
    - Ensure the imported class is decorated with @Injectable() or is a valid provider
    - If using dynamic imports, ensure the class is available at runtime, not just for type checking

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      28 |
      29 |   beforeEach(async () => {
    > 30 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      31 |       providers: [WsThrottleGuard],
      32 |     }).compile();
      33 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (common/guards/ws-throttle.guard.spec.ts:30:35)

  ÔùÅ WsThrottleGuard ÔÇ║ canActivate ÔÇ║ should throw WsException when limit is exceeded

    Nest can't resolve dependencies of the WsThrottleGuard (?, Object). Please make sure that the argument dependency at index [0] is available in the current context.

    Potential solutions:
    - The dependency at index [0] appears to be undefined at runtime
    - This commonly occurs when using 'import type' instead of 'import' for injectable classes
    - Check your imports and change:
      ÔØî import type { SomeService } from './some.service';
      Ô£à import { SomeService } from './some.service';
    - Ensure the imported class is decorated with @Injectable() or is a valid provider
    - If using dynamic imports, ensure the class is available at runtime, not just for type checking

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      28 |
      29 |   beforeEach(async () => {
    > 30 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      31 |       providers: [WsThrottleGuard],
      32 |     }).compile();
      33 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (common/guards/ws-throttle.guard.spec.ts:30:35)

  ÔùÅ WsThrottleGuard ÔÇ║ canActivate ÔÇ║ should track different users separately

    Nest can't resolve dependencies of the WsThrottleGuard (?, Object). Please make sure that the argument dependency at index [0] is available in the current context.

    Potential solutions:
    - The dependency at index [0] appears to be undefined at runtime
    - This commonly occurs when using 'import type' instead of 'import' for injectable classes
    - Check your imports and change:
      ÔØî import type { SomeService } from './some.service';
      Ô£à import { SomeService } from './some.service';
    - Ensure the imported class is decorated with @Injectable() or is a valid provider
    - If using dynamic imports, ensure the class is available at runtime, not just for type checking

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      28 |
      29 |   beforeEach(async () => {
    > 30 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      31 |       providers: [WsThrottleGuard],
      32 |     }).compile();
      33 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (common/guards/ws-throttle.guard.spec.ts:30:35)

  ÔùÅ WsThrottleGuard ÔÇ║ canActivate ÔÇ║ should return true immediately if no userId

    Nest can't resolve dependencies of the WsThrottleGuard (?, Object). Please make sure that the argument dependency at index [0] is available in the current context.

    Potential solutions:
    - The dependency at index [0] appears to be undefined at runtime
    - This commonly occurs when using 'import type' instead of 'import' for injectable classes
    - Check your imports and change:
      ÔØî import type { SomeService } from './some.service';
      Ô£à import { SomeService } from './some.service';
    - Ensure the imported class is decorated with @Injectable() or is a valid provider
    - If using dynamic imports, ensure the class is available at runtime, not just for type checking

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      28 |
      29 |   beforeEach(async () => {
    > 30 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      31 |       providers: [WsThrottleGuard],
      32 |     }).compile();
      33 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (common/guards/ws-throttle.guard.spec.ts:30:35)

  ÔùÅ WsThrottleGuard ÔÇ║ rate limiting reset ÔÇ║ should reset count after time window

    Nest can't resolve dependencies of the WsThrottleGuard (?, Object). Please make sure that the argument dependency at index [0] is available in the current context.

    Potential solutions:
    - The dependency at index [0] appears to be undefined at runtime
    - This commonly occurs when using 'import type' instead of 'import' for injectable classes
    - Check your imports and change:
      ÔØî import type { SomeService } from './some.service';
      Ô£à import { SomeService } from './some.service';
    - Ensure the imported class is decorated with @Injectable() or is a valid provider
    - If using dynamic imports, ensure the class is available at runtime, not just for type checking

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      28 |
      29 |   beforeEach(async () => {
    > 30 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      31 |       providers: [WsThrottleGuard],
      32 |     }).compile();
      33 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (common/guards/ws-throttle.guard.spec.ts:30:35)

FAIL templates/templates.controller.spec.ts (5.06 s)
  ÔùÅ TemplatesController ÔÇ║ create ÔÇ║ should create a new template

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "user-123", {"description": "Template for weekly review task", "name": "Weekly Review", "taskData": {"estimatedMinutes": 30, "priority": "MEDIUM", "title": "Weekly Review"}}
    Received: {"description": "Template for weekly review task", "name": "Weekly Review", "taskData": {"estimatedMinutes": 30, "priority": "MEDIUM", "title": "Weekly Review"}}

    Number of calls: 1

      56 |       const result = await controller.create(createDto, mockUser);
      57 |
    > 58 |       expect(templatesService.create).toHaveBeenCalledWith(
         |                                       ^
      59 |         mockUser.id,
      60 |         createDto,
      61 |       );

      at Object.<anonymous> (templates/templates.controller.spec.ts:58:39)

  ÔùÅ TemplatesController ÔÇ║ findAll ÔÇ║ should return all templates for user

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "user-123"
    Received: {"email": "test@example.com", "id": "user-123", "name": "Test"}

    Number of calls: 1

      74 |       const result = await controller.findAll(mockUser);
      75 |
    > 76 |       expect(templatesService.findAll).toHaveBeenCalledWith(mockUser.id);
         |                                        ^
      77 |       expect(result).toEqual(mockTemplates);
      78 |     });
      79 |   });

      at Object.<anonymous> (templates/templates.controller.spec.ts:76:40)

  ÔùÅ TemplatesController ÔÇ║ findOne ÔÇ║ should return template by id

    TypeError: this.templatesService.findOne is not a function

      35 |   @Get(':id')
      36 |   findOne(@Param('id') id: string) {
    > 37 |     return this.templatesService.findOne(id);
         |                                  ^
      38 |   }
      39 |
      40 |   @Patch(':id')

      at TemplatesController.findOne (templates/templates.controller.ts:37:34)
      at Object.<anonymous> (templates/templates.controller.spec.ts:86:39)

  ÔùÅ TemplatesController ÔÇ║ update ÔÇ║ should update template

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "tmpl-123", "user-123", {"name": "Updated Template"}
    Received: "tmpl-123", {"name": "Updated Template"}

    Number of calls: 1

      102 |       const result = await controller.update('tmpl-123', updateDto, mockUser);
      103 |
    > 104 |       expect(templatesService.update).toHaveBeenCalledWith(
          |                                       ^
      105 |         'tmpl-123',
      106 |         mockUser.id,
      107 |         updateDto,

      at Object.<anonymous> (templates/templates.controller.spec.ts:104:39)

  ÔùÅ TemplatesController ÔÇ║ remove ÔÇ║ should delete template

    TypeError: this.templatesService.remove is not a function

      48 |   @Delete(':id')
      49 |   remove(@Param('id') id: string) {
    > 50 |     return this.templatesService.remove(id);
         |                                  ^
      51 |   }
      52 | }
      53 |

      at TemplatesController.remove (templates/templates.controller.ts:50:34)
      at Object.<anonymous> (templates/templates.controller.spec.ts:117:24)

  ÔùÅ TemplatesController ÔÇ║ createTask ÔÇ║ should create task from template

    TypeError: controller.createTask is not a function

      135 |       );
      136 |
    > 137 |       const result = await controller.createTask(
          |                                       ^
      138 |         'tmpl-123',
      139 |         createDto,
      140 |         mockUser,

      at Object.<anonymous> (templates/templates.controller.spec.ts:137:39)

FAIL workflows/workflows.controller.spec.ts
  ÔùÅ WorkflowsController ÔÇ║ create ÔÇ║ should create a new workflow

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "user-123", {"name": "Development", "stages": [{"name": "Backlog", "order": 0}, {"name": "In Progress", "order": 1}, {"name": "Done", "order": 2}], "workspaceId": "ws-123"}
    Received: {"name": "Development", "stages": [{"name": "Backlog", "order": 0}, {"name": "In Progress", "order": 1}, {"name": "Done", "order": 2}], "workspaceId": "ws-123"}

    Number of calls: 1

      52 |       const result = await controller.create(createDto, mockUser);
      53 |
    > 54 |       expect(workflowsService.create).toHaveBeenCalledWith(
         |                                       ^
      55 |         mockUser.id,
      56 |         createDto,
      57 |       );

      at Object.<anonymous> (workflows/workflows.controller.spec.ts:54:39)

  ÔùÅ WorkflowsController ÔÇ║ findAll ÔÇ║ should return workflows for workspace

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "ws-123", "user-123"
    Received: "ws-123"

    Number of calls: 1

      70 |       const result = await controller.findAll('ws-123', mockUser);
      71 |
    > 72 |       expect(workflowsService.findAll).toHaveBeenCalledWith(
         |                                        ^
      73 |         'ws-123',
      74 |         mockUser.id,
      75 |       );

      at Object.<anonymous> (workflows/workflows.controller.spec.ts:72:40)

  ÔùÅ WorkflowsController ÔÇ║ findOne ÔÇ║ should return workflow by id

    TypeError: controller.findOne is not a function

      83 |       workflowsService.findById.mockResolvedValue(mockWorkflow as any);
      84 |
    > 85 |       const result = await controller.findOne('wf-123', mockUser);
         |                                       ^
      86 |
      87 |       expect(workflowsService.findById).toHaveBeenCalledWith(
      88 |         'wf-123',

      at Object.<anonymous> (workflows/workflows.controller.spec.ts:85:39)

  ÔùÅ WorkflowsController ÔÇ║ update ÔÇ║ should update workflow

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "wf-123", "user-123", {"name": "Updated Workflow"}
    Received: "wf-123", {"name": "Updated Workflow"}

    Number of calls: 1

      101 |       const result = await controller.update('wf-123', updateDto, mockUser);
      102 |
    > 103 |       expect(workflowsService.update).toHaveBeenCalledWith(
          |                                       ^
      104 |         'wf-123',
      105 |         mockUser.id,
      106 |         updateDto,

      at Object.<anonymous> (workflows/workflows.controller.spec.ts:103:39)

  ÔùÅ WorkflowsController ÔÇ║ remove ÔÇ║ should delete workflow

    TypeError: this.workflowsService.remove is not a function

      44 |   @HttpCode(HttpStatus.NO_CONTENT)
      45 |   remove(@Param('id') id: string) {
    > 46 |     return this.workflowsService.remove(id);
         |                                  ^
      47 |   }
      48 | }
      49 |

      at WorkflowsController.remove (workflows/workflows.controller.ts:46:34)
      at Object.<anonymous> (workflows/workflows.controller.spec.ts:116:24)

  ÔùÅ WorkflowsController ÔÇ║ reorder ÔÇ║ should reorder workflow stages

    TypeError: controller.reorder is not a function

      135 |       workflowsService.reorder.mockResolvedValue(reorderedWorkflow as any);
      136 |
    > 137 |       const result = await controller.reorder('wf-123', reorderDto, mockUser);
          |                                       ^
      138 |
      139 |       expect(workflowsService.reorder).toHaveBeenCalledWith(
      140 |         'wf-123',

      at Object.<anonymous> (workflows/workflows.controller.spec.ts:137:39)

FAIL gamification/gamification.service.spec.ts
  ÔùÅ GamificationService ÔÇ║ should be defined

    Nest can't resolve dependencies of the GamificationService (PrismaService, ?). Please make sure that the argument NotificationsService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If NotificationsService is a provider, is it part of the current RootTestModule?
    - If NotificationsService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing NotificationsService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      31 |     };
      32 |
    > 33 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      34 |       providers: [
      35 |         GamificationService,
      36 |         { provide: PrismaService, useValue: mockPrisma },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (gamification/gamification.service.spec.ts:33:35)

  ÔùÅ GamificationService ÔÇ║ getAchievements ÔÇ║ should return all achievements with unlock status

    Nest can't resolve dependencies of the GamificationService (PrismaService, ?). Please make sure that the argument NotificationsService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If NotificationsService is a provider, is it part of the current RootTestModule?
    - If NotificationsService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing NotificationsService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      31 |     };
      32 |
    > 33 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      34 |       providers: [
      35 |         GamificationService,
      36 |         { provide: PrismaService, useValue: mockPrisma },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (gamification/gamification.service.spec.ts:33:35)

  ÔùÅ GamificationService ÔÇ║ getUserPoints ÔÇ║ should calculate total points from unlocked achievements

    Nest can't resolve dependencies of the GamificationService (PrismaService, ?). Please make sure that the argument NotificationsService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If NotificationsService is a provider, is it part of the current RootTestModule?
    - If NotificationsService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing NotificationsService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      31 |     };
      32 |
    > 33 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      34 |       providers: [
      35 |         GamificationService,
      36 |         { provide: PrismaService, useValue: mockPrisma },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (gamification/gamification.service.spec.ts:33:35)

  ÔùÅ GamificationService ÔÇ║ getUserPoints ÔÇ║ should return 0 when no achievements

    Nest can't resolve dependencies of the GamificationService (PrismaService, ?). Please make sure that the argument NotificationsService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If NotificationsService is a provider, is it part of the current RootTestModule?
    - If NotificationsService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing NotificationsService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      31 |     };
      32 |
    > 33 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      34 |       providers: [
      35 |         GamificationService,
      36 |         { provide: PrismaService, useValue: mockPrisma },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (gamification/gamification.service.spec.ts:33:35)

  ÔùÅ GamificationService ÔÇ║ getLeaderboard ÔÇ║ should return sorted leaderboard

    Nest can't resolve dependencies of the GamificationService (PrismaService, ?). Please make sure that the argument NotificationsService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If NotificationsService is a provider, is it part of the current RootTestModule?
    - If NotificationsService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing NotificationsService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      31 |     };
      32 |
    > 33 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      34 |       providers: [
      35 |         GamificationService,
      36 |         { provide: PrismaService, useValue: mockPrisma },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (gamification/gamification.service.spec.ts:33:35)

  ÔùÅ GamificationService ÔÇ║ checkAndUnlockAchievements ÔÇ║ should unlock achievement when criteria met

    Nest can't resolve dependencies of the GamificationService (PrismaService, ?). Please make sure that the argument NotificationsService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If NotificationsService is a provider, is it part of the current RootTestModule?
    - If NotificationsService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing NotificationsService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      31 |     };
      32 |
    > 33 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      34 |       providers: [
      35 |         GamificationService,
      36 |         { provide: PrismaService, useValue: mockPrisma },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (gamification/gamification.service.spec.ts:33:35)

  ÔùÅ GamificationService ÔÇ║ checkAndUnlockAchievements ÔÇ║ should not unlock already unlocked achievement

    Nest can't resolve dependencies of the GamificationService (PrismaService, ?). Please make sure that the argument NotificationsService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If NotificationsService is a provider, is it part of the current RootTestModule?
    - If NotificationsService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing NotificationsService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      31 |     };
      32 |
    > 33 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      34 |       providers: [
      35 |         GamificationService,
      36 |         { provide: PrismaService, useValue: mockPrisma },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (gamification/gamification.service.spec.ts:33:35)

  ÔùÅ GamificationService ÔÇ║ getStreakInfo ÔÇ║ should calculate current streak

    Nest can't resolve dependencies of the GamificationService (PrismaService, ?). Please make sure that the argument NotificationsService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If NotificationsService is a provider, is it part of the current RootTestModule?
    - If NotificationsService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing NotificationsService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      31 |     };
      32 |
    > 33 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      34 |       providers: [
      35 |         GamificationService,
      36 |         { provide: PrismaService, useValue: mockPrisma },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadProvider (../../../node_modules/@nestjs/core/injector/injector.js:103:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (gamification/gamification.service.spec.ts:33:35)

FAIL workspaces/workspaces.controller.spec.ts (5.151 s)
  ÔùÅ WorkspacesController ÔÇ║ should be defined

    Nest can't resolve dependencies of the WorkspaceGuard (Reflector, ?). Please make sure that the argument PrismaService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If PrismaService is a provider, is it part of the current RootTestModule?
    - If PrismaService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing PrismaService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      24 |     };
      25 |
    > 26 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      27 |       controllers: [WorkspacesController],
      28 |       providers: [
      29 |         { provide: WorkspacesService, useValue: mockWorkspacesService },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadInjectable (../../../node_modules/@nestjs/core/injector/injector.js:99:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:80:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstancesOfInjectables (../../../node_modules/@nestjs/core/injector/instance-loader.js:79:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:41:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (workspaces/workspaces.controller.spec.ts:26:35)

  ÔùÅ WorkspacesController ÔÇ║ create ÔÇ║ should create a new workspace

    Nest can't resolve dependencies of the WorkspaceGuard (Reflector, ?). Please make sure that the argument PrismaService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If PrismaService is a provider, is it part of the current RootTestModule?
    - If PrismaService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing PrismaService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      24 |     };
      25 |
    > 26 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      27 |       controllers: [WorkspacesController],
      28 |       providers: [
      29 |         { provide: WorkspacesService, useValue: mockWorkspacesService },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadInjectable (../../../node_modules/@nestjs/core/injector/injector.js:99:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:80:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstancesOfInjectables (../../../node_modules/@nestjs/core/injector/instance-loader.js:79:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:41:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (workspaces/workspaces.controller.spec.ts:26:35)

  ÔùÅ WorkspacesController ÔÇ║ findAll ÔÇ║ should return all workspaces for user

    Nest can't resolve dependencies of the WorkspaceGuard (Reflector, ?). Please make sure that the argument PrismaService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If PrismaService is a provider, is it part of the current RootTestModule?
    - If PrismaService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing PrismaService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      24 |     };
      25 |
    > 26 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      27 |       controllers: [WorkspacesController],
      28 |       providers: [
      29 |         { provide: WorkspacesService, useValue: mockWorkspacesService },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadInjectable (../../../node_modules/@nestjs/core/injector/injector.js:99:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:80:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstancesOfInjectables (../../../node_modules/@nestjs/core/injector/instance-loader.js:79:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:41:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (workspaces/workspaces.controller.spec.ts:26:35)

  ÔùÅ WorkspacesController ÔÇ║ findOne ÔÇ║ should return workspace by id

    Nest can't resolve dependencies of the WorkspaceGuard (Reflector, ?). Please make sure that the argument PrismaService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If PrismaService is a provider, is it part of the current RootTestModule?
    - If PrismaService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing PrismaService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      24 |     };
      25 |
    > 26 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      27 |       controllers: [WorkspacesController],
      28 |       providers: [
      29 |         { provide: WorkspacesService, useValue: mockWorkspacesService },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadInjectable (../../../node_modules/@nestjs/core/injector/injector.js:99:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:80:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstancesOfInjectables (../../../node_modules/@nestjs/core/injector/instance-loader.js:79:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:41:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (workspaces/workspaces.controller.spec.ts:26:35)

  ÔùÅ WorkspacesController ÔÇ║ update ÔÇ║ should update workspace

    Nest can't resolve dependencies of the WorkspaceGuard (Reflector, ?). Please make sure that the argument PrismaService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If PrismaService is a provider, is it part of the current RootTestModule?
    - If PrismaService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing PrismaService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      24 |     };
      25 |
    > 26 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      27 |       controllers: [WorkspacesController],
      28 |       providers: [
      29 |         { provide: WorkspacesService, useValue: mockWorkspacesService },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadInjectable (../../../node_modules/@nestjs/core/injector/injector.js:99:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:80:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstancesOfInjectables (../../../node_modules/@nestjs/core/injector/instance-loader.js:79:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:41:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (workspaces/workspaces.controller.spec.ts:26:35)

  ÔùÅ WorkspacesController ÔÇ║ remove ÔÇ║ should delete workspace

    Nest can't resolve dependencies of the WorkspaceGuard (Reflector, ?). Please make sure that the argument PrismaService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If PrismaService is a provider, is it part of the current RootTestModule?
    - If PrismaService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing PrismaService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      24 |     };
      25 |
    > 26 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      27 |       controllers: [WorkspacesController],
      28 |       providers: [
      29 |         { provide: WorkspacesService, useValue: mockWorkspacesService },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadInjectable (../../../node_modules/@nestjs/core/injector/injector.js:99:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:80:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstancesOfInjectables (../../../node_modules/@nestjs/core/injector/instance-loader.js:79:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:41:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (workspaces/workspaces.controller.spec.ts:26:35)

  ÔùÅ WorkspacesController ÔÇ║ getMembers ÔÇ║ should return workspace members

    Nest can't resolve dependencies of the WorkspaceGuard (Reflector, ?). Please make sure that the argument PrismaService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If PrismaService is a provider, is it part of the current RootTestModule?
    - If PrismaService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing PrismaService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      24 |     };
      25 |
    > 26 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      27 |       controllers: [WorkspacesController],
      28 |       providers: [
      29 |         { provide: WorkspacesService, useValue: mockWorkspacesService },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadInjectable (../../../node_modules/@nestjs/core/injector/injector.js:99:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:80:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstancesOfInjectables (../../../node_modules/@nestjs/core/injector/instance-loader.js:79:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:41:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (workspaces/workspaces.controller.spec.ts:26:35)

  ÔùÅ WorkspacesController ÔÇ║ addMember ÔÇ║ should add member to workspace

    Nest can't resolve dependencies of the WorkspaceGuard (Reflector, ?). Please make sure that the argument PrismaService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If PrismaService is a provider, is it part of the current RootTestModule?
    - If PrismaService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing PrismaService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      24 |     };
      25 |
    > 26 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      27 |       controllers: [WorkspacesController],
      28 |       providers: [
      29 |         { provide: WorkspacesService, useValue: mockWorkspacesService },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadInjectable (../../../node_modules/@nestjs/core/injector/injector.js:99:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:80:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstancesOfInjectables (../../../node_modules/@nestjs/core/injector/instance-loader.js:79:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:41:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (workspaces/workspaces.controller.spec.ts:26:35)

  ÔùÅ WorkspacesController ÔÇ║ updateMember ÔÇ║ should update member role

    Nest can't resolve dependencies of the WorkspaceGuard (Reflector, ?). Please make sure that the argument PrismaService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If PrismaService is a provider, is it part of the current RootTestModule?
    - If PrismaService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing PrismaService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      24 |     };
      25 |
    > 26 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      27 |       controllers: [WorkspacesController],
      28 |       providers: [
      29 |         { provide: WorkspacesService, useValue: mockWorkspacesService },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadInjectable (../../../node_modules/@nestjs/core/injector/injector.js:99:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:80:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstancesOfInjectables (../../../node_modules/@nestjs/core/injector/instance-loader.js:79:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:41:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (workspaces/workspaces.controller.spec.ts:26:35)

  ÔùÅ WorkspacesController ÔÇ║ removeMember ÔÇ║ should remove member from workspace

    Nest can't resolve dependencies of the WorkspaceGuard (Reflector, ?). Please make sure that the argument PrismaService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If PrismaService is a provider, is it part of the current RootTestModule?
    - If PrismaService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing PrismaService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      24 |     };
      25 |
    > 26 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      27 |       controllers: [WorkspacesController],
      28 |       providers: [
      29 |         { provide: WorkspacesService, useValue: mockWorkspacesService },

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadInjectable (../../../node_modules/@nestjs/core/injector/injector.js:99:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:80:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstancesOfInjectables (../../../node_modules/@nestjs/core/injector/instance-loader.js:79:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:41:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (workspaces/workspaces.controller.spec.ts:26:35)

FAIL tasks/tasks.controller.spec.ts (5.654 s)
  ÔùÅ TasksController ÔÇ║ should be defined

    Nest can't resolve dependencies of the CreateTaskGuard (Reflector, ?). Please make sure that the argument PrismaService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If PrismaService is a provider, is it part of the current RootTestModule?
    - If PrismaService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing PrismaService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      11 |
      12 |   beforeEach(async () => {
    > 13 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      14 |       controllers: [TasksController],
      15 |       providers: [
      16 |         {

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadInjectable (../../../node_modules/@nestjs/core/injector/injector.js:99:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:80:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstancesOfInjectables (../../../node_modules/@nestjs/core/injector/instance-loader.js:79:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:41:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (tasks/tasks.controller.spec.ts:13:35)

  ÔùÅ TasksController ÔÇ║ create ÔÇ║ should create a task

    Nest can't resolve dependencies of the CreateTaskGuard (Reflector, ?). Please make sure that the argument PrismaService at index [1] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If PrismaService is a provider, is it part of the current RootTestModule?
    - If PrismaService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing PrismaService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      11 |
      12 |   beforeEach(async () => {
    > 13 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      14 |       controllers: [TasksController],
      15 |       providers: [
      16 |         {

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../../../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../../../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadInjectable (../../../node_modules/@nestjs/core/injector/injector.js:99:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:80:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstancesOfInjectables (../../../node_modules/@nestjs/core/injector/instance-loader.js:79:9)
      at ../../../node_modules/@nestjs/core/injector/instance-loader.js:41:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../../../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (tasks/tasks.controller.spec.ts:13:35)

FAIL attachments/attachments.controller.spec.ts (5.665 s)
  ÔùÅ AttachmentsController ÔÇ║ upload ÔÇ║ should upload file and create attachment

    TypeError: controller.upload is not a function

      53 |       attachmentsService.create.mockResolvedValue(mockAttachment as any);
      54 |
    > 55 |       const result = await controller.upload(taskId, mockFile, mockUser);
         |                                       ^
      56 |
      57 |       expect(attachmentsService.create).toHaveBeenCalledWith(
      58 |         taskId,

      at Object.<anonymous> (attachments/attachments.controller.spec.ts:55:39)

  ÔùÅ AttachmentsController ÔÇ║ findByTask ÔÇ║ should return attachments for task

    TypeError: controller.findByTask is not a function

      72 |       attachmentsService.findByTask.mockResolvedValue(mockAttachments as any);
      73 |
    > 74 |       const result = await controller.findByTask('task-123', mockUser);
         |                                       ^
      75 |
      76 |       expect(attachmentsService.findByTask).toHaveBeenCalledWith(
      77 |         'task-123',

      at Object.<anonymous> (attachments/attachments.controller.spec.ts:74:39)

  ÔùÅ AttachmentsController ÔÇ║ findOne ÔÇ║ should return attachment by id

    TypeError: controller.findOne is not a function

      87 |       attachmentsService.findById.mockResolvedValue(mockAttachment as any);
      88 |
    > 89 |       const result = await controller.findOne('att-123', mockUser);
         |                                       ^
      90 |
      91 |       expect(attachmentsService.findById).toHaveBeenCalledWith(
      92 |         'att-123',

      at Object.<anonymous> (attachments/attachments.controller.spec.ts:89:39)

  ÔùÅ AttachmentsController ÔÇ║ remove ÔÇ║ should delete attachment

    TypeError: this.attachmentsService.remove is not a function

      115 |   @HttpCode(HttpStatus.NO_CONTENT)
      116 |   remove(@Param('id') id: string, @CurrentUser() user: RequestUser) {
    > 117 |     return this.attachmentsService.remove(id, user.id);
          |                                    ^
      118 |   }
      119 | }
      120 |

      at AttachmentsController.remove (attachments/attachments.controller.ts:117:36)
      at Object.<anonymous> (attachments/attachments.controller.spec.ts:103:24)

  ÔùÅ AttachmentsController ÔÇ║ download ÔÇ║ should return download URL

    TypeError: controller.download is not a function

      115 |       attachmentsService.getDownloadUrl.mockResolvedValue(mockUrl);
      116 |
    > 117 |       const result = await controller.download('att-123', mockUser);
          |                                       ^
      118 |
      119 |       expect(attachmentsService.getDownloadUrl).toHaveBeenCalledWith(
      120 |         'att-123',

      at Object.<anonymous> (attachments/attachments.controller.spec.ts:117:39)

FAIL common/guards/jwt-auth.guard.spec.ts
  ÔùÅ Test suite failed to run

    Jest worker encountered 4 child process exceptions, exceeding retry limit

      at ChildProcessWorker.initialize (../../../node_modules/jest-worker/build/index.js:805:21)


Test Suites: 8 failed, 17 passed, 25 total
Tests:       43 failed, 144 passed, 187 total
Snapshots:   0 total
Time:        12.583 s
Ran all test suites.
npm error Lifecycle script `test` failed with error:
npm error code 1
npm error path C:\Users\tfurt\source\repos\ordo-todo\apps\backend
npm error workspace @ordo-todo/backend@1.0.0
npm error location C:\Users\tfurt\source\repos\ordo-todo\apps\backend
npm error command failed
npm error command C:\WINDOWS\system32\cmd.exe /d /s /c jest
