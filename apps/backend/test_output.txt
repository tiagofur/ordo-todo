
> @ordo-todo/backend@1.0.0 test:e2e
> jest --config ./test/jest-e2e.json collaboration

FAIL test/collaboration.e2e-spec.ts
  ÔùÅ Collaboration API (e2e) ÔÇ║ Comments Flow ÔÇ║ User B should be able to comment on the task

    TypeError: request is not a function

      33 |
      34 |         // Create User A
    > 35 |         const registerResponseA = await request(app.getHttpServer())
         |                                         ^
      36 |             .post('/auth/register')
      37 |             .send({
      38 |                 email: `userA-${Date.now()}@example.com`,

      at Object.<anonymous> (collaboration.e2e-spec.ts:35:41)

  ÔùÅ Collaboration API (e2e) ÔÇ║ Comments Flow ÔÇ║ User A should receive a notification about User B's comment

    TypeError: request is not a function

      33 |
      34 |         // Create User A
    > 35 |         const registerResponseA = await request(app.getHttpServer())
         |                                         ^
      36 |             .post('/auth/register')
      37 |             .send({
      38 |                 email: `userA-${Date.now()}@example.com`,

      at Object.<anonymous> (collaboration.e2e-spec.ts:35:41)

  ÔùÅ Collaboration API (e2e) ÔÇ║ Comments Flow ÔÇ║ User A should be able to reply (comment)

    TypeError: request is not a function

      33 |
      34 |         // Create User A
    > 35 |         const registerResponseA = await request(app.getHttpServer())
         |                                         ^
      36 |             .post('/auth/register')
      37 |             .send({
      38 |                 email: `userA-${Date.now()}@example.com`,

      at Object.<anonymous> (collaboration.e2e-spec.ts:35:41)

  ÔùÅ Collaboration API (e2e) ÔÇ║ Comments Flow ÔÇ║ User B should receive a notification about User A's comment

    TypeError: request is not a function

      33 |
      34 |         // Create User A
    > 35 |         const registerResponseA = await request(app.getHttpServer())
         |                                         ^
      36 |             .post('/auth/register')
      37 |             .send({
      38 |                 email: `userA-${Date.now()}@example.com`,

      at Object.<anonymous> (collaboration.e2e-spec.ts:35:41)

  ÔùÅ Collaboration API (e2e) ÔÇ║ Comments Flow ÔÇ║ User A should be able to mention User B

    TypeError: request is not a function

      33 |
      34 |         // Create User A
    > 35 |         const registerResponseA = await request(app.getHttpServer())
         |                                         ^
      36 |             .post('/auth/register')
      37 |             .send({
      38 |                 email: `userA-${Date.now()}@example.com`,

      at Object.<anonymous> (collaboration.e2e-spec.ts:35:41)

  ÔùÅ Collaboration API (e2e) ÔÇ║ Notifications Flow ÔÇ║ User A should be able to mark all notifications as read

    TypeError: request is not a function

      33 |
      34 |         // Create User A
    > 35 |         const registerResponseA = await request(app.getHttpServer())
         |                                         ^
      36 |             .post('/auth/register')
      37 |             .send({
      38 |                 email: `userA-${Date.now()}@example.com`,

      at Object.<anonymous> (collaboration.e2e-spec.ts:35:41)


  ÔùÅ Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.comment.deleteMany()` invocation in
    C:\Users\tfurt\source\repos\ordo-todo\apps\backend\test\collaboration.e2e-spec.ts:99:30

      96 
      97 afterAll(async () => {
      98     // Cleanup
    ÔåÆ 99     await prisma.comment.deleteMany(

       97 |     afterAll(async () => {
       98 |         // Cleanup
    >  99 |         await prisma.comment.deleteMany({ where: { taskId } });
          |         ^
      100 |         await prisma.notification.deleteMany({ where: { OR: [{ userId: userAId }, { userId: userBId }] } });
      101 |         await prisma.task.deleteMany({ where: { id: taskId } });
      102 |         await prisma.project.deleteMany({ where: { id: projectId } });

      at $r.handleRequestError (../../../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at $r.handleAndLogRequestError (../../../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at $r.request (../../../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (../../../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:766:24)
      at Object.<anonymous> (collaboration.e2e-spec.ts:99:9)

Test Suites: 1 failed, 1 total
Tests:       6 failed, 6 total
Snapshots:   0 total
Time:        2.069 s
Ran all test suites matching collaboration.
npm error Lifecycle script `test:e2e` failed with error:
npm error code 1
npm error path C:\Users\tfurt\source\repos\ordo-todo\apps\backend
npm error workspace @ordo-todo/backend@1.0.0
npm error location C:\Users\tfurt\source\repos\ordo-todo\apps\backend
npm error command failed
npm error command C:\WINDOWS\system32\cmd.exe /d /s /c jest --config ./test/jest-e2e.json collaboration
