<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desktop App - Ordo-Todo Documentation</title>
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>ğŸ’» Desktop App</h1>
            <p>Electron - Windows, macOS & Linux</p>
        </div>
    </header>

    <nav>
        <div class="container">
            <ul>
                <li><a href="../index.html">ğŸ  Inicio</a></li>
                <li><a href="../core/index.html">ğŸ“¦ Core</a></li>
                <li><a href="../web/index.html">ğŸŒ Web</a></li>
                <li><a href="../mobile/index.html">ğŸ“± Mobile</a></li>
                <li><a href="index.html" class="active">ğŸ’» Desktop</a></li>
                <li><a href="../backend/index.html">âš™ï¸ Backend</a></li>
            </ul>
        </div>
    </nav>

    <main>
        <div class="container">
            <!-- Overview -->
            <section class="section">
                <h2>ğŸ“– DescripciÃ³n General</h2>
                <p>La aplicaciÃ³n de escritorio de Ordo-Todo estÃ¡ construida con <strong>Electron</strong>, permitiendo ejecutar la misma aplicaciÃ³n web en Windows, macOS y Linux con caracterÃ­sticas nativas del sistema operativo.</p>
                
                <div class="card" style="background: #F59E0B20; border-color: #F59E0B;">
                    <h3>âš ï¸ Estado Actual</h3>
                    <p><span class="badge warning">En Desarrollo</span></p>
                    <p>La app de escritorio estÃ¡ en fase de desarrollo activo. Puede reutilizar todo el cÃ³digo de la Web App y el Core Package.</p>
                </div>

                <h3>ğŸ› ï¸ Stack TecnolÃ³gico</h3>
                <ul style="margin-left: 2rem; color: var(--text-muted);">
                    <li>âš¡ <strong>Electron</strong> - Framework para apps de escritorio</li>
                    <li>âš›ï¸ <strong>React</strong> - UI framework</li>
                    <li>ğŸ“˜ <strong>TypeScript</strong> - Type safety completo</li>
                    <li>ğŸ¨ <strong>Tailwind CSS</strong> - Estilos</li>
                    <li>âš™ï¸ <strong>Electron Builder</strong> - Empaquetado y distribuciÃ³n</li>
                    <li>ğŸ“¦ <strong>@ordo-todo/core</strong> - LÃ³gica de negocio compartida</li>
                </ul>

                <h3>âœ¨ Ventajas sobre la Web App</h3>
                <ul style="margin-left: 2rem; color: var(--text-muted);">
                    <li>âœ… Acceso al sistema de archivos</li>
                    <li>âœ… Notificaciones nativas del SO</li>
                    <li>âœ… Tray icon con quick actions</li>
                    <li>âœ… Atajos de teclado globales</li>
                    <li>âœ… Auto-actualizaciÃ³n</li>
                    <li>âœ… Mejor integraciÃ³n con el SO</li>
                </ul>
            </section>

            <!-- Project Structure -->
            <section class="section">
                <h2>ğŸ“ Estructura del Proyecto</h2>
                <pre><code>apps/desktop/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/                # Proceso principal de Electron
â”‚   â”‚   â”œâ”€â”€ index.ts        # Entry point
â”‚   â”‚   â”œâ”€â”€ window.ts       # GestiÃ³n de ventanas
â”‚   â”‚   â”œâ”€â”€ tray.ts         # Tray icon
â”‚   â”‚   â””â”€â”€ ipc.ts          # IPC handlers
â”‚   â”œâ”€â”€ renderer/            # Proceso renderer (React)
â”‚   â”‚   â”œâ”€â”€ App.tsx         # Componente principal
â”‚   â”‚   â”œâ”€â”€ components/     # Componentes React
â”‚   â”‚   â”œâ”€â”€ hooks/          # Custom hooks
â”‚   â”‚   â””â”€â”€ pages/          # PÃ¡ginas/vistas
â”‚   â””â”€â”€ preload/            # Preload scripts
â”‚       â””â”€â”€ index.ts        # API expuesta al renderer
â”œâ”€â”€ electron-builder.yml    # ConfiguraciÃ³n de build
â””â”€â”€ package.json</code></pre>
            </section>

            <!-- Getting Started -->
            <section class="section">
                <h2>ğŸš€ Inicio RÃ¡pido</h2>
                
                <h3>1. InstalaciÃ³n</h3>
                <pre><code>cd apps/desktop
npm install</code></pre>

                <h3>2. Configurar Variables de Entorno</h3>
                <pre><code># .env
API_URL=http://localhost:3001</code></pre>

                <h3>3. Ejecutar en Desarrollo</h3>
                <pre><code>npm run dev</code></pre>

                <h3>4. Build de ProducciÃ³n</h3>
                <pre><code># Build para el SO actual
npm run build

# Build para Windows
npm run build:win

# Build para macOS
npm run build:mac

# Build para Linux
npm run build:linux</code></pre>
            </section>

            <!-- Features -->
            <section class="section">
                <h2>âœ¨ CaracterÃ­sticas Planificadas</h2>
                
                <div class="cards-grid">
                    <div class="card">
                        <h3>ğŸ”” Tray Icon</h3>
                        <p>Icono en la bandeja del sistema con quick actions y estado del timer</p>
                        <span class="badge warning">Pendiente</span>
                    </div>
                    <div class="card">
                        <h3>âŒ¨ï¸ Atajos Globales</h3>
                        <p>Atajos de teclado que funcionan incluso cuando la app estÃ¡ minimizada</p>
                        <span class="badge warning">Pendiente</span>
                    </div>
                    <div class="card">
                        <h3>ğŸ”” Notificaciones Nativas</h3>
                        <p>Notificaciones del sistema operativo para timer y recordatorios</p>
                        <span class="badge warning">Pendiente</span>
                    </div>
                    <div class="card">
                        <h3>ğŸ”„ Auto-actualizaciÃ³n</h3>
                        <p>Actualizaciones automÃ¡ticas en segundo plano</p>
                        <span class="badge warning">Pendiente</span>
                    </div>
                    <div class="card">
                        <h3>ğŸ“ Exportar/Importar</h3>
                        <p>Exportar tareas a archivos locales (JSON, CSV)</p>
                        <span class="badge warning">Pendiente</span>
                    </div>
                    <div class="card">
                        <h3>ğŸ¨ Temas Personalizados</h3>
                        <p>Soporte para temas del sistema operativo</p>
                        <span class="badge warning">Pendiente</span>
                    </div>
                </div>
            </section>

            <!-- Using Core Package -->
            <section class="section">
                <h2>ğŸ“¦ Usando el Core Package</h2>
                <p>La app de escritorio puede aprovechar <strong>todo el cÃ³digo del Core Package y de la Web App</strong>:</p>

                <h3>âœ… Reutilizar Componentes de Web</h3>
                <pre><code>// Importar componentes directamente de la Web App
import { TaskCard, TaskList } from '@web/components/task';
import { PomodoroTimer } from '@web/components/timer';

// Usar en la app de escritorio
function DesktopApp() {
  return (
    &lt;div&gt;
      &lt;PomodoroTimer /&gt;
      &lt;TaskList /&gt;
    &lt;/div&gt;
  );
}</code></pre>

                <h3>âœ… Usar Core Package</h3>
                <pre><code>import {
  createTaskSchema,
  PROJECT_COLORS,
  formatDate,
  calculateProgress,
} from '@ordo-todo/core';

// Misma lÃ³gica que en Web y Mobile!</code></pre>
            </section>

            <!-- Electron Features -->
            <section class="section">
                <h2>âš¡ CaracterÃ­sticas de Electron</h2>
                
                <h3>ğŸ”” Tray Icon con MenÃº</h3>
                <pre><code>// src/main/tray.ts
import { Tray, Menu } from 'electron';

export function createTray() {
  const tray = new Tray('path/to/icon.png');
  
  const contextMenu = Menu.buildFromTemplate([
    { label: 'Mostrar', click: () => showWindow() },
    { label: 'Iniciar Timer', click: () => startTimer() },
    { label: 'Pausar Timer', click: () => pauseTimer() },
    { type: 'separator' },
    { label: 'Salir', click: () => app.quit() }
  ]);
  
  tray.setContextMenu(contextMenu);
  tray.setToolTip('Ordo-Todo - Timer: 25:00');
  
  return tray;
}</code></pre>

                <h3>âŒ¨ï¸ Atajos de Teclado Globales</h3>
                <pre><code>// src/main/shortcuts.ts
import { globalShortcut } from 'electron';

export function registerShortcuts() {
  // Mostrar/ocultar ventana
  globalShortcut.register('CommandOrControl+Shift+O', () => {
    toggleWindow();
  });
  
  // Iniciar/pausar timer
  globalShortcut.register('CommandOrControl+Shift+Space', () => {
    toggleTimer();
  });
  
  // Crear tarea rÃ¡pida
  globalShortcut.register('CommandOrControl+Shift+N', () => {
    showQuickTaskDialog();
  });
}</code></pre>

                <h3>ğŸ”” Notificaciones Nativas</h3>
                <pre><code>// src/main/notifications.ts
import { Notification } from 'electron';

export function showNotification(title: string, body: string) {
  new Notification({
    title,
    body,
    icon: 'path/to/icon.png',
    sound: true,
  }).show();
}

// Usar cuando el timer termina
showNotification(
  'Pomodoro Completado!',
  'Tiempo de tomar un descanso de 5 minutos'
);</code></pre>

                <h3>ğŸ“ Acceso al Sistema de Archivos</h3>
                <pre><code>// src/main/file-system.ts
import { dialog } from 'electron';
import fs from 'fs';

export async function exportTasks(tasks) {
  const { filePath } = await dialog.showSaveDialog({
    title: 'Exportar Tareas',
    defaultPath: 'tasks.json',
    filters: [
      { name: 'JSON', extensions: ['json'] },
      { name: 'CSV', extensions: ['csv'] }
    ]
  });
  
  if (filePath) {
    fs.writeFileSync(filePath, JSON.stringify(tasks, null, 2));
  }
}</code></pre>

                <h3>ğŸ”„ Auto-actualizaciÃ³n</h3>
                <pre><code>// src/main/updater.ts
import { autoUpdater } from 'electron-updater';

export function setupAutoUpdater() {
  // Verificar actualizaciones al iniciar
  autoUpdater.checkForUpdatesAndNotify();
  
  // Verificar cada 4 horas
  setInterval(() => {
    autoUpdater.checkForUpdatesAndNotify();
  }, 4 * 60 * 60 * 1000);
  
  autoUpdater.on('update-downloaded', () => {
    showNotification(
      'ActualizaciÃ³n Disponible',
      'Se instalarÃ¡ al reiniciar la aplicaciÃ³n'
    );
  });
}</code></pre>
            </section>

            <!-- IPC Communication -->
            <section class="section">
                <h2>ğŸ”Œ ComunicaciÃ³n IPC</h2>
                <p>Electron usa IPC (Inter-Process Communication) para comunicar el proceso principal con el renderer.</p>

                <h3>Main Process (Backend)</h3>
                <pre><code>// src/main/ipc.ts
import { ipcMain } from 'electron';

// Registrar handlers
ipcMain.handle('timer:start', async () => {
  // Iniciar timer
  return { success: true };
});

ipcMain.handle('timer:pause', async () => {
  // Pausar timer
  return { success: true };
});

ipcMain.handle('tasks:export', async (event, tasks) => {
  return await exportTasks(tasks);
});</code></pre>

                <h3>Preload Script (Bridge)</h3>
                <pre><code>// src/preload/index.ts
import { contextBridge, ipcRenderer } from 'electron';

contextBridge.exposeInMainWorld('electron', {
  timer: {
    start: () => ipcRenderer.invoke('timer:start'),
    pause: () => ipcRenderer.invoke('timer:pause'),
  },
  tasks: {
    export: (tasks) => ipcRenderer.invoke('tasks:export', tasks),
  },
});</code></pre>

                <h3>Renderer Process (Frontend)</h3>
                <pre><code>// src/renderer/hooks/useElectron.ts
declare global {
  interface Window {
    electron: {
      timer: {
        start: () => Promise&lt;any&gt;;
        pause: () => Promise&lt;any&gt;;
      };
      tasks: {
        export: (tasks: any[]) => Promise&lt;void&gt;;
      };
    };
  }
}

export function useElectron() {
  return window.electron;
}

// Usar en componentes
function TimerControls() {
  const electron = useElectron();
  
  const handleStart = async () => {
    await electron.timer.start();
  };
  
  return &lt;button onClick={handleStart}&gt;Start&lt;/button&gt;;
}</code></pre>
            </section>

            <!-- Best Practices -->
            <section class="section">
                <h2>ğŸ’¡ Mejores PrÃ¡cticas</h2>
                
                <h3>1. Seguridad</h3>
                <pre><code>// âœ… Usar contextBridge en preload
contextBridge.exposeInMainWorld('api', { ... });

// âœ… Deshabilitar nodeIntegration
webPreferences: {
  nodeIntegration: false,
  contextIsolation: true,
  preload: path.join(__dirname, 'preload.js')
}</code></pre>

                <h3>2. Performance</h3>
                <pre><code>// âœ… Lazy load de ventanas
let settingsWindow = null;

function showSettings() {
  if (!settingsWindow) {
    settingsWindow = new BrowserWindow({ ... });
  }
  settingsWindow.show();
}

// âœ… Usar IPC asÃ­ncrono
ipcMain.handle('heavy-task', async () => {
  return await performHeavyTask();
});</code></pre>

                <h3>3. Reutilizar CÃ³digo</h3>
                <pre><code>// âœ… Importar de la Web App
import { TaskList } from '@web/components/task';

// âœ… Usar Core Package
import { createTaskSchema } from '@ordo-todo/core';

// âœ… Compartir API client
import { apiClient } from '@ordo-todo/api-client';</code></pre>
            </section>

            <!-- Roadmap -->
            <section class="section">
                <h2>ğŸ—ºï¸ Roadmap</h2>
                
                <h3>Fase 1: MVP (3-4 semanas)</h3>
                <ul style="margin-left: 2rem; color: var(--text-muted);">
                    <li>âœ… Estructura base del proyecto</li>
                    <li>â³ Ventana principal con la Web App embebida</li>
                    <li>â³ Tray icon bÃ¡sico</li>
                    <li>â³ Notificaciones nativas</li>
                    <li>â³ Atajos de teclado globales</li>
                </ul>

                <h3>Fase 2: CaracterÃ­sticas Avanzadas (3-4 semanas)</h3>
                <ul style="margin-left: 2rem; color: var(--text-muted);">
                    <li>â³ Auto-actualizaciÃ³n</li>
                    <li>â³ Exportar/importar datos</li>
                    <li>â³ IntegraciÃ³n con sistema operativo</li>
                    <li>â³ ConfiguraciÃ³n avanzada</li>
                </ul>

                <h3>Fase 3: DistribuciÃ³n (2 semanas)</h3>
                <ul style="margin-left: 2rem; color: var(--text-muted);">
                    <li>â³ Firma de cÃ³digo (Windows, macOS)</li>
                    <li>â³ Instaladores para cada plataforma</li>
                    <li>â³ PublicaciÃ³n en Microsoft Store / Mac App Store</li>
                    <li>â³ DocumentaciÃ³n de instalaciÃ³n</li>
                </ul>
            </section>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 Ordo-Todo. DocumentaciÃ³n de la Desktop App.</p>
        </div>
    </footer>
</body>
</html>
