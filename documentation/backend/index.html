<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Backend API - Ordo-Todo Documentation</title>
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>âš™ï¸ Backend API</h1>
            <p>NestJS REST API - Clean Architecture</p>
        </div>
    </header>

    <nav>
        <div class="container">
            <ul>
                <li><a href="../index.html">ğŸ  Inicio</a></li>
                <li><a href="../core/index.html">ğŸ“¦ Core</a></li>
                <li><a href="../web/index.html">ğŸŒ Web</a></li>
                <li><a href="../mobile/index.html">ğŸ“± Mobile</a></li>
                <li><a href="../desktop/index.html">ğŸ’» Desktop</a></li>
                <li><a href="index.html" class="active">âš™ï¸ Backend</a></li>
                <li><a href="../database/index.html">ğŸ—„ï¸ Database</a></li>
            </ul>
        </div>
    </nav>

    <main>
        <div class="container">
            <!-- Overview -->
            <section class="section">
                <h2>ğŸ“– DescripciÃ³n General</h2>
                <p>El Backend de Ordo-Todo es una API REST construida con <strong>NestJS</strong>, siguiendo los principios de <strong>Clean Architecture</strong> y <strong>Domain-Driven Design (DDD)</strong>.</p>
                
                <h3>ğŸ› ï¸ Stack TecnolÃ³gico</h3>
                <ul style="margin-left: 2rem; color: var(--text-muted);">
                    <li>ğŸš€ <strong>NestJS</strong> - Framework Node.js progresivo</li>
                    <li>ğŸ“˜ <strong>TypeScript</strong> - Type safety completo</li>
                    <li>ğŸ—„ï¸ <strong>Prisma</strong> - ORM type-safe</li>
                    <li>ğŸ˜ <strong>PostgreSQL</strong> - Base de datos relacional</li>
                    <li>ğŸ” <strong>Passport.js</strong> - AutenticaciÃ³n</li>
                    <li>âœ… <strong>class-validator</strong> - ValidaciÃ³n de DTOs</li>
                    <li>ğŸ“¦ <strong>@ordo-todo/core</strong> - LÃ³gica de negocio compartida</li>
                    <li>ğŸ”„ <strong>RxJS</strong> - ProgramaciÃ³n reactiva</li>
                </ul>

                <h3>âœ¨ CaracterÃ­sticas</h3>
                <ul style="margin-left: 2rem; color: var(--text-muted);">
                    <li>âœ… API REST completa</li>
                    <li>âœ… AutenticaciÃ³n JWT</li>
                    <li>âœ… AutorizaciÃ³n basada en roles</li>
                    <li>âœ… ValidaciÃ³n de requests</li>
                    <li>âœ… Manejo de errores centralizado</li>
                    <li>âœ… Logging estructurado</li>
                    <li>âœ… CORS configurado</li>
                    <li>âœ… Rate limiting</li>
                    <li>âœ… Swagger documentation</li>
                </ul>
            </section>

            <!-- Project Structure -->
            <section class="section">
                <h2>ğŸ“ Estructura del Proyecto</h2>
                <pre><code>apps/backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.ts                 # Entry point
â”‚   â”œâ”€â”€ app.module.ts           # MÃ³dulo raÃ­z
â”‚   â”‚
â”‚   â”œâ”€â”€ modules/                # MÃ³dulos de dominio
â”‚   â”‚   â”œâ”€â”€ auth/              # AutenticaciÃ³n
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.controller.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.module.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â”‚   â”œâ”€â”€ guards/
â”‚   â”‚   â”‚   â””â”€â”€ strategies/
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ users/             # Usuarios
â”‚   â”‚   â”œâ”€â”€ workspaces/        # Workspaces
â”‚   â”‚   â”œâ”€â”€ projects/          # Proyectos
â”‚   â”‚   â”œâ”€â”€ tasks/             # Tareas
â”‚   â”‚   â”œâ”€â”€ tags/              # Tags
â”‚   â”‚   â”œâ”€â”€ timer/             # Pomodoro Timer
â”‚   â”‚   â”œâ”€â”€ analytics/         # Analytics
â”‚   â”‚   â””â”€â”€ comments/          # Comentarios
â”‚   â”‚
â”‚   â”œâ”€â”€ common/                 # CÃ³digo compartido
â”‚   â”‚   â”œâ”€â”€ decorators/        # Decoradores custom
â”‚   â”‚   â”œâ”€â”€ filters/           # Exception filters
â”‚   â”‚   â”œâ”€â”€ guards/            # Guards globales
â”‚   â”‚   â”œâ”€â”€ interceptors/      # Interceptors
â”‚   â”‚   â”œâ”€â”€ pipes/             # Validation pipes
â”‚   â”‚   â””â”€â”€ middleware/        # Middleware
â”‚   â”‚
â”‚   â”œâ”€â”€ config/                 # ConfiguraciÃ³n
â”‚   â”‚   â”œâ”€â”€ database.config.ts
â”‚   â”‚   â”œâ”€â”€ auth.config.ts
â”‚   â”‚   â””â”€â”€ app.config.ts
â”‚   â”‚
â”‚   â””â”€â”€ repositories/           # Repositorios Prisma
â”‚       â”œâ”€â”€ users.repository.ts
â”‚       â”œâ”€â”€ tasks.repository.ts
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ prisma/                     # Prisma schema
â”‚   â”œâ”€â”€ schema.prisma
â”‚   â””â”€â”€ migrations/
â”‚
â””â”€â”€ test/                       # Tests E2E
    â””â”€â”€ app.e2e-spec.ts</code></pre>
            </section>

            <!-- Getting Started -->
            <section class="section">
                <h2>ğŸš€ Inicio RÃ¡pido</h2>
                
                <h3>1. InstalaciÃ³n</h3>
                <pre><code>cd apps/backend
npm install</code></pre>

                <h3>2. Variables de Entorno</h3>
                <pre><code># .env
DATABASE_URL="postgresql://user:password@localhost:5432/ordo_todo"
JWT_SECRET="tu-secret-super-seguro"
JWT_EXPIRES_IN="7d"

# OAuth (opcional)
GOOGLE_CLIENT_ID=...
GOOGLE_CLIENT_SECRET=...
GITHUB_CLIENT_ID=...
GITHUB_CLIENT_SECRET=...

# Redis (opcional)
REDIS_URL="redis://localhost:6379"</code></pre>

                <h3>3. Configurar Base de Datos</h3>
                <pre><code># Generar cliente Prisma
npx prisma generate

# Ejecutar migraciones
npx prisma migrate dev

# (Opcional) Seed de datos
npx prisma db seed</code></pre>

                <h3>4. Ejecutar en Desarrollo</h3>
                <pre><code>npm run start:dev</code></pre>
                <p>La API estarÃ¡ disponible en <code>http://localhost:3001</code></p>
                <p>Swagger docs en <code>http://localhost:3001/api</code></p>

                <h3>5. Build de ProducciÃ³n</h3>
                <pre><code>npm run build
npm run start:prod</code></pre>
            </section>

            <!-- Modules -->
            <section class="section">
                <h2>ğŸ“¦ MÃ³dulos Principales</h2>
                
                <div class="cards-grid">
                    <div class="card">
                        <h3>ğŸ” Auth</h3>
                        <p>AutenticaciÃ³n y autorizaciÃ³n con JWT y OAuth</p>
                        <code>/auth/login</code><br>
                        <code>/auth/register</code><br>
                        <code>/auth/google</code>
                    </div>
                    <div class="card">
                        <h3>ğŸ‘¤ Users</h3>
                        <p>GestiÃ³n de usuarios y perfiles</p>
                        <code>/users</code><br>
                        <code>/users/:id</code><br>
                        <code>/users/me</code>
                    </div>
                    <div class="card">
                        <h3>ğŸ¢ Workspaces</h3>
                        <p>Espacios de trabajo y miembros</p>
                        <code>/workspaces</code><br>
                        <code>/workspaces/:id/members</code><br>
                        <code>/workspaces/:id/invite</code>
                    </div>
                    <div class="card">
                        <h3>ğŸ“ Projects</h3>
                        <p>Proyectos y configuraciÃ³n</p>
                        <code>/projects</code><br>
                        <code>/projects/:id</code><br>
                        <code>/projects/:id/archive</code>
                    </div>
                    <div class="card">
                        <h3>ğŸ“‹ Tasks</h3>
                        <p>Tareas, subtareas y estados</p>
                        <code>/tasks</code><br>
                        <code>/tasks/:id</code><br>
                        <code>/tasks/:id/complete</code>
                    </div>
                    <div class="card">
                        <h3>ğŸ·ï¸ Tags</h3>
                        <p>Etiquetas y categorizaciÃ³n</p>
                        <code>/tags</code><br>
                        <code>/tags/:id</code><br>
                        <code>/tasks/:id/tags</code>
                    </div>
                    <div class="card">
                        <h3>â±ï¸ Timer</h3>
                        <p>Pomodoro timer y sesiones</p>
                        <code>/timer/sessions</code><br>
                        <code>/timer/stats</code><br>
                        <code>/timer/start</code>
                    </div>
                    <div class="card">
                        <h3>ğŸ“Š Analytics</h3>
                        <p>MÃ©tricas y productividad</p>
                        <code>/analytics/daily</code><br>
                        <code>/analytics/weekly</code><br>
                        <code>/analytics/productivity</code>
                    </div>
                </div>
            </section>

            <!-- API Examples -->
            <section class="section">
                <h2>ğŸ”Œ Ejemplos de API</h2>
                
                <h3>AutenticaciÃ³n</h3>
                <div class="function-card">
                    <h4>POST /auth/register</h4>
                    <div class="description">Registrar un nuevo usuario</div>
                    <div class="example">
                        <div class="example-title">Request:</div>
                        <pre><code>POST /auth/register
Content-Type: application/json

{
  "name": "Juan PÃ©rez",
  "email": "juan@example.com",
  "password": "password123"
}</code></pre>
                    </div>
                    <div class="example">
                        <div class="example-title">Response:</div>
                        <pre><code>{
  "user": {
    "id": "uuid",
    "name": "Juan PÃ©rez",
    "email": "juan@example.com"
  },
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}</code></pre>
                    </div>
                </div>

                <div class="function-card">
                    <h4>POST /auth/login</h4>
                    <div class="description">Iniciar sesiÃ³n</div>
                    <div class="example">
                        <div class="example-title">Request:</div>
                        <pre><code>POST /auth/login
Content-Type: application/json

{
  "email": "juan@example.com",
  "password": "password123"
}</code></pre>
                    </div>
                </div>

                <h3>Tareas</h3>
                <div class="function-card">
                    <h4>GET /tasks</h4>
                    <div class="description">Obtener todas las tareas (con filtros)</div>
                    <div class="example">
                        <div class="example-title">Request:</div>
                        <pre><code>GET /tasks?projectId=uuid&status=TODO&priority=HIGH
Authorization: Bearer {token}</code></pre>
                    </div>
                    <div class="example">
                        <div class="example-title">Response:</div>
                        <pre><code>{
  "tasks": [
    {
      "id": "uuid",
      "title": "Implementar feature X",
      "description": "...",
      "status": "TODO",
      "priority": "HIGH",
      "projectId": "uuid",
      "createdAt": "2025-12-04T10:00:00Z"
    }
  ],
  "total": 1
}</code></pre>
                    </div>
                </div>

                <div class="function-card">
                    <h4>POST /tasks</h4>
                    <div class="description">Crear una nueva tarea</div>
                    <div class="example">
                        <div class="example-title">Request:</div>
                        <pre><code>POST /tasks
Authorization: Bearer {token}
Content-Type: application/json

{
  "title": "Nueva tarea",
  "description": "DescripciÃ³n de la tarea",
  "priority": "MEDIUM",
  "projectId": "uuid",
  "dueDate": "2025-12-10T00:00:00Z"
}</code></pre>
                    </div>
                </div>

                <h3>Analytics</h3>
                <div class="function-card">
                    <h4>GET /analytics/daily</h4>
                    <div class="description">Obtener mÃ©tricas del dÃ­a</div>
                    <div class="example">
                        <div class="example-title">Request:</div>
                        <pre><code>GET /analytics/daily?date=2025-12-04
Authorization: Bearer {token}</code></pre>
                    </div>
                    <div class="example">
                        <div class="example-title">Response:</div>
                        <pre><code>{
  "date": "2025-12-04",
  "completedTasks": 5,
  "totalMinutesWorked": 180,
  "completedPomodoros": 7,
  "productivityScore": 85
}</code></pre>
                    </div>
                </div>
            </section>

            <!-- Using Core Package -->
            <section class="section">
                <h2>ğŸ“¦ Usando el Core Package</h2>
                
                <h3>ValidaciÃ³n con Zod</h3>
                <pre><code>import { createTaskSchema } from '@ordo-todo/core';
import { BadRequestException } from '@nestjs/common';

@Post()
async create(@Body() body: unknown) {
  // Validar con Zod del Core
  const result = createTaskSchema.safeParse(body);
  
  if (!result.success) {
    throw new BadRequestException(result.error.flatten());
  }
  
  return this.tasksService.create(result.data);
}</code></pre>

                <h3>Crear un Pipe de ValidaciÃ³n Global</h3>
                <pre><code>// src/common/pipes/zod-validation.pipe.ts
import { PipeTransform, BadRequestException } from '@nestjs/common';
import { ZodSchema } from 'zod';

export class ZodValidationPipe implements PipeTransform {
  constructor(private schema: ZodSchema) {}

  transform(value: unknown) {
    const result = this.schema.safeParse(value);
    
    if (!result.success) {
      throw new BadRequestException({
        message: 'Validation failed',
        errors: result.error.flatten(),
      });
    }
    
    return result.data;
  }
}

// Usar en controllers
import { createTaskSchema } from '@ordo-todo/core';

@Post()
async create(
  @Body(new ZodValidationPipe(createTaskSchema)) createTaskDto
) {
  return this.tasksService.create(createTaskDto);
}</code></pre>

                <h3>Usar Constantes del Core</h3>
                <pre><code>import { TASK_LIMITS, TASK_STATUS } from '@ordo-todo/core';

@Injectable()
export class TasksService {
  async create(data: CreateTaskDto) {
    // Validar lÃ­mites
    if (data.title.length > TASK_LIMITS.TITLE_MAX_LENGTH) {
      throw new BadRequestException('Title too long');
    }
    
    // Usar estados del Core
    const task = await this.prisma.task.create({
      data: {
        ...data,
        status: TASK_STATUS.TODO.value,
      },
    });
    
    return task;
  }
}</code></pre>

                <h3>Usar Utilidades del Core</h3>
                <pre><code>import { calculateProgress, formatDate } from '@ordo-todo/core';

@Injectable()
export class AnalyticsService {
  async getDailyStats(userId: string, date: Date) {
    const tasks = await this.getTasks(userId, date);
    const completed = tasks.filter(t => t.status === 'DONE').length;
    
    return {
      date: formatDate(date),
      completedTasks: completed,
      totalTasks: tasks.length,
      progress: calculateProgress(completed, tasks.length),
    };
  }
}</code></pre>
            </section>

            <!-- Architecture -->
            <section class="section">
                <h2>ğŸ—ï¸ Arquitectura</h2>
                
                <h3>Clean Architecture Layers</h3>
                <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Controllers (API)           â”‚  â† HTTP Layer
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Services (Use Cases)        â”‚  â† Application Layer
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    Repositories (Data Access)       â”‚  â† Infrastructure Layer
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Prisma Client (ORM)            â”‚  â† Data Layer
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         PostgreSQL                  â”‚  â† Database
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

         â†‘ Dependency Flow â†‘
    (Inner layers don't know about outer layers)</code></pre>

                <h3>Flujo de una Request</h3>
                <pre><code>1. Client â†’ HTTP Request
2. Controller â†’ Recibe request, valida con Pipe
3. Guard â†’ Verifica autenticaciÃ³n y autorizaciÃ³n
4. Service â†’ Ejecuta lÃ³gica de negocio
5. Repository â†’ Accede a la base de datos
6. Prisma â†’ Ejecuta query SQL
7. PostgreSQL â†’ Retorna datos
8. Service â†’ Procesa y formatea respuesta
9. Controller â†’ Retorna HTTP Response
10. Client â† Recibe respuesta</code></pre>
            </section>

            <!-- Guards and Middleware -->
            <section class="section">
                <h2>ğŸ›¡ï¸ Guards y Middleware</h2>
                
                <h3>JWT Auth Guard</h3>
                <pre><code>import { JwtAuthGuard } from '@/common/guards/jwt-auth.guard';

@Controller('tasks')
@UseGuards(JwtAuthGuard)  // Proteger todo el controller
export class TasksController {
  @Get()
  findAll(@Request() req) {
    const userId = req.user.id;
    return this.tasksService.findAll(userId);
  }
}</code></pre>

                <h3>Roles Guard</h3>
                <pre><code>import { Roles } from '@/common/decorators/roles.decorator';
import { RolesGuard } from '@/common/guards/roles.guard';

@Controller('workspaces')
@UseGuards(JwtAuthGuard, RolesGuard)
export class WorkspacesController {
  @Post(':id/members')
  @Roles('ADMIN', 'OWNER')  // Solo admins y owners
  async inviteMember(@Param('id') id: string, @Body() dto) {
    return this.workspacesService.inviteMember(id, dto);
  }
}</code></pre>

                <h3>Logging Interceptor</h3>
                <pre><code>@Injectable()
export class LoggingInterceptor implements NestInterceptor {
  intercept(context: ExecutionContext, next: CallHandler): Observable<any> {
    const request = context.switchToHttp().getRequest();
    const { method, url } = request;
    const now = Date.now();

    return next.handle().pipe(
      tap(() => {
        const responseTime = Date.now() - now;
        console.log(`${method} ${url} - ${responseTime}ms`);
      }),
    );
  }
}</code></pre>
            </section>

            <!-- Error Handling -->
            <section class="section">
                <h2>âš ï¸ Manejo de Errores</h2>
                
                <h3>Exception Filter Global</h3>
                <pre><code>@Catch()
export class AllExceptionsFilter implements ExceptionFilter {
  catch(exception: unknown, host: ArgumentsHost) {
    const ctx = host.switchToHttp();
    const response = ctx.getResponse();
    const request = ctx.getRequest();

    const status = exception instanceof HttpException
      ? exception.getStatus()
      : HttpStatus.INTERNAL_SERVER_ERROR;

    const message = exception instanceof HttpException
      ? exception.message
      : 'Internal server error';

    response.status(status).json({
      statusCode: status,
      timestamp: new Date().toISOString(),
      path: request.url,
      message,
    });
  }
}</code></pre>

                <h3>Custom Exceptions</h3>
                <pre><code>export class TaskNotFoundException extends NotFoundException {
  constructor(taskId: string) {
    super(`Task with ID ${taskId} not found`);
  }
}

export class UnauthorizedWorkspaceException extends ForbiddenException {
  constructor() {
    super('You do not have access to this workspace');
  }
}

// Usar en services
throw new TaskNotFoundException(id);</code></pre>
            </section>

            <!-- Testing -->
            <section class="section">
                <h2>ğŸ§ª Testing</h2>
                
                <h3>Unit Tests</h3>
                <pre><code>describe('TasksService', () => {
  let service: TasksService;
  let prisma: PrismaService;

  beforeEach(async () => {
    const module = await Test.createTestingModule({
      providers: [TasksService, PrismaService],
    }).compile();

    service = module.get<TasksService>(TasksService);
    prisma = module.get<PrismaService>(PrismaService);
  });

  it('should create a task', async () => {
    const dto = { title: 'Test', projectId: 'uuid' };
    const result = await service.create(dto);
    
    expect(result).toBeDefined();
    expect(result.title).toBe('Test');
  });
});</code></pre>

                <h3>E2E Tests</h3>
                <pre><code>describe('Tasks (e2e)', () => {
  let app: INestApplication;
  let token: string;

  beforeAll(async () => {
    const moduleFixture = await Test.createTestingModule({
      imports: [AppModule],
    }).compile();

    app = moduleFixture.createNestApplication();
    await app.init();

    // Login to get token
    const response = await request(app.getHttpServer())
      .post('/auth/login')
      .send({ email: 'test@test.com', password: 'password' });
    
    token = response.body.access_token;
  });

  it('/tasks (POST)', () => {
    return request(app.getHttpServer())
      .post('/tasks')
      .set('Authorization', `Bearer ${token}`)
      .send({ title: 'Test Task', projectId: 'uuid' })
      .expect(201);
  });
});</code></pre>
            </section>

            <!-- Best Practices -->
            <section class="section">
                <h2>ğŸ’¡ Mejores PrÃ¡cticas</h2>
                
                <h3>1. Usar DTOs con ValidaciÃ³n</h3>
                <pre><code>// âœ… Usar schemas del Core
import { createTaskSchema } from '@ordo-todo/core';

// âœ… O crear DTOs con class-validator
export class CreateTaskDto {
  @IsString()
  @IsNotEmpty()
  title: string;

  @IsOptional()
  @IsString()
  description?: string;

  @IsEnum(['LOW', 'MEDIUM', 'HIGH'])
  priority: string;
}</code></pre>

                <h3>2. InyecciÃ³n de Dependencias</h3>
                <pre><code>// âœ… Usar constructor injection
@Injectable()
export class TasksService {
  constructor(
    private prisma: PrismaService,
    private analyticsService: AnalyticsService,
  ) {}
}</code></pre>

                <h3>3. Manejo de Transacciones</h3>
                <pre><code>// âœ… Usar transacciones para operaciones mÃºltiples
async createTaskWithTags(data: CreateTaskDto, tagIds: string[]) {
  return this.prisma.$transaction(async (tx) => {
    const task = await tx.task.create({ data });
    
    await tx.taskTag.createMany({
      data: tagIds.map(tagId => ({ taskId: task.id, tagId })),
    });
    
    return task;
  });
}</code></pre>

                <h3>4. Logging Estructurado</h3>
                <pre><code>// âœ… Usar Logger de NestJS
@Injectable()
export class TasksService {
  private readonly logger = new Logger(TasksService.name);

  async create(data: CreateTaskDto) {
    this.logger.log(`Creating task: ${data.title}`);
    // ...
  }
}</code></pre>
            </section>

            <!-- Deployment -->
            <section class="section">
                <h2>ğŸš€ Deployment</h2>
                
                <h3>Docker</h3>
                <pre><code># Dockerfile
FROM node:18-alpine

WORKDIR /app

COPY package*.json ./
RUN npm ci --only=production

COPY . .
RUN npx prisma generate
RUN npm run build

EXPOSE 3001

CMD ["npm", "run", "start:prod"]</code></pre>

                <h3>Docker Compose</h3>
                <pre><code># docker-compose.yml
version: '3.8'

services:
  backend:
    build: .
    ports:
      - "3001:3001"
    environment:
      DATABASE_URL: postgresql://postgres:postgres@db:5432/ordo_todo
      JWT_SECRET: ${JWT_SECRET}
    depends_on:
      - db

  db:
    image: postgres:16
    environment:
      POSTGRES_PASSWORD: postgres
      POSTGRES_DB: ordo_todo
    volumes:
      - postgres_data:/var/lib/postgresql/data

volumes:
  postgres_data:</code></pre>
            </section>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 Ordo-Todo. DocumentaciÃ³n del Backend API.</p>
        </div>
    </footer>
</body>
</html>
