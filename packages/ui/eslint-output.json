[{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\.storybook\\main.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\.storybook\\preview.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ai\\generate-report-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ai\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ai\\report-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\analytics\\ai-weekly-report.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\analytics\\daily-metrics-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\analytics\\distribution-charts.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\analytics\\focus-score-gauge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\analytics\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\analytics\\peak-hours-chart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\analytics\\productivity-insights.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\analytics\\weekly-chart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\auth\\auth-form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\auth\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\auth\\username-input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\dashboard\\active-projects-widget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\dashboard\\ai-insights-widget.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'viewAll' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":89,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":89,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\r\n  Sparkles,\r\n  X,\r\n  ChevronRight,\r\n  Lightbulb,\r\n  Clock,\r\n  Target,\r\n  TrendingUp,\r\n  Coffee,\r\n  AlertTriangle,\r\n  PartyPopper,\r\n  Zap,\r\n  Heart,\r\n  RefreshCw,\r\n} from 'lucide-react';\r\nimport { Button } from '../ui/button.js';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/card.js';\r\nimport { cn } from '../../utils/index.js';\r\n\r\nexport interface Insight {\r\n  type:\r\n    | 'PRODUCTIVITY_PEAK'\r\n    | 'UPCOMING_DEADLINES'\r\n    | 'SUGGESTED_BREAKS'\r\n    | 'COMPLETION_CELEBRATION'\r\n    | 'WORKLOAD_IMBALANCE'\r\n    | 'ENERGY_OPTIMIZATION'\r\n    | 'REST_SUGGESTION'\r\n    | 'ACHIEVEMENT_CELEBRATION';\r\n  message: string;\r\n  priority: 'LOW' | 'MEDIUM' | 'HIGH';\r\n  actionLabel?: string;\r\n  actionUrl?: string;\r\n  data?: Record<string, unknown>;\r\n}\r\n\r\nconst INSIGHT_ICONS: Record<string, React.ElementType> = {\r\n  PRODUCTIVITY_PEAK: Clock,\r\n  UPCOMING_DEADLINES: AlertTriangle,\r\n  SUGGESTED_BREAKS: Coffee,\r\n  COMPLETION_CELEBRATION: PartyPopper,\r\n  WORKLOAD_IMBALANCE: TrendingUp,\r\n  ENERGY_OPTIMIZATION: Zap,\r\n  REST_SUGGESTION: Heart,\r\n  ACHIEVEMENT_CELEBRATION: Target,\r\n};\r\n\r\nconst INSIGHT_COLORS: Record<string, string> = {\r\n  PRODUCTIVITY_PEAK: 'text-blue-500 bg-blue-500/10',\r\n  UPCOMING_DEADLINES: 'text-orange-500 bg-orange-500/10',\r\n  SUGGESTED_BREAKS: 'text-green-500 bg-green-500/10',\r\n  COMPLETION_CELEBRATION: 'text-yellow-500 bg-yellow-500/10',\r\n  WORKLOAD_IMBALANCE: 'text-red-500 bg-red-500/10',\r\n  ENERGY_OPTIMIZATION: 'text-purple-500 bg-purple-500/10',\r\n  REST_SUGGESTION: 'text-pink-500 bg-pink-500/10',\r\n  ACHIEVEMENT_CELEBRATION: 'text-emerald-500 bg-emerald-500/10',\r\n};\r\n\r\ninterface AIInsightsWidgetProps {\r\n  insights: Insight[];\r\n  isLoading?: boolean;\r\n  isRefreshing?: boolean;\r\n  onRefresh?: () => void;\r\n  onDismiss?: (index: number) => void;\r\n  onAction?: (insight: Insight) => void;\r\n  className?: string;\r\n  labels?: {\r\n    title?: string;\r\n    emptyTitle?: string;\r\n    emptyDescription?: string;\r\n    viewAll?: string;\r\n  };\r\n}\r\n\r\nexport function AIInsightsWidget({\r\n  insights,\r\n  isLoading = false,\r\n  isRefreshing = false,\r\n  onRefresh,\r\n  onDismiss,\r\n  onAction,\r\n  className,\r\n  labels = {},\r\n}: AIInsightsWidgetProps) {\r\n  const {\r\n    title = 'AI Insights',\r\n    emptyTitle = 'No insights available',\r\n    emptyDescription = 'Keep working and AI will provide suggestions',\r\n    viewAll = 'View all insights',\r\n  } = labels;\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Card className={cn('relative overflow-hidden', className)}>\r\n        <CardHeader className=\"pb-2\">\r\n          <CardTitle className=\"flex items-center gap-2 text-base\">\r\n            <Sparkles className=\"h-4 w-4 text-primary\" />\r\n            {title}\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"space-y-3\">\r\n            {[1, 2].map((i) => (\r\n              <div key={i} className=\"flex gap-3 animate-pulse\">\r\n                <div className=\"h-10 w-10 rounded-lg bg-muted\" />\r\n                <div className=\"flex-1 space-y-2\">\r\n                  <div className=\"h-4 bg-muted rounded w-3/4\" />\r\n                  <div className=\"h-3 bg-muted rounded w-1/2\" />\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  if (insights.length === 0) {\r\n    return (\r\n      <Card className={cn('relative overflow-hidden', className)}>\r\n        <CardHeader className=\"pb-2\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <CardTitle className=\"flex items-center gap-2 text-base\">\r\n              <Sparkles className=\"h-4 w-4 text-primary\" />\r\n              {title}\r\n            </CardTitle>\r\n            {onRefresh && (\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                className=\"h-8 w-8\"\r\n                onClick={onRefresh}\r\n                disabled={isRefreshing}\r\n              >\r\n                <RefreshCw\r\n                  className={cn('h-4 w-4', isRefreshing && 'animate-spin')}\r\n                />\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"text-center py-4\">\r\n            <Lightbulb className=\"h-8 w-8 text-muted-foreground/50 mx-auto mb-2\" />\r\n            <p className=\"text-sm text-muted-foreground\">{emptyTitle}</p>\r\n            <p className=\"text-xs text-muted-foreground/70 mt-1\">\r\n              {emptyDescription}\r\n            </p>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Card className={cn('relative overflow-hidden', className)}>\r\n      {/* Gradient background accent */}\r\n      <div className=\"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-primary/5 to-transparent rounded-bl-full pointer-events-none\" />\r\n\r\n      <CardHeader className=\"pb-2\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <CardTitle className=\"flex items-center gap-2 text-base\">\r\n            <Sparkles className=\"h-4 w-4 text-primary\" />\r\n            {title}\r\n          </CardTitle>\r\n          {onRefresh && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"h-8 w-8\"\r\n              onClick={onRefresh}\r\n              disabled={isRefreshing}\r\n            >\r\n              <RefreshCw\r\n                className={cn('h-4 w-4', isRefreshing && 'animate-spin')}\r\n              />\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </CardHeader>\r\n\r\n      <CardContent className=\"relative\">\r\n        <div className=\"space-y-2\">\r\n          {insights.map((insight, index) => {\r\n            const Icon = INSIGHT_ICONS[insight.type] || Lightbulb;\r\n            return (\r\n              <div\r\n                key={`${insight.type}-${index}`}\r\n                className=\"group relative transition-all duration-300 ease-in-out\"\r\n              >\r\n                <div\r\n                  className={cn(\r\n                    'flex items-start gap-3 p-3 rounded-lg border border-border/50',\r\n                    'bg-card hover:bg-muted/30 transition-colors'\r\n                  )}\r\n                >\r\n                  {/* Icon */}\r\n                  <div\r\n                    className={cn(\r\n                      'flex-shrink-0 w-9 h-9 rounded-lg flex items-center justify-center',\r\n                      INSIGHT_COLORS[insight.type] ||\r\n                        'text-primary bg-primary/10'\r\n                    )}\r\n                  >\r\n                    <Icon className=\"h-5 w-5\" />\r\n                  </div>\r\n\r\n                  {/* Content */}\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <p className=\"text-sm leading-relaxed\">{insight.message}</p>\r\n\r\n                    {insight.actionLabel && (\r\n                      <button\r\n                        onClick={() => onAction?.(insight)}\r\n                        className=\"mt-1.5 text-xs text-primary hover:underline flex items-center gap-1\"\r\n                      >\r\n                        {insight.actionLabel}\r\n                        <ChevronRight className=\"h-3 w-3\" />\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Dismiss button */}\r\n                  {onDismiss && (\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"icon\"\r\n                      className=\"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                      onClick={() => onDismiss(index)}\r\n                    >\r\n                      <X className=\"h-3 w-3\" />\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Priority indicator */}\r\n                {insight.priority === 'HIGH' && (\r\n                  <div className=\"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-8 bg-red-500 rounded-r\" />\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\dashboard\\dashboard-timer-widget.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Button' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { Timer, Play, Pause, SkipForward, RotateCcw } from 'lucide-react';\r\nimport { cn } from '../../utils/index.js';\r\nimport { Button } from '../ui/button.js';\r\n\r\ninterface TimerWidgetProps {\r\n  mode: string;\r\n  isRunning: boolean;\r\n  isPaused: boolean;\r\n  timeLeft: number;\r\n  completedPomodoros: number;\r\n  progress: number;\r\n  accentColor?: string;\r\n  onToggle: () => void;\r\n  onReset: () => void;\r\n  onSkip: () => void;\r\n  onClick?: () => void;\r\n  formatTime: (seconds: number) => string;\r\n  labels?: {\r\n    work?: string;\r\n    shortBreak?: string;\r\n    longBreak?: string;\r\n    continuous?: string;\r\n    idle?: string;\r\n    completedPomodoros?: string;\r\n    reset?: string;\r\n    start?: string;\r\n    pause?: string;\r\n    skip?: string;\r\n  };\r\n}\r\n\r\nconst MODE_COLORS: Record<string, string> = {\r\n  WORK: '#ef4444',\r\n  SHORT_BREAK: '#22c55e',\r\n  LONG_BREAK: '#3b82f6',\r\n  CONTINUOUS: '#8b5cf6',\r\n  POMODORO: '#ef4444',\r\n  STOPWATCH: '#f59e0b',\r\n};\r\n\r\nconst DEFAULT_LABELS = {\r\n  work: 'Work',\r\n  shortBreak: 'Short Break',\r\n  longBreak: 'Long Break',\r\n  continuous: 'Continuous',\r\n  idle: 'Idle',\r\n  completedPomodoros: 'pomodoros completed',\r\n  reset: 'Reset',\r\n  start: 'Start',\r\n  pause: 'Pause',\r\n  skip: 'Skip',\r\n};\r\n\r\nexport function DashboardTimerWidget({\r\n  mode,\r\n  isRunning,\r\n  isPaused,\r\n  timeLeft,\r\n  completedPomodoros,\r\n  progress,\r\n  accentColor = '#6b7280',\r\n  onToggle,\r\n  onReset,\r\n  onSkip,\r\n  onClick,\r\n  formatTime,\r\n  labels = {},\r\n}: TimerWidgetProps) {\r\n  const t = { ...DEFAULT_LABELS, ...labels };\r\n\r\n  const modeColor = MODE_COLORS[mode] || accentColor;\r\n  const isIdle = !isRunning && !isPaused;\r\n\r\n  const getModeLabel = (m: string) => {\r\n    switch (m) {\r\n      case 'WORK': return t.work;\r\n      case 'SHORT_BREAK': return t.shortBreak;\r\n      case 'LONG_BREAK': return t.longBreak;\r\n      case 'CONTINUOUS': return t.continuous;\r\n      default: return isIdle ? t.idle : m;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'group relative overflow-hidden rounded-2xl border-2 bg-card p-6 transition-all duration-300 cursor-pointer',\r\n        'hover:shadow-lg hover:shadow-black/5 dark:hover:shadow-black/20'\r\n      )}\r\n      style={{ borderColor: modeColor, transition: 'border-color 0.5s' }}\r\n      onClick={onClick}\r\n    >\r\n      {/* Progress background */}\r\n      <div\r\n        className=\"absolute inset-0 opacity-10 transition-all duration-1000 ease-linear\"\r\n        style={{\r\n          background: `linear-gradient(90deg, ${modeColor} ${progress}%, transparent ${progress}%)`,\r\n        }}\r\n      />\r\n\r\n      <div className=\"relative z-10\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div\r\n              className=\"flex h-10 w-10 items-center justify-center rounded-xl\"\r\n              style={{ backgroundColor: `${modeColor}20`, color: modeColor }}\r\n            >\r\n              <Timer className=\"h-5 w-5\" />\r\n            </div>\r\n            <div>\r\n              <h3 className=\"text-lg font-semibold\">{getModeLabel(mode)}</h3>\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                {completedPomodoros} {t.completedPomodoros}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Timer Display */}\r\n        <div className=\"text-center mb-4\">\r\n          <p\r\n            className=\"text-5xl font-bold font-mono tracking-wider transition-colors duration-300\"\r\n            style={{ color: isRunning ? modeColor : undefined }}\r\n          >\r\n            {formatTime(timeLeft)}\r\n          </p>\r\n        </div>\r\n\r\n        {/* Controls */}\r\n        <div\r\n          className=\"flex items-center justify-center gap-2\"\r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          <button\r\n            onClick={onReset}\r\n            disabled={isIdle}\r\n            className={cn(\r\n              'h-10 w-10 flex items-center justify-center rounded-xl border border-border/50 bg-background transition-all duration-200',\r\n              isIdle ? 'opacity-50 cursor-not-allowed' : 'hover:bg-muted'\r\n            )}\r\n            title={t.reset}\r\n          >\r\n            <RotateCcw className=\"h-4 w-4\" />\r\n          </button>\r\n\r\n          <button\r\n            onClick={onToggle}\r\n            className=\"h-12 w-24 flex items-center justify-center rounded-xl text-white shadow-lg transition-all duration-200 hover:scale-105 active:scale-95\"\r\n            style={{\r\n              backgroundColor: modeColor,\r\n              boxShadow: `0 4px 14px -3px ${modeColor}60`,\r\n            }}\r\n            title={isRunning && !isPaused ? t.pause : t.start}\r\n          >\r\n            {isRunning && !isPaused ? (\r\n              <Pause className=\"h-5 w-5\" />\r\n            ) : (\r\n              <Play className=\"h-5 w-5 ml-1\" />\r\n            )}\r\n          </button>\r\n\r\n          <button\r\n            onClick={onSkip}\r\n            disabled={!isRunning}\r\n            className={cn(\r\n              'h-10 w-10 flex items-center justify-center rounded-xl border border-border/50 bg-background transition-all duration-200',\r\n              !isRunning ? 'opacity-50 cursor-not-allowed' : 'hover:bg-muted'\r\n            )}\r\n            title={t.skip}\r\n          >\r\n            <SkipForward className=\"h-4 w-4\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Mode indicators */}\r\n        <div className=\"flex items-center justify-center gap-2 mt-4\">\r\n          {['WORK', 'SHORT_BREAK', 'LONG_BREAK'].map((m) => (\r\n            <div\r\n              key={m}\r\n              className={cn(\r\n                'h-2 w-2 rounded-full transition-all duration-300',\r\n                mode === m ? 'scale-125' : 'opacity-30'\r\n              )}\r\n              style={{\r\n                backgroundColor: MODE_COLORS[m] || '#6b7280',\r\n              }}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\dashboard\\habits-widget.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Button' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { Sparkles, Flame, CheckCircle2, ChevronRight } from 'lucide-react';\r\nimport { cn } from '../../utils/index.js';\r\nimport { Button } from '../ui/button.js';\r\n\r\ninterface Habit {\r\n  id: string;\r\n  name: string;\r\n  color?: string;\r\n  isPaused?: boolean;\r\n  completions?: Record<string, unknown>[];\r\n  currentStreak: number;\r\n}\r\n\r\ninterface HabitsSummary {\r\n  total: number;\r\n  completed: number;\r\n  remaining: number;\r\n  percentage: number;\r\n}\r\n\r\ninterface HabitsWidgetProps {\r\n  habits: Habit[];\r\n  summary: HabitsSummary;\r\n  accentColor?: string;\r\n  isLoading?: boolean;\r\n  onToggleHabit?: (habitId: string, isCompleted: boolean) => void;\r\n  onViewAll?: () => void;\r\n  onCreateHabit?: () => void;\r\n  labels?: {\r\n    title?: string;\r\n    todayProgress?: (completed: number, total: number) => string;\r\n    viewAll?: string;\r\n    noHabits?: string;\r\n    createHabit?: string;\r\n    moreHabits?: (count: number) => string;\r\n  };\r\n}\r\n\r\nconst DEFAULT_LABELS = {\r\n  title: 'Daily Habits',\r\n  todayProgress: (completed: number, total: number) =>\r\n    `${completed}/${total} completed today`,\r\n  viewAll: 'View all',\r\n  noHabits: 'No habits for today',\r\n  createHabit: 'Create habit',\r\n  moreHabits: (count: number) => `+${count} more`,\r\n};\r\n\r\nexport function HabitsWidget({\r\n  habits,\r\n  summary,\r\n  accentColor = '#10B981',\r\n  isLoading = false,\r\n  onToggleHabit,\r\n  onViewAll,\r\n  onCreateHabit,\r\n  labels = {},\r\n}: HabitsWidgetProps) {\r\n  const t = { ...DEFAULT_LABELS, ...labels };\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'group relative overflow-hidden rounded-2xl border border-border/50 bg-card transition-all duration-300',\r\n        'hover:shadow-xl hover:shadow-black/5 dark:hover:shadow-black/20'\r\n      )}\r\n    >\r\n      {/* Header */}\r\n      <div className=\"p-4 border-b border-border/50\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div\r\n              className=\"flex h-10 w-10 items-center justify-center rounded-xl text-white\"\r\n              style={{ backgroundColor: accentColor }}\r\n            >\r\n              <Sparkles className=\"h-5 w-5\" />\r\n            </div>\r\n            <div>\r\n              <h3 className=\"font-semibold\">{t.title}</h3>\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                {t.todayProgress(summary.completed, summary.total)}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          {onViewAll && (\r\n            <button\r\n              onClick={onViewAll}\r\n              className=\"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-colors\"\r\n            >\r\n              {t.viewAll}\r\n              <ChevronRight className=\"h-3 w-3\" />\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/* Progress Bar */}\r\n        {summary.total > 0 && (\r\n          <div className=\"mt-3\">\r\n            <div className=\"h-2 rounded-full bg-muted overflow-hidden\">\r\n              <div\r\n                className=\"h-full rounded-full transition-all duration-700 ease-out\"\r\n                style={{\r\n                  width: `${summary.percentage}%`,\r\n                  backgroundColor: accentColor,\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Habits List */}\r\n      <div className=\"p-2\">\r\n        {isLoading ? (\r\n          <div className=\"flex items-center justify-center py-8\">\r\n            <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-primary\" />\r\n          </div>\r\n        ) : habits.length === 0 ? (\r\n          <div className=\"flex flex-col items-center justify-center py-6 text-center\">\r\n            <Sparkles className=\"h-8 w-8 text-muted-foreground/50 mb-2\" />\r\n            <p className=\"text-sm text-muted-foreground\">{t.noHabits}</p>\r\n            {onCreateHabit && (\r\n              <button\r\n                onClick={onCreateHabit}\r\n                className=\"mt-2 text-xs font-medium hover:underline\"\r\n                style={{ color: accentColor }}\r\n              >\r\n                {t.createHabit}\r\n              </button>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-1\">\r\n            {habits.slice(0, 4).map((habit, index) => {\r\n              const isCompleted =\r\n                habit.completions && habit.completions.length > 0;\r\n\r\n              return (\r\n                <div\r\n                  key={habit.id}\r\n                  className={cn(\r\n                    'flex items-center gap-3 p-2 rounded-lg transition-colors cursor-pointer',\r\n                    isCompleted ? 'bg-muted/30' : 'hover:bg-muted/50'\r\n                  )}\r\n                  style={{ animation: `fadeIn 0.3s ease-out ${index * 0.05}s backwards` }}\r\n                >\r\n                  {/* Completion Button */}\r\n                  <button\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      onToggleHabit?.(habit.id, !!isCompleted);\r\n                    }}\r\n                    disabled={habit.isPaused}\r\n                    className={cn(\r\n                      'flex h-6 w-6 items-center justify-center rounded-full border-2 transition-all duration-200 shrink-0',\r\n                      isCompleted\r\n                        ? 'border-emerald-500 bg-emerald-500 text-white'\r\n                        : 'border-muted-foreground/30 hover:border-emerald-500'\r\n                    )}\r\n                  >\r\n                    {isCompleted && <CheckCircle2 className=\"h-3.5 w-3.5\" />}\r\n                  </button>\r\n\r\n                  {/* Habit Icon */}\r\n                  <div\r\n                    className=\"flex h-6 w-6 items-center justify-center rounded-lg text-white shrink-0\"\r\n                    style={{ backgroundColor: habit.color || accentColor }}\r\n                  >\r\n                    <Sparkles className=\"h-3 w-3\" />\r\n                  </div>\r\n\r\n                  {/* Habit Info */}\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <p\r\n                      className={cn(\r\n                        'text-sm truncate transition-all',\r\n                        isCompleted && 'line-through opacity-60'\r\n                      )}\r\n                    >\r\n                      {habit.name}\r\n                    </p>\r\n                  </div>\r\n\r\n                  {/* Streak Badge */}\r\n                  {habit.currentStreak > 0 && (\r\n                    <div className=\"flex items-center gap-0.5 text-orange-500 shrink-0\">\r\n                      <Flame className=\"h-3 w-3\" />\r\n                      <span className=\"text-xs font-medium\">\r\n                        {habit.currentStreak}\r\n                      </span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              );\r\n            })}\r\n\r\n            {/* Show more link if there are more habits */}\r\n            {habits.length > 4 && onViewAll && (\r\n              <button\r\n                onClick={onViewAll}\r\n                className=\"block w-full text-center py-2 text-xs text-muted-foreground hover:text-foreground transition-colors\"\r\n              >\r\n                {t.moreHabits(habits.length - 4)}\r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Decorative element */}\r\n      <div\r\n        className=\"absolute -right-8 -top-8 opacity-5 pointer-events-none\"\r\n        style={{ color: accentColor }}\r\n      >\r\n        <Sparkles className=\"h-32 w-32\" />\r\n      </div>\r\n\r\n      <style>{`\r\n        @keyframes fadeIn {\r\n          from { opacity: 0; transform: translateX(-10px); }\r\n          to { opacity: 1; transform: translateX(0); }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\dashboard\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\dashboard\\productivity-streak-widget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\dashboard\\stats-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\dashboard\\upcoming-tasks-widget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\dashboard\\weekly-activity-widget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\habit\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\habit\\progress-ring.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\habit\\streak-badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\layout\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\layout\\mobile-sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\layout\\sidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Download' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":11}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { type ReactNode, type ElementType } from 'react';\r\nimport {\r\n  Home,\r\n  CheckSquare,\r\n  FolderKanban,\r\n  Tags,\r\n  BarChart3,\r\n  Settings,\r\n  Download,\r\n  Briefcase,\r\n  Calendar,\r\n} from 'lucide-react';\r\nimport { cn } from '../../utils/index.js';\r\n\r\nexport interface NavItem {\r\n  name: string;\r\n  href: string;\r\n  icon: ElementType;\r\n  color?: 'cyan' | 'purple' | 'pink' | 'orange' | 'green' | 'blue' | 'yellow' | 'red';\r\n}\r\n\r\ninterface SidebarProps {\r\n  /** Current pathname to determine active state */\r\n  pathname?: string;\r\n  /** Navigation items */\r\n  navItems?: NavItem[];\r\n  /** Render a Link component (for Next.js or React Router) */\r\n  renderLink: (props: {\r\n    href: string;\r\n    className: string;\r\n    children: ReactNode;\r\n  }) => ReactNode;\r\n  /** Workspace selector component */\r\n  renderWorkspaceSelector?: () => ReactNode;\r\n  /** Timer widget component */\r\n  renderTimerWidget?: () => ReactNode;\r\n  /** Install PWA button renderer */\r\n  renderInstallButton?: () => ReactNode;\r\n  /** Called when user clicks settings */\r\n  onSettingsClick?: () => void;\r\n  /** Logo click handler or href */\r\n  logoHref?: string;\r\n  /** Whether to show the settings button (default: false) */\r\n  showSettingsButton?: boolean;\r\n  labels?: {\r\n    appName?: string;\r\n    settings?: string;\r\n    today?: string;\r\n    tasks?: string;\r\n    calendar?: string;\r\n    projects?: string;\r\n    workspaces?: string;\r\n    tags?: string;\r\n    analytics?: string;\r\n  };\r\n}\r\n\r\nconst colorClasses = {\r\n  cyan: 'group-hover:bg-cyan-50 dark:group-hover:bg-cyan-950 group-hover:text-cyan-600 dark:group-hover:text-cyan-400',\r\n  purple: 'group-hover:bg-purple-50 dark:group-hover:bg-purple-950 group-hover:text-purple-600 dark:group-hover:text-purple-400',\r\n  pink: 'group-hover:bg-pink-50 dark:group-hover:bg-pink-950 group-hover:text-pink-600 dark:group-hover:text-pink-400',\r\n  orange: 'group-hover:bg-orange-50 dark:group-hover:bg-orange-950 group-hover:text-orange-600 dark:group-hover:text-orange-400',\r\n  green: 'group-hover:bg-green-50 dark:group-hover:bg-green-950 group-hover:text-green-600 dark:group-hover:text-green-400',\r\n  blue: 'group-hover:bg-blue-50 dark:group-hover:bg-blue-950 group-hover:text-blue-600 dark:group-hover:text-blue-400',\r\n  yellow: 'group-hover:bg-yellow-50 dark:group-hover:bg-yellow-950 group-hover:text-yellow-600 dark:group-hover:text-yellow-400',\r\n  red: 'group-hover:bg-red-50 dark:group-hover:bg-red-950 group-hover:text-red-600 dark:group-hover:text-red-400',\r\n};\r\n\r\nconst activeColorClasses = {\r\n  cyan: 'bg-cyan-500 text-white shadow-md',\r\n  purple: 'bg-purple-500 text-white shadow-md',\r\n  pink: 'bg-pink-500 text-white shadow-md',\r\n  orange: 'bg-orange-500 text-white shadow-md',\r\n  green: 'bg-green-500 text-white shadow-md',\r\n  blue: 'bg-blue-500 text-white shadow-md',\r\n  yellow: 'bg-yellow-500 text-white shadow-md',\r\n  red: 'bg-red-500 text-white shadow-md',\r\n};\r\n\r\nconst DEFAULT_LABELS = {\r\n  appName: 'Ordo',\r\n  settings: 'Settings',\r\n  today: 'Today',\r\n  tasks: 'Tasks',\r\n  calendar: 'Calendar',\r\n  projects: 'Projects',\r\n  workspaces: 'Workspaces',\r\n  tags: 'Tags',\r\n  analytics: 'Analytics',\r\n};\r\n\r\nexport function Sidebar({\r\n  pathname = '',\r\n  navItems,\r\n  renderLink,\r\n  renderWorkspaceSelector,\r\n  renderTimerWidget,\r\n  renderInstallButton,\r\n  logoHref = '/dashboard',\r\n  showSettingsButton = false,\r\n  labels = {},\r\n}: SidebarProps) {\r\n  const t = { ...DEFAULT_LABELS, ...labels };\r\n\r\n  // Default navigation if not provided\r\n  const navigation: NavItem[] = navItems || [\r\n    { name: t.today, href: '/dashboard', icon: Home, color: 'cyan' },\r\n    { name: t.tasks, href: '/tasks', icon: CheckSquare, color: 'purple' },\r\n    { name: t.calendar, href: '/calendar', icon: Calendar, color: 'blue' },\r\n    { name: t.projects, href: '/projects', icon: FolderKanban, color: 'pink' },\r\n    { name: t.workspaces, href: '/workspaces', icon: Briefcase, color: 'orange' },\r\n    { name: t.tags, href: '/tags', icon: Tags, color: 'green' },\r\n    { name: t.analytics, href: '/analytics', icon: BarChart3, color: 'cyan' },\r\n  ];\r\n\r\n  const isActiveRoute = (href: string) => {\r\n    return pathname === href || pathname?.startsWith(`${href}/`);\r\n  };\r\n\r\n  return (\r\n    <aside className=\"fixed left-0 top-0 z-40 h-screen w-64 border-r border-border bg-background hidden lg:block\">\r\n      <div className=\"flex h-full flex-col overflow-hidden\">\r\n        {/* Logo */}\r\n        <div className=\"flex h-16 items-center border-b border-border/50 px-6 shrink-0\">\r\n          {renderLink({\r\n            href: logoHref,\r\n            className: 'flex items-center gap-3 group',\r\n            children: (\r\n              <>\r\n                <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-purple-500 text-white shadow-lg shadow-purple-500/20 transition-transform duration-300 group-hover:scale-110 group-hover:rotate-3\">\r\n                  <CheckSquare className=\"h-6 w-6\" />\r\n                </div>\r\n                <span className=\"text-2xl font-bold text-foreground\">\r\n                  {t.appName}\r\n                </span>\r\n              </>\r\n            ),\r\n          })}\r\n        </div>\r\n\r\n        {/* Scrollable content area */}\r\n        <div className=\"flex-1 overflow-y-auto\">\r\n          {/* Navigation */}\r\n          <nav role=\"navigation\" aria-label=\"Navegaci├│n principal\" className=\"space-y-1 px-3 py-4\">\r\n            {navigation.map((item) => {\r\n              const isActive = isActiveRoute(item.href);\r\n              const color = item.color || 'cyan';\r\n              return (\r\n                <div key={item.href}>\r\n                  {renderLink({\r\n                    href: item.href,\r\n                    className: cn(\r\n                      'group flex items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-medium transition-all duration-200',\r\n                      isActive\r\n                        ? activeColorClasses[color]\r\n                        : cn(\r\n                            'text-muted-foreground hover:text-foreground',\r\n                            colorClasses[color]\r\n                          )\r\n                    ),\r\n                    children: (\r\n                      <>\r\n                        <item.icon\r\n                          className={cn(\r\n                            'h-5 w-5 transition-transform duration-200',\r\n                            isActive ? '' : 'group-hover:scale-110'\r\n                          )}\r\n                        />\r\n                        {item.name}\r\n                      </>\r\n                    ),\r\n                  })}\r\n                </div>\r\n              );\r\n            })}\r\n          </nav>\r\n\r\n          {/* Timer Widget */}\r\n          {renderTimerWidget && (\r\n            <div className=\"border-t border-border/50 p-3\">\r\n              {renderTimerWidget()}\r\n            </div>\r\n          )}\r\n\r\n          {/* Workspace Selector */}\r\n          {renderWorkspaceSelector && (\r\n            <div className=\"border-t border-border/50 p-3\">\r\n              {renderWorkspaceSelector()}\r\n            </div>\r\n          )}\r\n\r\n          {/* Settings & PWA */}\r\n          {(showSettingsButton || renderInstallButton) && (\r\n            <div className=\"border-t border-border/50 p-3 space-y-1\">\r\n              {showSettingsButton && renderLink({\r\n                href: '/settings',\r\n                className: cn(\r\n                  'group flex items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-medium transition-all duration-200',\r\n                  isActiveRoute('/settings')\r\n                    ? activeColorClasses.blue\r\n                    : cn('text-muted-foreground hover:text-foreground', colorClasses.blue)\r\n                ),\r\n                children: (\r\n                  <>\r\n                    <Settings\r\n                      className={cn(\r\n                        'h-5 w-5 transition-transform duration-200',\r\n                        isActiveRoute('/settings') ? '' : 'group-hover:scale-110'\r\n                      )}\r\n                    />\r\n                    {t.settings}\r\n                  </>\r\n                ),\r\n              })}\r\n              {renderInstallButton?.()}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </aside>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\layout\\topbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\project\\board-column.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'id' is defined but never used. Allowed unused args must match /^_/u.","line":33,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":5}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { type ReactNode } from \"react\";\r\nimport { Button } from \"../ui/button.js\";\r\nimport { Plus } from \"lucide-react\";\r\nimport { cn } from \"../../utils/index.js\";\r\n\r\ninterface BoardColumnProps {\r\n  id: string;\r\n  title: string;\r\n  color: string;\r\n  /** Tasks to display (already filtered for this column) */\r\n  tasksCount?: number;\r\n  /** Header color classes or hex (solid) */\r\n  headerColorClass?: string;\r\n  /** Callback to add task */\r\n  onAddTask?: () => void;\r\n  /** Content of the column (tasks) */\r\n  children?: ReactNode;\r\n  /** Labels for i18n */\r\n  labels?: {\r\n    addTask?: string;\r\n  };\r\n  className?: string;\r\n  /** Style for container (e.g. for droppable ref) */\r\n  style?: React.CSSProperties;\r\n  /** Reference for droppable node - passed as callback/prop to be agnostic */\r\n  setNodeRef?: (node: HTMLElement | null) => void;\r\n}\r\n\r\n/**\r\n * BoardColumn - Platform-agnostic Kanban column layout\r\n */\r\nexport function BoardColumn({\r\n  id,\r\n  title,\r\n  tasksCount = 0,\r\n  headerColorClass,\r\n  onAddTask,\r\n  children,\r\n  labels = {},\r\n  className = '',\r\n  style,\r\n  setNodeRef,\r\n}: BoardColumnProps) {\r\n  return (\r\n    <div \r\n      className={cn(\"flex-shrink-0 w-80 flex flex-col gap-4\", className)}\r\n      style={style}\r\n    >\r\n      <div \r\n        className={cn(\r\n          \"flex items-center justify-between p-3 rounded-lg border bg-slate-50 dark:bg-slate-900\",\r\n          headerColorClass\r\n        )}\r\n      >\r\n        <h3 className=\"font-semibold text-sm text-foreground\">{title}</h3>\r\n        <span className=\"text-xs font-medium bg-white dark:bg-black px-2 py-0.5 rounded-full border border-border shadow-sm\">\r\n          {tasksCount}\r\n        </span>\r\n      </div>\r\n\r\n      <div \r\n        ref={setNodeRef} \r\n        className=\"flex flex-col gap-3 min-h-[200px] flex-1\"\r\n      >\r\n        {children}\r\n\r\n        <Button \r\n          variant=\"ghost\" \r\n          className=\"w-full justify-start text-muted-foreground hover:text-primary border border-dashed border-border hover:border-primary/50 hover:bg-slate-50 dark:hover:bg-slate-900\"\r\n          onClick={onAddTask}\r\n        >\r\n          <Plus className=\"mr-2 h-4 w-4\" />\r\n          {labels.addTask ?? 'Add Task'}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\project\\create-project-dialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'onCreateWorkflow' is defined but never used. Allowed unused args must match /^_/u.","line":122,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":122,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'createWorkspace' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":131,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":131,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'reset' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":166,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":166,"endColumn":10}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { z } from 'zod';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '../ui/dialog.js';\r\nimport { Label } from '../ui/label.js';\r\nimport { Input } from '../ui/input.js';\r\nimport { Textarea } from '../ui/textarea.js';\r\nimport { Button } from '../ui/button.js';\r\nimport { EmptyState } from '../ui/empty-state.js';\r\nimport { ScrollArea } from '../ui/scroll-area.js';\r\nimport { Briefcase, Check, Palette, LayoutTemplate } from 'lucide-react';\r\nimport { PROJECT_COLORS, createProjectSchema } from '@ordo-todo/core';\r\n\r\n// Interfaces for props\r\nexport interface WorkspaceOption {\r\n  id: string;\r\n  name: string;\r\n}\r\n\r\nexport interface WorkflowOption {\r\n  id: string;\r\n  name: string;\r\n}\r\n\r\nexport interface ProjectTemplateTask {\r\n  title: string;\r\n  description: string;\r\n  priority: string;\r\n}\r\n\r\nexport interface ProjectTemplate {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  icon: React.ElementType; // Lucide icon\r\n  color: string;\r\n  tasks: ProjectTemplateTask[];\r\n}\r\n\r\nexport interface CreateProjectFormData {\r\n  name: string;\r\n  description?: string;\r\n  color: string;\r\n  workspaceId: string;\r\n  workflowId?: string;\r\n}\r\n\r\ninterface CreateProjectDialogProps {\r\n  /** Whether dialog is open */\r\n  open: boolean;\r\n  /** Called when open state changes */\r\n  onOpenChange: (open: boolean) => void;\r\n  /** Pre-selected workspace ID */\r\n  workspaceId?: string;\r\n  /** Available workspaces */\r\n  workspaces?: WorkspaceOption[];\r\n  /** Whether workspaces are loading */\r\n  isLoadingWorkspaces?: boolean;\r\n  /** Available workflows for selected workspace */\r\n  workflows?: WorkflowOption[];\r\n  /** Available project templates */\r\n  templates?: ProjectTemplate[];\r\n  /** Whether create operation is pending */\r\n  isPending?: boolean;\r\n  /** Called when form is submitted */\r\n  onSubmit: (data: CreateProjectFormData, templateTasks?: ProjectTemplateTask[]) => void;\r\n  /** Called when workflow needs to be created (if none exists) */\r\n  onCreateWorkflow?: (workspaceId: string) => Promise<string>;\r\n  /** Custom labels for i18n */\r\n  labels?: {\r\n    title?: string;\r\n    description?: string;\r\n    descriptionPlaceholder?: string;\r\n    nameRequired?: string;\r\n    workspaceRequired?: string;\r\n    templateSelected?: (name: string) => string;\r\n    createWorkspace?: string;\r\n    emptyTitle?: string;\r\n    emptyDescription?: string;\r\n    emptyAction?: string;\r\n    templatesTitle?: string;\r\n    tasksCount?: (count: number) => string;\r\n    hideTemplates?: string;\r\n    useTemplate?: string;\r\n    colorLabel?: string;\r\n    nameLabel?: string;\r\n    namePlaceholder?: string;\r\n    workspaceLabel?: string;\r\n    descriptionLabel?: string;\r\n    cancel?: string;\r\n    create?: string;\r\n    creating?: string;\r\n  };\r\n}\r\n\r\n/**\r\n * CreateProjectDialog - Platform-agnostic project creation dialog\r\n * \r\n * Handles project creation with optional templates.\r\n * Data fetching and mutations are handled externally via props.\r\n */\r\nexport function CreateProjectDialog({\r\n  open,\r\n  onOpenChange,\r\n  workspaceId,\r\n  workspaces = [],\r\n  isLoadingWorkspaces = false,\r\n  workflows = [],\r\n  templates = [],\r\n  isPending = false,\r\n  onSubmit,\r\n  onCreateWorkflow,\r\n  labels = {},\r\n}: CreateProjectDialogProps) {\r\n  const {\r\n    title = 'Create Project',\r\n    description = 'Create a new project to start tracking your tasks.',\r\n    descriptionPlaceholder = 'Project description (optional)',\r\n    nameRequired = 'Project name is required',\r\n    workspaceRequired = 'Workspace is required',\r\n    createWorkspace = 'Please create a workspace first',\r\n    emptyTitle = 'No Workspaces Found',\r\n    emptyDescription = 'You need a workspace to create projects.',\r\n    emptyAction = 'Create Workspace',\r\n    templatesTitle = 'Start with a Template',\r\n    tasksCount = (count: number) => `${count} Tasks`,\r\n    hideTemplates = 'Hide Templates',\r\n    useTemplate = 'Use Template',\r\n    colorLabel = 'Color',\r\n    nameLabel = 'Name',\r\n    namePlaceholder = 'Project Name',\r\n    workspaceLabel = 'Workspace',\r\n    descriptionLabel = 'Description',\r\n    cancel = 'Cancel',\r\n    create = 'Create Project',\r\n    creating = 'Creating...',\r\n  } = labels;\r\n\r\n  const [selectedColor, setSelectedColor] = useState<(typeof PROJECT_COLORS)[number]>(\r\n    PROJECT_COLORS[3]\r\n  );\r\n  const [showTemplates, setShowTemplates] = useState(false);\r\n  const [selectedTemplate, setSelectedTemplate] = useState<ProjectTemplate | null>(null);\r\n\r\n  // Schema with validation messages\r\n  const formSchema = createProjectSchema.extend({\r\n    name: z.string().min(1, nameRequired),\r\n    workspaceId: z.string().min(1, workspaceRequired),\r\n  });\r\n\r\n  type CreateProjectForm = z.infer<typeof formSchema>;\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    reset,\r\n    setValue,\r\n    watch,\r\n    formState: { errors },\r\n  } = useForm<CreateProjectForm>({\r\n    resolver: zodResolver(formSchema),\r\n    defaultValues: {\r\n      workspaceId: workspaceId || '',\r\n      color: PROJECT_COLORS[3],\r\n      workflowId: '',\r\n    },\r\n  });\r\n\r\n  const selectedWorkspaceId = watch('workspaceId');\r\n\r\n  // Update default workflow when workflows change\r\n  useEffect(() => {\r\n    // If workflows are provided, try to select the first one or logic handled by parent\r\n    // Here we mainly rely on the parent or the onSubmit handler to deal with \"NEW\" workflow logic if needed\r\n    if (workflows && workflows.length > 0) {\r\n      const firstWorkflow = workflows[0];\r\n      if (firstWorkflow?.id) {\r\n        setValue('workflowId', String(firstWorkflow.id));\r\n      }\r\n    } else {\r\n      // Logic for \"NEW\" workflow should ideally be handled in onSubmit wrapper in parent\r\n      setValue('workflowId', 'NEW'); \r\n    }\r\n  }, [workflows, setValue]);\r\n\r\n  // Set default workspace if none selected\r\n  useEffect(() => {\r\n    if (!workspaceId && workspaces && workspaces.length > 0 && !selectedWorkspaceId) {\r\n      if (workspaces[0]?.id) setValue('workspaceId', String(workspaces[0].id));\r\n    }\r\n  }, [workspaces, workspaceId, selectedWorkspaceId, setValue]);\r\n\r\n  // Sync workspaceId prop to form value\r\n  useEffect(() => {\r\n    if (workspaceId) {\r\n      setValue('workspaceId', workspaceId);\r\n    }\r\n  }, [workspaceId, setValue]);\r\n\r\n  const handleTemplateSelect = (template: ProjectTemplate) => {\r\n    setValue('name', template.name);\r\n    setValue('description', template.description);\r\n    setSelectedColor(template.color as (typeof PROJECT_COLORS)[number]);\r\n    setSelectedTemplate(template);\r\n    setShowTemplates(false);\r\n  };\r\n\r\n  const handleFormSubmit = async (data: CreateProjectForm) => {\r\n    \r\n    // Logic for creating workflow if needed should be handled by logic passed in `onSubmit` \r\n    // or by expanding the `onSubmit` to separate async steps. \r\n    // For simplicity/agnosticism, we pass the data up. \r\n    // The parent component is responsible for:\r\n    // 1. Checking if workflowId is valid or needs creation\r\n    // 2. Calling createProject\r\n    // 3. Creating tasks from template if provided\r\n\r\n    onSubmit(\r\n      { ...data, color: selectedColor }, \r\n      selectedTemplate?.tasks\r\n    );\r\n    \r\n    // We don't reset here immediately, usually parent handles success/close\r\n  };\r\n\r\n  const showEmptyState = !workspaceId && !isLoadingWorkspaces && workspaces.length === 0;\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"sm:max-w-[600px] gap-0 p-0 overflow-hidden bg-background border-border\">\r\n        <div className=\"p-6 space-y-6\">\r\n          <DialogHeader>\r\n            <div className=\"flex items-center justify-between\">\r\n              <DialogTitle className=\"text-xl font-semibold text-foreground\">\r\n                {title}\r\n              </DialogTitle>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setShowTemplates(!showTemplates)}\r\n                className=\"flex items-center gap-2 px-3 py-1.5 text-xs font-medium text-primary bg-primary/10 rounded-full hover:bg-primary/20 transition-colors duration-200\"\r\n              >\r\n                <LayoutTemplate className=\"w-3.5 h-3.5\" />\r\n                {showTemplates ? hideTemplates: useTemplate}\r\n              </button>\r\n            </div>\r\n            <DialogDescription className=\"text-muted-foreground\">\r\n              {description}\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n\r\n          {showEmptyState ? (\r\n            <EmptyState\r\n              icon={Briefcase}\r\n              title={emptyTitle}\r\n              description={emptyDescription}\r\n              actionLabel={emptyAction}\r\n              onAction={() => {\r\n                onOpenChange(false);\r\n              }}\r\n            />\r\n          ) : (\r\n            <>\r\n              {showTemplates && templates.length > 0 && (\r\n                <div className=\"bg-muted/30 rounded-lg border border-border p-4 mb-4\">\r\n                  <h4 className=\"text-sm font-medium mb-3\">{templatesTitle}</h4>\r\n                  <ScrollArea className=\"h-[200px] pr-4\">\r\n                    <div className=\"grid grid-cols-2 gap-3\">\r\n                      {templates.map((template) => (\r\n                        <button\r\n                          key={template.id}\r\n                          onClick={() => handleTemplateSelect(template)}\r\n                          className=\"flex flex-col items-start gap-2 p-3 rounded-lg border border-border bg-card hover:border-primary/50 hover:bg-primary/5 transition-all text-left group\"\r\n                        >\r\n                          <div className=\"flex items-center gap-2 w-full\">\r\n                            <div\r\n                              className=\"w-8 h-8 rounded-md flex items-center justify-center shrink-0\"\r\n                              style={{\r\n                                backgroundColor: `${template.color}20`,\r\n                                color: template.color,\r\n                              }}\r\n                            >\r\n                              <template.icon className=\"w-4 h-4\" />\r\n                            </div>\r\n                            <span className=\"font-medium text-sm truncate\">\r\n                              {template.name}\r\n                            </span>\r\n                          </div>\r\n                          <p className=\"text-xs text-muted-foreground line-clamp-2\">\r\n                            {template.description}\r\n                          </p>\r\n                          <div className=\"text-xs text-primary/70 font-medium\">\r\n                            {tasksCount(template.tasks.length)}\r\n                          </div>\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  </ScrollArea>\r\n                </div>\r\n              )}\r\n\r\n              <form onSubmit={handleSubmit(handleFormSubmit)} className=\"space-y-6\">\r\n                {/* Color Picker */}\r\n                <div className=\"space-y-3\">\r\n                  <Label className=\"text-sm font-medium text-foreground flex items-center gap-2\">\r\n                    <Palette className=\"w-4 h-4\" /> {colorLabel}\r\n                  </Label>\r\n                  <div className=\"flex gap-3 flex-wrap p-3 rounded-lg border border-border bg-muted/20\">\r\n                    {PROJECT_COLORS.map((color) => (\r\n                      <button\r\n                        key={color}\r\n                        type=\"button\"\r\n                        onClick={() => setSelectedColor(color)}\r\n                        className={`relative h-8 w-8 rounded-full transition-transform hover:scale-110 ${\r\n                          selectedColor === color\r\n                            ? 'ring-2 ring-offset-2 ring-offset-background ring-primary scale-110'\r\n                            : 'hover:opacity-80'\r\n                        }`}\r\n                        style={{ backgroundColor: color }}\r\n                      >\r\n                        {selectedColor === color && (\r\n                          <Check className=\"w-4 h-4 text-white absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2\" />\r\n                        )}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Name */}\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"name\" className=\"text-sm font-medium text-foreground\">\r\n                    {nameLabel}\r\n                  </Label>\r\n                  <Input\r\n                    id=\"name\"\r\n                    {...register('name')}\r\n                    placeholder={namePlaceholder}\r\n                  />\r\n                  {errors.name && (\r\n                    <p className=\"text-sm text-destructive\">{errors.name.message}</p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Workspace Selection (if not provided) */}\r\n                {!workspaceId && workspaces.length > 0 && (\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"workspaceId\" className=\"text-sm font-medium text-foreground\">\r\n                      {workspaceLabel}\r\n                    </Label>\r\n                    <select\r\n                      id=\"workspaceId\"\r\n                      {...register('workspaceId')}\r\n                      className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\"\r\n                    >\r\n                      {workspaces.map((ws) => (\r\n                        <option key={ws.id} value={ws.id}>\r\n                          {ws.name}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                    {errors.workspaceId && (\r\n                      <p className=\"text-sm text-destructive\">{errors.workspaceId.message}</p>\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Description */}\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"description\" className=\"text-sm font-medium text-foreground\">\r\n                    {descriptionLabel}\r\n                  </Label>\r\n                  <Textarea\r\n                    id=\"description\"\r\n                    {...register('description')}\r\n                    placeholder={descriptionPlaceholder}\r\n                    className=\"min-h-[100px] resize-none\"\r\n                  />\r\n                </div>\r\n\r\n                {/* Hidden workspace ID if provided */}\r\n                {workspaceId && <input type=\"hidden\" {...register('workspaceId')} />}\r\n\r\n                <DialogFooter className=\"pt-2\">\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"ghost\"\r\n                    onClick={() => onOpenChange(false)}\r\n                  >\r\n                    {cancel}\r\n                  </Button>\r\n                  <Button\r\n                    type=\"submit\"\r\n                    disabled={isPending}\r\n                  >\r\n                    {isPending ? creating : create}\r\n                  </Button>\r\n                </DialogFooter>\r\n              </form>\r\n            </>\r\n          )}\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\project\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\project\\kanban-task-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\project\\project-board.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\project\\project-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\project\\project-files.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\project\\project-list.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, type ReactNode } from 'react';\r\nimport { Loader2, CheckCircle2, Calendar, ListTodo } from 'lucide-react';\r\nimport { format } from 'date-fns';\r\nimport { cn } from '../../utils/index.js';\r\nimport { EmptyState } from '../ui/empty-state.js';\r\n\r\nexport interface ProjectTask {\r\n  id: string;\r\n  title: string;\r\n  status: string;\r\n  priority: string;\r\n  dueDate?: string | Date | null;\r\n}\r\n\r\ninterface ProjectListProps {\r\n  /** Tasks to display */\r\n  tasks: ProjectTask[];\r\n  /** Whether data is loading */\r\n  isLoading?: boolean;\r\n  /** Whether status update is pending */\r\n  isUpdating?: boolean;\r\n  /** Called when task status should toggle */\r\n  onStatusToggle?: (task: ProjectTask) => void;\r\n  /** Called when a task row is clicked */\r\n  onTaskClick?: (task: ProjectTask) => void;\r\n  /** Called when create task action is clicked */\r\n  onCreateTask?: () => void;\r\n  /** Task detail panel component (rendered when a task is selected) */\r\n  TaskDetailPanel?: ReactNode;\r\n  /** Create task dialog component */\r\n  CreateTaskDialog?: ReactNode;\r\n  /** Date locale for formatting */\r\n  dateLocale?: Locale;\r\n  /** Custom labels for i18n */\r\n  labels?: {\r\n    columnTask?: string;\r\n    columnDueDate?: string;\r\n    columnPriority?: string;\r\n    emptyTitle?: string;\r\n    emptyDescription?: string;\r\n    emptyAction?: string;\r\n  };\r\n  className?: string;\r\n}\r\n\r\ntype Locale = Parameters<typeof format>[2] extends { locale?: infer L } ? L : never;\r\n\r\nconst PRIORITY_COLORS: Record<string, string> = {\r\n  LOW: 'text-gray-500',\r\n  MEDIUM: 'text-blue-500',\r\n  HIGH: 'text-orange-500',\r\n  URGENT: 'text-red-500',\r\n};\r\n\r\n/**\r\n * ProjectList - Platform-agnostic task list for a project\r\n * \r\n * Data fetching and mutations handled externally.\r\n * \r\n * @example\r\n * const { data: tasks, isLoading } = useTasks(projectId);\r\n * const updateTask = useUpdateTask();\r\n * \r\n * <ProjectList\r\n *   tasks={tasks || []}\r\n *   isLoading={isLoading}\r\n *   onStatusToggle={(task) => updateTask.mutate({\r\n *     taskId: task.id,\r\n *     data: { status: task.status === 'COMPLETED' ? 'TODO' : 'COMPLETED' }\r\n *   })}\r\n *   onTaskClick={(task) => setSelectedTaskId(task.id)}\r\n *   labels={{ columnTask: t('task') }}\r\n * />\r\n */\r\nexport function ProjectList({\r\n  tasks = [],\r\n  isLoading = false,\r\n  isUpdating = false,\r\n  onStatusToggle,\r\n  onTaskClick,\r\n  onCreateTask,\r\n  TaskDetailPanel,\r\n  CreateTaskDialog,\r\n  dateLocale,\r\n  labels = {},\r\n  className = '',\r\n}: ProjectListProps) {\r\n  const {\r\n    columnTask = 'Task',\r\n    columnDueDate = 'Due Date',\r\n    columnPriority = 'Priority',\r\n    emptyTitle = 'No tasks yet',\r\n    emptyDescription = 'Create your first task to get started',\r\n    emptyAction = 'Create Task',\r\n  } = labels;\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className={cn('flex items-center justify-center h-64', className)}>\r\n        <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (tasks.length === 0) {\r\n    return (\r\n      <>\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title={emptyTitle}\r\n          description={emptyDescription}\r\n          actionLabel={emptyAction}\r\n          onAction={onCreateTask}\r\n        />\r\n        {CreateTaskDialog}\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={cn('space-y-2', className)}>\r\n      <div className=\"rounded-xl border bg-card text-card-foreground shadow-sm overflow-hidden\">\r\n        <div className=\"grid grid-cols-[auto_1fr_auto_auto] gap-4 p-4 border-b bg-muted/40 text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n          <div className=\"w-6\"></div>\r\n          <div>{columnTask}</div>\r\n          <div>{columnDueDate}</div>\r\n          <div>{columnPriority}</div>\r\n        </div>\r\n\r\n        <div className=\"divide-y divide-border\">\r\n          {tasks.map((task) => (\r\n            <div\r\n              key={task.id}\r\n              className=\"grid grid-cols-[auto_1fr_auto_auto] gap-4 p-4 items-center hover:bg-muted/30 transition-colors cursor-pointer group\"\r\n              onClick={() => onTaskClick?.(task)}\r\n            >\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onStatusToggle?.(task);\r\n                }}\r\n                disabled={isUpdating}\r\n                className={cn(\r\n                  'w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors',\r\n                  task.status === 'COMPLETED'\r\n                    ? 'bg-green-500 border-green-500 text-white'\r\n                    : 'border-muted-foreground/40 hover:border-primary'\r\n                )}\r\n              >\r\n                {task.status === 'COMPLETED' && <CheckCircle2 className=\"w-3.5 h-3.5\" />}\r\n              </button>\r\n\r\n              <div\r\n                className={cn(\r\n                  'font-medium',\r\n                  task.status === 'COMPLETED' && 'line-through text-muted-foreground'\r\n                )}\r\n              >\r\n                {task.title}\r\n              </div>\r\n\r\n              <div className=\"text-sm text-muted-foreground flex items-center gap-2\">\r\n                {task.dueDate && (\r\n                  <>\r\n                    <Calendar className=\"w-3.5 h-3.5\" />\r\n                    {format(\r\n                      new Date(task.dueDate),\r\n                      'MMM d',\r\n                      dateLocale ? { locale: dateLocale } : undefined\r\n                    )}\r\n                  </>\r\n                )}\r\n              </div>\r\n\r\n              <div\r\n                className={cn(\r\n                  'text-xs font-medium px-2 py-1 rounded-full bg-muted',\r\n                  PRIORITY_COLORS[task.priority] || 'text-gray-500'\r\n                )}\r\n              >\r\n                {task.priority}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {TaskDetailPanel}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\project\\project-settings-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\project\\project-settings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\project\\project-timeline.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\shared\\about-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\shared\\breadcrumbs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\shared\\confirm-delete.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\shared\\feature-onboarding.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\shared\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\shared\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\shared\\profile-tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\shared\\shortcuts-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\shared\\sync-status-indicator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\tag\\create-tag-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\tag\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\tag\\tag-badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\tag\\tag-selector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\task\\activity-feed.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FolderOpen' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'taskId' is defined but never used. Allowed unused args must match /^_/u.","line":127,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":127,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'fieldName' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":160,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":160,"endColumn":44}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport {\r\n  CheckCircle2,\r\n  Circle,\r\n  Edit,\r\n  Trash2,\r\n  Upload,\r\n  MessageSquare,\r\n  User,\r\n  Calendar,\r\n  Flag,\r\n  FolderOpen,\r\n} from 'lucide-react';\r\nimport { formatDistanceToNow } from 'date-fns';\r\nimport { enUS, es } from 'date-fns/locale';\r\nimport { cn } from '../../utils/index.js';\r\nimport { Avatar, AvatarFallback, AvatarImage } from '../ui/avatar.js';\r\n\r\nexport interface Activity {\r\n  id: string | number;\r\n  type:\r\n    | 'TASK_CREATED'\r\n    | 'TASK_UPDATED'\r\n    | 'TASK_COMPLETED'\r\n    | 'TASK_DELETED'\r\n    | 'COMMENT_ADDED'\r\n    | 'COMMENT_EDITED'\r\n    | 'COMMENT_DELETED'\r\n    | 'ATTACHMENT_ADDED'\r\n    | 'ATTACHMENT_DELETED'\r\n    | 'SUBTASK_ADDED'\r\n    | 'SUBTASK_COMPLETED'\r\n    | 'STATUS_CHANGED'\r\n    | 'PRIORITY_CHANGED'\r\n    | 'ASSIGNEE_CHANGED'\r\n    | 'DUE_DATE_CHANGED';\r\n  createdAt: Date | string;\r\n  user: {\r\n    id: string;\r\n    name: string;\r\n    image?: string;\r\n  };\r\n  metadata?: {\r\n    oldValue?: string | null;\r\n    newValue?: string | null;\r\n    fieldName?: string | null;\r\n    itemName?: string | null;\r\n  };\r\n}\r\n\r\ninterface ActivityFeedProps {\r\n  taskId: string;\r\n  activities?: Activity[];\r\n  maxItems?: number;\r\n  locale?: string;\r\n  labels?: {\r\n    title?: string;\r\n    today?: string;\r\n    yesterday?: string;\r\n    empty?: string;\r\n    showing?: (current: number, total: number) => string;\r\n    showMore?: (count: number) => string;\r\n    actions?: Record<string, string>;\r\n    details?: {\r\n      fromTo?: (oldVal: string, newVal: string) => string;\r\n      to?: (newVal: string) => string;\r\n      removed?: string;\r\n      item?: (name: string) => string;\r\n      mentioned?: (users: string) => string;\r\n    };\r\n  };\r\n}\r\n\r\nconst ACTIVITY_CONFIG = {\r\n  TASK_CREATED: { icon: Circle, color: 'text-blue-500' },\r\n  TASK_UPDATED: { icon: Edit, color: 'text-gray-500' },\r\n  TASK_COMPLETED: { icon: CheckCircle2, color: 'text-green-500' },\r\n  TASK_DELETED: { icon: Trash2, color: 'text-red-500' },\r\n  COMMENT_ADDED: { icon: MessageSquare, color: 'text-purple-500' },\r\n  COMMENT_EDITED: { icon: Edit, color: 'text-gray-500' },\r\n  COMMENT_DELETED: { icon: Trash2, color: 'text-red-500' },\r\n  ATTACHMENT_ADDED: { icon: Upload, color: 'text-indigo-500' },\r\n  ATTACHMENT_DELETED: { icon: Trash2, color: 'text-red-500' },\r\n  SUBTASK_ADDED: { icon: Circle, color: 'text-blue-500' },\r\n  SUBTASK_COMPLETED: { icon: CheckCircle2, color: 'text-green-500' },\r\n  STATUS_CHANGED: { icon: Circle, color: 'text-orange-500' },\r\n  PRIORITY_CHANGED: { icon: Flag, color: 'text-yellow-500' },\r\n  ASSIGNEE_CHANGED: { icon: User, color: 'text-cyan-500' },\r\n  DUE_DATE_CHANGED: { icon: Calendar, color: 'text-pink-500' },\r\n};\r\n\r\nconst DEFAULT_LABELS = {\r\n  title: 'Activity',\r\n  today: 'Today',\r\n  yesterday: 'Yesterday',\r\n  empty: 'No recent activity',\r\n  showing: (current: number, total: number) => `Showing ${current} of ${total}`,\r\n  showMore: (count: number) => `Show ${count} more`,\r\n  actions: {\r\n    TASK_CREATED: 'created this task',\r\n    TASK_UPDATED: 'updated this task',\r\n    TASK_COMPLETED: 'completed this task',\r\n    TASK_DELETED: 'deleted this task',\r\n    COMMENT_ADDED: 'commented',\r\n    COMMENT_EDITED: 'edited a comment',\r\n    COMMENT_DELETED: 'deleted a comment',\r\n    ATTACHMENT_ADDED: 'added an attachment',\r\n    ATTACHMENT_DELETED: 'removed an attachment',\r\n    SUBTASK_ADDED: 'added a subtask',\r\n    SUBTASK_COMPLETED: 'completed a subtask',\r\n    STATUS_CHANGED: 'changed status',\r\n    PRIORITY_CHANGED: 'changed priority',\r\n    ASSIGNEE_CHANGED: 'changed assignee',\r\n    DUE_DATE_CHANGED: 'changed due date',\r\n  },\r\n  details: {\r\n    fromTo: (oldVal: string, newVal: string) => `from ${oldVal} to ${newVal}`,\r\n    to: (newVal: string) => `to ${newVal}`,\r\n    removed: 'removed',\r\n    item: (name: string) => `: ${name}`,\r\n    mentioned: (users: string) => `mentioned ${users}`,\r\n  },\r\n};\r\n\r\nexport function ActivityFeed({\r\n  taskId,\r\n  activities = [],\r\n  maxItems = 20,\r\n  locale = 'en',\r\n  labels = {},\r\n}: ActivityFeedProps) {\r\n  // Merge labels shallowly for top-level, deep merge needed for actions/details\r\n  const t = {\r\n    ...DEFAULT_LABELS,\r\n    ...labels,\r\n    actions: { ...DEFAULT_LABELS.actions, ...labels.actions },\r\n    details: { ...DEFAULT_LABELS.details, ...labels.details },\r\n  };\r\n\r\n  const getInitials = (name: string) => {\r\n    return name\r\n      .split(' ')\r\n      .map((n) => n[0])\r\n      .join('')\r\n      .toUpperCase()\r\n      .slice(0, 2);\r\n  };\r\n\r\n  const formatTimestamp = (date: Date | string) => {\r\n    const dateObj = typeof date === 'string' ? new Date(date) : date;\r\n    const dateLocale = locale === 'es' ? es : enUS;\r\n    return formatDistanceToNow(dateObj, { addSuffix: true, locale: dateLocale });\r\n  };\r\n\r\n  const getActivityDescription = (activity: Activity) => {\r\n    let description = t.actions[activity.type] || activity.type;\r\n\r\n    if (activity.metadata) {\r\n      const { oldValue, newValue, fieldName, itemName } = activity.metadata;\r\n\r\n      switch (activity.type) {\r\n        case 'STATUS_CHANGED':\r\n        case 'PRIORITY_CHANGED':\r\n          description += ` ${t.details.fromTo(String(oldValue || ''), String(newValue || ''))}`;\r\n          break;\r\n        case 'ASSIGNEE_CHANGED':\r\n          description += newValue\r\n            ? ` ${t.details.to(String(newValue))}`\r\n            : '';\r\n          break;\r\n        case 'DUE_DATE_CHANGED':\r\n          description += newValue\r\n            ? ` ${t.details.to(String(newValue))}`\r\n            : ` ${t.details.removed}`;\r\n          break;\r\n        case 'ATTACHMENT_ADDED':\r\n        case 'ATTACHMENT_DELETED':\r\n          description += itemName ? t.details.item(String(itemName)) : '';\r\n          break;\r\n        case 'COMMENT_ADDED':\r\n          description += itemName ? ` ${t.details.mentioned(String(itemName))}` : '';\r\n          break;\r\n        case 'SUBTASK_ADDED':\r\n        case 'SUBTASK_COMPLETED':\r\n          description += itemName ? t.details.item(String(itemName)) : '';\r\n          break;\r\n      }\r\n    }\r\n\r\n    return description;\r\n  };\r\n\r\n  const groupActivitiesByDate = (activities: Activity[]) => {\r\n    const groups: { [key: string]: Activity[] } = {};\r\n\r\n    activities.forEach((activity) => {\r\n      const date = new Date(activity.createdAt);\r\n      const today = new Date();\r\n      const yesterday = new Date(today);\r\n      yesterday.setDate(yesterday.getDate() - 1);\r\n\r\n      let key: string;\r\n      if (date.toDateString() === today.toDateString()) {\r\n        key = t.today || 'Today';\r\n      } else if (date.toDateString() === yesterday.toDateString()) {\r\n        key = t.yesterday || 'Yesterday';\r\n      } else {\r\n        key = date.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', {\r\n          day: 'numeric',\r\n          month: 'long',\r\n          year: date.getFullYear() !== today.getFullYear() ? 'numeric' : undefined,\r\n        });\r\n      }\r\n\r\n      if (!groups[key]) {\r\n        groups[key] = [];\r\n      }\r\n      groups[key]!.push(activity);\r\n    });\r\n\r\n    return groups;\r\n  };\r\n\r\n  if (activities.length === 0) {\r\n    return (\r\n      <div className=\"text-center py-8 text-sm text-muted-foreground border border-dashed rounded-lg\">\r\n        {t.empty}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const displayActivities = activities.slice(0, maxItems);\r\n  const groupedActivities = groupActivitiesByDate(displayActivities);\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-sm font-semibold\">\r\n          {t.title} ({activities.length})\r\n        </h3>\r\n        {activities.length > maxItems && (\r\n          <p className=\"text-xs text-muted-foreground\">\r\n            {t.showing?.(maxItems, activities.length)}\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Activity Timeline */}\r\n      <div className=\"space-y-6\">\r\n        {Object.entries(groupedActivities).map(([date, dateActivities]) => (\r\n          <div key={date} className=\"space-y-3\">\r\n            {/* Date Header */}\r\n            <div className=\"sticky top-0 bg-background z-10 pb-2\">\r\n              <p className=\"text-xs font-semibold text-muted-foreground uppercase tracking-wider\">\r\n                {date}\r\n              </p>\r\n            </div>\r\n\r\n            {/* Activities for this date */}\r\n            <div className=\"space-y-3 relative before:absolute before:left-[15px] before:top-0 before:bottom-0 before:w-px before:bg-border\">\r\n              {dateActivities.map((activity, index) => {\r\n                const config = ACTIVITY_CONFIG[activity.type] || { icon: Circle, color: 'text-gray-500' };\r\n                const Icon = config.icon;\r\n                const isLast = index === dateActivities.length - 1;\r\n\r\n                return (\r\n                  <div\r\n                    key={activity.id}\r\n                    className={cn(\r\n                      'relative flex gap-3 pl-10',\r\n                      !isLast && 'pb-3'\r\n                    )}\r\n                  >\r\n                    {/* Icon */}\r\n                    <div className=\"absolute left-0 top-0.5\">\r\n                      <div\r\n                        className={cn(\r\n                          'flex items-center justify-center w-8 h-8 rounded-full bg-background border-2',\r\n                          config.color\r\n                        )}\r\n                      >\r\n                        <Icon className=\"h-3.5 w-3.5\" />\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Content */}\r\n                    <div className=\"flex-1 min-w-0 pt-0.5\">\r\n                      <div className=\"flex items-start gap-2\">\r\n                        {/* Avatar */}\r\n                        <Avatar className=\"h-6 w-6 shrink-0\">\r\n                          <AvatarImage\r\n                            src={activity.user?.image}\r\n                            alt={activity.user?.name}\r\n                          />\r\n                          <AvatarFallback className=\"text-xs\">\r\n                            {getInitials(activity.user?.name || '?')}\r\n                          </AvatarFallback>\r\n                        </Avatar>\r\n\r\n                        {/* Description */}\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <p className=\"text-sm\">\r\n                            <span className=\"font-medium\">{activity.user?.name}</span>{' '}\r\n                            <span className=\"text-muted-foreground\">\r\n                              {getActivityDescription(activity)}\r\n                            </span>\r\n                          </p>\r\n                          <p className=\"text-xs text-muted-foreground mt-0.5\">\r\n                            {formatTimestamp(activity.createdAt)}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Show More */}\r\n      {activities.length > maxItems && (\r\n        <div className=\"text-center pt-2\">\r\n          <button className=\"text-sm text-primary hover:underline\">\r\n            {t.showMore?.(activities.length - maxItems)}\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\task\\assignee-selector.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'taskId' is defined but never used. Allowed unused args must match /^_/u.","line":58,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":9}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { User, Check, X, UserPlus } from 'lucide-react';\r\nimport { cn } from '../../utils/index.js';\r\nimport {\r\n  Popover,\r\n  PopoverContent,\r\n  PopoverTrigger,\r\n} from '../ui/popover.js';\r\nimport { Avatar, AvatarFallback, AvatarImage } from '../ui/avatar.js';\r\n\r\ninterface Assignee {\r\n  id: string;\r\n  name: string;\r\n  image?: string;\r\n  email?: string;\r\n}\r\n\r\ninterface Member {\r\n  id: string;\r\n  role?: string;\r\n  user: Assignee;\r\n}\r\n\r\ninterface AssigneeSelectorProps {\r\n  taskId: string;\r\n  currentAssignee?: Assignee | null;\r\n  members?: Member[];\r\n  isLoading?: boolean;\r\n  onAssign?: (userId: string | null) => Promise<void> | void;\r\n  variant?: 'compact' | 'full';\r\n  labels?: {\r\n    assign?: string;\r\n    unassign?: string;\r\n    membersLabel?: string;\r\n    noMembers?: string;\r\n    loading?: string;\r\n    unassigned?: string;\r\n    assignedTo?: string;\r\n    selectMember?: string;\r\n    assignedRemoved?: string; // used for toast but here for labels\r\n  };\r\n}\r\n\r\nconst DEFAULT_LABELS = {\r\n  assign: 'Assign',\r\n  unassign: 'Unassign',\r\n  membersLabel: 'Workspace Members',\r\n  noMembers: 'No members in this workspace',\r\n  loading: 'Loading...',\r\n  unassigned: 'Unassigned - Click to assign',\r\n  assignedTo: 'Assigned to',\r\n  selectMember: 'Select Member',\r\n};\r\n\r\nexport function AssigneeSelector({\r\n  taskId,\r\n  currentAssignee,\r\n  members = [],\r\n  isLoading = false,\r\n  onAssign,\r\n  variant = 'compact',\r\n  labels = {},\r\n}: AssigneeSelectorProps) {\r\n  const t = { ...DEFAULT_LABELS, ...labels };\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleSelectAssignee = async (userId: string | null) => {\r\n    if (onAssign) {\r\n      await onAssign(userId);\r\n      setOpen(false);\r\n    }\r\n  };\r\n\r\n  const getInitials = (name?: string) => {\r\n    if (!name) return '?';\r\n    return name\r\n      .split(' ')\r\n      .map((n) => n[0])\r\n      .join('')\r\n      .toUpperCase()\r\n      .slice(0, 2);\r\n  };\r\n\r\n  if (variant === 'compact') {\r\n    return (\r\n      <Popover open={open} onOpenChange={setOpen}>\r\n        <PopoverTrigger asChild>\r\n          <button\r\n            className={cn(\r\n              'flex items-center gap-2 px-2 py-1.5 rounded-lg text-xs transition-all duration-200',\r\n              'hover:bg-muted/80 border border-transparent hover:border-border/50',\r\n              currentAssignee\r\n                ? 'text-foreground'\r\n                : 'text-muted-foreground hover:text-foreground'\r\n            )}\r\n          >\r\n            {currentAssignee ? (\r\n              <>\r\n                <Avatar className=\"h-5 w-5\">\r\n                  <AvatarImage src={currentAssignee.image} />\r\n                  <AvatarFallback className=\"text-[10px] bg-primary/10 text-primary\">\r\n                    {getInitials(currentAssignee.name)}\r\n                  </AvatarFallback>\r\n                </Avatar>\r\n                <span className=\"max-w-[100px] truncate\">\r\n                  {currentAssignee.name}\r\n                </span>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <UserPlus className=\"h-4 w-4\" />\r\n                <span>{t.assign}</span>\r\n              </>\r\n            )}\r\n          </button>\r\n        </PopoverTrigger>\r\n        <PopoverContent className=\"w-64 p-2\" align=\"start\">\r\n          <div className=\"space-y-1\">\r\n            <p className=\"text-xs font-medium text-muted-foreground px-2 py-1\">\r\n              {t.membersLabel}\r\n            </p>\r\n            \r\n            {isLoading ? (\r\n              <div className=\"flex items-center justify-center py-4\">\r\n                <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-primary\" />\r\n              </div>\r\n            ) : members.length === 0 ? (\r\n              <p className=\"text-sm text-muted-foreground text-center py-4\">\r\n                {t.noMembers}\r\n              </p>\r\n            ) : (\r\n              <div className=\"space-y-1\">\r\n                {/* Unassign option */}\r\n                {currentAssignee && (\r\n                  <button\r\n                    onClick={() => handleSelectAssignee(null)}\r\n                    className=\"w-full flex items-center gap-3 px-2 py-2 rounded-lg hover:bg-muted/80 transition-colors text-left group\"\r\n                  >\r\n                    <div className=\"flex h-7 w-7 items-center justify-center rounded-full bg-muted text-muted-foreground\">\r\n                      <X className=\"h-4 w-4\" />\r\n                    </div>\r\n                    <span className=\"text-sm text-muted-foreground group-hover:text-foreground\">\r\n                      {t.unassign}\r\n                    </span>\r\n                  </button>\r\n                )}\r\n\r\n                {/* Members list */}\r\n                {members.map((member) => (\r\n                  <button\r\n                    key={member.id}\r\n                    onClick={() => handleSelectAssignee(member.user.id)}\r\n                    className={cn(\r\n                      'w-full flex items-center gap-3 px-2 py-2 rounded-lg transition-colors text-left',\r\n                      currentAssignee?.id === member.user.id\r\n                        ? 'bg-primary/10 text-primary'\r\n                        : 'hover:bg-muted/80'\r\n                    )}\r\n                  >\r\n                    <Avatar className=\"h-7 w-7\">\r\n                      <AvatarImage src={member.user.image} />\r\n                      <AvatarFallback\r\n                        className={cn(\r\n                          'text-xs',\r\n                          currentAssignee?.id === member.user.id\r\n                            ? 'bg-primary text-primary-foreground'\r\n                            : 'bg-muted'\r\n                        )}\r\n                      >\r\n                        {getInitials(member.user.name)}\r\n                      </AvatarFallback>\r\n                    </Avatar>\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <p className=\"text-sm font-medium truncate\">\r\n                        {member.user.name || member.user.email}\r\n                      </p>\r\n                      {member.user.name && (\r\n                        <p className=\"text-xs text-muted-foreground truncate\">\r\n                          {member.user.email}\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                    {currentAssignee?.id === member.user.id && (\r\n                      <Check className=\"h-4 w-4 text-primary shrink-0\" />\r\n                    )}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </PopoverContent>\r\n      </Popover>\r\n    );\r\n  }\r\n\r\n  // Full variant (for task detail panel)\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      <label className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n        <User className=\"h-4 w-4\" />\r\n        {t.assignedTo}\r\n      </label>\r\n      <Popover open={open} onOpenChange={setOpen}>\r\n        <PopoverTrigger asChild>\r\n          <button\r\n            className={cn(\r\n              'w-full flex items-center gap-3 p-3 rounded-xl border border-border/50 bg-muted/30',\r\n              'hover:bg-muted/50 hover:border-border transition-all duration-200 text-left'\r\n            )}\r\n          >\r\n            {currentAssignee ? (\r\n              <>\r\n                <Avatar className=\"h-8 w-8\">\r\n                  <AvatarImage src={currentAssignee.image} />\r\n                  <AvatarFallback className=\"bg-primary/10 text-primary text-sm\">\r\n                    {getInitials(currentAssignee.name)}\r\n                  </AvatarFallback>\r\n                </Avatar>\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <p className=\"text-sm font-medium truncate\">\r\n                    {currentAssignee.name}\r\n                  </p>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <div className=\"flex h-8 w-8 items-center justify-center rounded-full bg-muted\">\r\n                  <UserPlus className=\"h-4 w-4 text-muted-foreground\" />\r\n                </div>\r\n                <span className=\"text-sm text-muted-foreground\">\r\n                  {t.unassigned}\r\n                </span>\r\n              </>\r\n            )}\r\n          </button>\r\n        </PopoverTrigger>\r\n        <PopoverContent className=\"w-72 p-2\" align=\"start\">\r\n          <div className=\"space-y-1\">\r\n            <p className=\"text-xs font-medium text-muted-foreground px-2 py-1\">\r\n              {t.selectMember}\r\n            </p>\r\n            \r\n            {isLoading ? (\r\n              <div className=\"flex items-center justify-center py-6\">\r\n                <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-primary\" />\r\n              </div>\r\n            ) : members.length === 0 ? (\r\n              <p className=\"text-sm text-muted-foreground text-center py-6\">\r\n                {t.noMembers}\r\n              </p>\r\n            ) : (\r\n              <div className=\"space-y-1\">\r\n                {currentAssignee && (\r\n                  <button\r\n                    onClick={() => handleSelectAssignee(null)}\r\n                    className=\"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-destructive/10 transition-colors text-left group\"\r\n                  >\r\n                    <div className=\"flex h-8 w-8 items-center justify-center rounded-full bg-destructive/10 text-destructive\">\r\n                      <X className=\"h-4 w-4\" />\r\n                    </div>\r\n                    <span className=\"text-sm text-destructive\">\r\n                      {t.unassign}\r\n                    </span>\r\n                  </button>\r\n                )}\r\n\r\n                {currentAssignee && <div className=\"border-t border-border/50 my-1\" />}\r\n\r\n                {members.map((member) => (\r\n                  <button\r\n                    key={member.id}\r\n                    onClick={() => handleSelectAssignee(member.user.id)}\r\n                    className={cn(\r\n                      'w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left',\r\n                      currentAssignee?.id === member.user.id\r\n                        ? 'bg-primary/10'\r\n                        : 'hover:bg-muted/80'\r\n                    )}\r\n                  >\r\n                    <Avatar className=\"h-8 w-8\">\r\n                      <AvatarImage src={member.user.image} />\r\n                      <AvatarFallback\r\n                        className={cn(\r\n                          'text-xs',\r\n                          currentAssignee?.id === member.user.id\r\n                            ? 'bg-primary text-primary-foreground'\r\n                            : 'bg-muted'\r\n                        )}\r\n                      >\r\n                        {getInitials(member.user.name)}\r\n                      </AvatarFallback>\r\n                    </Avatar>\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <p\r\n                        className={cn(\r\n                          'text-sm font-medium truncate',\r\n                          currentAssignee?.id === member.user.id && 'text-primary'\r\n                        )}\r\n                      >\r\n                        {member.user.name || member.user.email}\r\n                      </p>\r\n                      <p className=\"text-xs text-muted-foreground truncate\">\r\n                        {member.role}\r\n                      </p>\r\n                    </div>\r\n                    {currentAssignee?.id === member.user.id && (\r\n                      <Check className=\"h-4 w-4 text-primary shrink-0\" />\r\n                    )}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </PopoverContent>\r\n      </Popover>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\task\\attachment-list.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'taskId' is defined but never used. Allowed unused args must match /^_/u.","line":78,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":78,"endColumn":9}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport {\r\n  Download,\r\n  Trash2,\r\n  File,\r\n  Image as ImageIcon,\r\n  FileText,\r\n  Film,\r\n  Music,\r\n  Eye,\r\n  X,\r\n} from 'lucide-react';\r\nimport { cn } from '../../utils/index.js';\r\nimport { Button } from '../ui/button.js';\r\nimport { formatDistanceToNow } from 'date-fns';\r\nimport { enUS, es } from 'date-fns/locale';\r\nimport { Dialog, DialogContent, DialogTitle } from '../ui/dialog.js';\r\n\r\ninterface Attachment {\r\n  id: string | number;\r\n  filename: string;\r\n  url: string;\r\n  mimeType: string;\r\n  filesize: number;\r\n  uploadedAt: Date | string;\r\n  uploadedBy?: {\r\n    id: string;\r\n    name: string | null;\r\n  };\r\n}\r\n\r\ninterface AttachmentListProps {\r\n  taskId: string;\r\n  attachments?: Attachment[];\r\n  onDelete?: (attachmentId: string) => void | Promise<void>;\r\n  resolveUrl?: (url: string) => string;\r\n  locale?: string;\r\n  labels?: {\r\n    title?: string;\r\n    empty?: string;\r\n    total?: string;\r\n    by?: string;\r\n    tooltips?: {\r\n      preview?: string;\r\n      download?: string;\r\n      delete?: string;\r\n    };\r\n    confirmDelete?: (filename: string) => string;\r\n    // Toast messages are handled by consumer usually, but if we wanted to show text here:\r\n    // toastDownloading?: (filename: string) => string;\r\n  };\r\n}\r\n\r\nconst FILE_ICONS = {\r\n  image: ImageIcon,\r\n  video: Film,\r\n  audio: Music,\r\n  document: FileText,\r\n  default: File,\r\n};\r\n\r\nconst DEFAULT_LABELS = {\r\n  title: 'Attachments',\r\n  empty: 'No attachments found',\r\n  total: 'Total',\r\n  by: 'by',\r\n  tooltips: {\r\n    preview: 'Preview',\r\n    download: 'Download',\r\n    delete: 'Delete',\r\n  },\r\n  confirmDelete: (filename: string) => `Are you sure you want to delete ${filename}?`,\r\n};\r\n\r\nexport function AttachmentList({\r\n  taskId,\r\n  attachments = [],\r\n  onDelete,\r\n  resolveUrl,\r\n  locale = 'en',\r\n  labels = {},\r\n}: AttachmentListProps) {\r\n  const t = {\r\n    ...DEFAULT_LABELS,\r\n    ...labels,\r\n    tooltips: { ...DEFAULT_LABELS.tooltips, ...labels.tooltips },\r\n  };\r\n\r\n  const [previewAttachment, setPreviewAttachment] = useState<Attachment | null>(null);\r\n\r\n  const getFileType = (mimeType: string): keyof typeof FILE_ICONS => {\r\n    if (mimeType.startsWith('image/')) return 'image';\r\n    if (mimeType.startsWith('video/')) return 'video';\r\n    if (mimeType.startsWith('audio/')) return 'audio';\r\n    if (\r\n      mimeType.includes('pdf') ||\r\n      mimeType.includes('document') ||\r\n      mimeType.includes('word') ||\r\n      mimeType.includes('excel') ||\r\n      mimeType.includes('text')\r\n    ) {\r\n      return 'document';\r\n    }\r\n    return 'default';\r\n  };\r\n\r\n  const formatFileSize = (bytes: number): string => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return Math.round((bytes / Math.pow(k, i)) * 100) / 100 + ' ' + sizes[i];\r\n  };\r\n\r\n  const getFullUrl = (url: string) => {\r\n    if (resolveUrl) return resolveUrl(url);\r\n    return url;\r\n  };\r\n\r\n  const handleDownload = (attachment: Attachment) => {\r\n    const link = document.createElement('a');\r\n    link.href = getFullUrl(attachment.url);\r\n    link.download = attachment.filename;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  const handleDelete = async (attachment: Attachment) => {\r\n    const confirmMsg = t.confirmDelete ? t.confirmDelete(attachment.filename) : `Delete ${attachment.filename}?`;\r\n    if (window.confirm(confirmMsg)) {\r\n      if (onDelete) {\r\n         try {\r\n            await onDelete(String(attachment.id));\r\n         } catch (err) {\r\n            console.error(err);\r\n         }\r\n      }\r\n    }\r\n  };\r\n\r\n  const isImage = (type: string) => type.startsWith('image/');\r\n  const isPDF = (type: string) => type.includes('pdf');\r\n\r\n  const handlePreview = (attachment: Attachment) => {\r\n    if (isImage(attachment.mimeType)) {\r\n      setPreviewAttachment(attachment);\r\n    } else {\r\n      window.open(getFullUrl(attachment.url), '_blank');\r\n    }\r\n  };\r\n\r\n  if (attachments.length === 0) {\r\n    return (\r\n      <div className=\"text-center py-8 text-sm text-muted-foreground border border-dashed rounded-lg\">\r\n        {t.empty}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const dateLocale = locale === 'es' ? es : enUS;\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <p className=\"text-sm font-semibold\">\r\n          {t.title} ({attachments.length})\r\n        </p>\r\n        <p className=\"text-xs text-muted-foreground\">\r\n          {formatFileSize(attachments.reduce((acc, att) => acc + att.filesize, 0))}{' '}\r\n          {t.total}\r\n        </p>\r\n      </div>\r\n\r\n      {/* Attachments Grid */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n        {attachments.map((attachment) => {\r\n          const fileType = getFileType(attachment.mimeType);\r\n          const FileIcon = FILE_ICONS[fileType];\r\n          const canPreview = isImage(attachment.mimeType) || isPDF(attachment.mimeType);\r\n\r\n          return (\r\n            <div\r\n              key={attachment.id}\r\n              className={cn(\r\n                'group relative rounded-lg border p-3 transition-all',\r\n                'hover:bg-accent/50 hover:shadow-md'\r\n              )}\r\n            >\r\n              {/* Image Preview */}\r\n              {isImage(attachment.mimeType) && (\r\n                <div className=\"mb-3 relative aspect-video rounded-md overflow-hidden bg-muted\">\r\n                  <img\r\n                    src={getFullUrl(attachment.url)}\r\n                    alt={attachment.filename}\r\n                    className=\"object-cover w-full h-full\"\r\n                  />\r\n                  <div className=\"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2\">\r\n                    <Button\r\n                      variant=\"secondary\"\r\n                      size=\"sm\"\r\n                      onClick={() => handlePreview(attachment)}\r\n                    >\r\n                      <Eye className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* File Info */}\r\n              <div className=\"flex items-start gap-3\">\r\n                {/* Icon (only for non-images) */}\r\n                {!isImage(attachment.mimeType) && (\r\n                  <div className=\"shrink-0 rounded-lg bg-muted p-2\">\r\n                    <FileIcon className=\"h-5 w-5 text-muted-foreground\" />\r\n                  </div>\r\n                )}\r\n\r\n                {/* Details */}\r\n                <div className=\"flex-1 min-w-0 space-y-1\">\r\n                  <p className=\"text-sm font-medium truncate\" title={attachment.filename}>\r\n                    {attachment.filename}\r\n                  </p>\r\n                  <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\r\n                    <span>{formatFileSize(attachment.filesize)}</span>\r\n                    <span>ÔÇó</span>\r\n                    <span>\r\n                      {formatDistanceToNow(\r\n                        typeof attachment.uploadedAt === 'string'\r\n                          ? new Date(attachment.uploadedAt)\r\n                          : attachment.uploadedAt,\r\n                        { addSuffix: true, locale: dateLocale }\r\n                      )}\r\n                    </span>\r\n                  </div>\r\n                  {attachment.uploadedBy && (\r\n                    <p className=\"text-xs text-muted-foreground\">\r\n                      {t.by} {attachment.uploadedBy.name}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Actions */}\r\n                <div className=\"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity shrink-0\">\r\n                  {canPreview && (\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"icon\"\r\n                      className=\"h-7 w-7\"\r\n                      onClick={() => handlePreview(attachment)}\r\n                      title={t.tooltips?.preview}\r\n                    >\r\n                      <Eye className=\"h-3 w-3\" />\r\n                    </Button>\r\n                  )}\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    className=\"h-7 w-7\"\r\n                    onClick={() => handleDownload(attachment)}\r\n                    title={t.tooltips?.download}\r\n                  >\r\n                    <Download className=\"h-3 w-3\" />\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    className=\"h-7 w-7 text-destructive\"\r\n                    onClick={() => handleDelete(attachment)}\r\n                    title={t.tooltips?.delete}\r\n                  >\r\n                    <Trash2 className=\"h-3 w-3\" />\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      <Dialog\r\n        open={!!previewAttachment}\r\n        onOpenChange={(open) => !open && setPreviewAttachment(null)}\r\n      >\r\n        <DialogContent className=\"!max-w-none w-screen h-screen p-0 overflow-hidden bg-background/95 backdrop-blur-sm border-none shadow-none\">\r\n          <DialogTitle className=\"sr-only\">\r\n            {previewAttachment?.filename}\r\n          </DialogTitle>\r\n          {previewAttachment && (\r\n            <div className=\"relative w-full h-full flex items-center justify-center\">\r\n              {/* Close button */}\r\n              <Button\r\n                variant=\"secondary\"\r\n                size=\"icon\"\r\n                className=\"absolute top-4 right-4 rounded-full z-10 shadow-lg\"\r\n                onClick={() => setPreviewAttachment(null)}\r\n              >\r\n                <X className=\"h-5 w-5\" />\r\n              </Button>\r\n\r\n              {/* Image - Fill viewport */}\r\n              <img\r\n                src={getFullUrl(previewAttachment.url)}\r\n                alt={previewAttachment.filename}\r\n                className=\"absolute inset-0 w-full h-full object-contain\"\r\n              />\r\n\r\n              {/* Filename overlay */}\r\n              <div className=\"absolute bottom-6 left-1/2 transform -translate-x-1/2 bg-background/80 backdrop-blur-sm px-6 py-3 rounded-full border shadow-lg z-10\">\r\n                <p className=\"text-sm font-medium\">{previewAttachment.filename}</p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\task\\comment-thread.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'taskId' is defined but never used. Allowed unused args must match /^_/u.","line":86,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":86,"endColumn":9}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { Send, Edit2, Trash2, MoreVertical } from 'lucide-react';\r\nimport { Button } from '../ui/button.js';\r\nimport { Textarea } from '../ui/textarea.js';\r\nimport { Avatar, AvatarFallback, AvatarImage } from '../ui/avatar.js';\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from '../ui/dropdown-menu.js';\r\nimport { formatDistanceToNow } from 'date-fns';\r\nimport { enUS, es } from 'date-fns/locale';\r\nimport { MentionTextarea } from '../ui/mention-textarea.js';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport remarkGfm from 'remark-gfm';\r\n\r\ninterface Comment {\r\n  id: string | number;\r\n  content: string;\r\n  createdAt: Date | string;\r\n  updatedAt?: Date | string;\r\n  author: {\r\n    id: string;\r\n    name: string;\r\n    email?: string;\r\n    image?: string;\r\n  };\r\n}\r\n\r\ninterface MentionUser {\r\n  id: string;\r\n  name: string;\r\n  image?: string;\r\n}\r\n\r\ninterface CommentThreadProps {\r\n  taskId: string;\r\n  comments?: Comment[];\r\n  currentUserId?: string;\r\n  users?: MentionUser[];\r\n  onCreate?: (content: string) => Promise<void> | void;\r\n  onUpdate?: (commentId: string, content: string) => Promise<void> | void;\r\n  onDelete?: (commentId: string) => Promise<void> | void;\r\n  locale?: string;\r\n  labels?: {\r\n    title?: string;\r\n    edited?: string;\r\n    placeholder?: string;\r\n    shortcut?: string;\r\n    empty?: string;\r\n    confirmDelete?: string;\r\n    actions?: {\r\n      edit?: string;\r\n      delete?: string;\r\n      save?: string;\r\n      saving?: string;\r\n      cancel?: string;\r\n      send?: string;\r\n      sending?: string;\r\n    };\r\n  };\r\n}\r\n\r\nconst DEFAULT_LABELS = {\r\n  title: 'Comments',\r\n  edited: '(edited)',\r\n  placeholder: 'Write a comment...',\r\n  shortcut: 'Press Ctrl+Enter to send',\r\n  empty: 'No comments yet',\r\n  confirmDelete: 'Are you sure you want to delete this comment?',\r\n  actions: {\r\n    edit: 'Edit',\r\n    delete: 'Delete',\r\n    save: 'Save',\r\n    saving: 'Saving...',\r\n    cancel: 'Cancel',\r\n    send: 'Send',\r\n    sending: 'Sending...',\r\n  },\r\n};\r\n\r\nexport function CommentThread({\r\n  taskId,\r\n  comments = [],\r\n  currentUserId,\r\n  users = [],\r\n  onCreate,\r\n  onUpdate,\r\n  onDelete,\r\n  locale = 'en',\r\n  labels = {},\r\n}: CommentThreadProps) {\r\n  const t = {\r\n    ...DEFAULT_LABELS,\r\n    ...labels,\r\n    actions: { ...DEFAULT_LABELS.actions, ...labels.actions },\r\n  };\r\n\r\n  const [newComment, setNewComment] = useState('');\r\n  const [editingId, setEditingId] = useState<string | number | null>(null);\r\n  const [editContent, setEditContent] = useState('');\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  // Helper to wrap promise with loading state\r\n  const handleAction = async (action: () => Promise<void> | void) => {\r\n    setIsSubmitting(true);\r\n    try {\r\n      await action();\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleCreateComment = () => {\r\n    if (!newComment.trim() || !onCreate) return;\r\n    handleAction(async () => {\r\n      await onCreate(newComment);\r\n      setNewComment('');\r\n    });\r\n  };\r\n\r\n  const handleUpdateComment = (commentId: string | number) => {\r\n    if (!editContent.trim() || !onUpdate) return;\r\n    handleAction(async () => {\r\n      await onUpdate(String(commentId), editContent);\r\n      setEditingId(null);\r\n      setEditContent('');\r\n    });\r\n  };\r\n\r\n  const handleDeleteComment = (commentId: string | number) => {\r\n    if (!onDelete) return;\r\n    if (window.confirm(t.confirmDelete)) {\r\n      // Don't set global submitting for delete, maybe? or yes.\r\n      // onDelete is usually fast.\r\n      try {\r\n         onDelete(String(commentId));\r\n      } catch(e) { console.error(e); }\r\n    }\r\n  };\r\n\r\n  const handleStartEdit = (comment: Comment) => {\r\n    setEditingId(comment.id);\r\n    setEditContent(comment.content);\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setEditingId(null);\r\n    setEditContent('');\r\n  };\r\n\r\n  const getInitials = (name: string) => {\r\n    return name\r\n      .split(' ')\r\n      .map((n) => n[0])\r\n      .join('')\r\n      .toUpperCase()\r\n      .slice(0, 2);\r\n  };\r\n\r\n  const formatTimestamp = (date: Date | string) => {\r\n    const dateObj = typeof date === 'string' ? new Date(date) : date;\r\n    const dateLocale = locale === 'es' ? es : enUS;\r\n    return formatDistanceToNow(dateObj, { addSuffix: true, locale: dateLocale });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-sm font-semibold\">\r\n          {t.title} {comments.length > 0 && `(${comments.length})`}\r\n        </h3>\r\n      </div>\r\n\r\n      {/* Comments List */}\r\n      <div className=\"space-y-4\">\r\n        {comments.map((comment) => {\r\n          const isEditing = editingId === comment.id;\r\n          const isOwner = currentUserId && comment.author.id === currentUserId;\r\n\r\n          return (\r\n            <div\r\n              key={comment.id}\r\n              className=\"flex gap-3 rounded-lg border p-4 hover:bg-accent/50 transition-colors\"\r\n            >\r\n              {/* Avatar */}\r\n              <Avatar className=\"h-8 w-8 shrink-0\">\r\n                <AvatarImage src={comment.author.image} alt={comment.author.name} />\r\n                <AvatarFallback className=\"text-xs\">\r\n                  {getInitials(comment.author.name)}\r\n                </AvatarFallback>\r\n              </Avatar>\r\n\r\n              {/* Content */}\r\n              <div className=\"flex-1 min-w-0 space-y-2\">\r\n                {/* Header */}\r\n                <div className=\"flex items-start justify-between gap-2\">\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <p className=\"text-sm font-medium truncate\">{comment.author.name}</p>\r\n                    <p className=\"text-xs text-muted-foreground\">\r\n                      {formatTimestamp(comment.createdAt)}\r\n                      {comment.updatedAt && comment.updatedAt !== comment.createdAt && (\r\n                        <span className=\"ml-1\">{t.edited}</span>\r\n                      )}\r\n                    </p>\r\n                  </div>\r\n\r\n                  {/* Actions Menu */}\r\n                  {isOwner && !isEditing && (\r\n                    <DropdownMenu>\r\n                      <DropdownMenuTrigger asChild>\r\n                        <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6 shrink-0\">\r\n                          <MoreVertical className=\"h-3 w-3\" />\r\n                        </Button>\r\n                      </DropdownMenuTrigger>\r\n                      <DropdownMenuContent align=\"end\">\r\n                        <DropdownMenuItem onClick={() => handleStartEdit(comment)}>\r\n                          <Edit2 className=\"mr-2 h-3 w-3\" />\r\n                          {t.actions.edit}\r\n                        </DropdownMenuItem>\r\n                        <DropdownMenuItem\r\n                          onClick={() => handleDeleteComment(comment.id)}\r\n                          className=\"text-destructive\"\r\n                        >\r\n                          <Trash2 className=\"mr-2 h-3 w-3\" />\r\n                          {t.actions.delete}\r\n                        </DropdownMenuItem>\r\n                      </DropdownMenuContent>\r\n                    </DropdownMenu>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Comment Content */}\r\n                {isEditing ? (\r\n                  <div className=\"space-y-2\">\r\n                    <Textarea\r\n                      value={editContent}\r\n                      onChange={(e) => setEditContent(e.target.value)}\r\n                      className=\"min-h-[80px] resize-none\"\r\n                      autoFocus\r\n                    />\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Button\r\n                        size=\"sm\"\r\n                        onClick={() => handleUpdateComment(comment.id)}\r\n                        disabled={!editContent.trim() || isSubmitting}\r\n                      >\r\n                        {isSubmitting ? t.actions.saving : t.actions.save}\r\n                      </Button>\r\n                      <Button size=\"sm\" variant=\"outline\" onClick={handleCancelEdit}>\r\n                        {t.actions.cancel}\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-sm prose prose-sm dark:prose-invert max-w-none break-words [&>p]:mb-0 [&>p]:mt-0\">\r\n                    <ReactMarkdown remarkPlugins={[remarkGfm]}>\r\n                      {comment.content}\r\n                    </ReactMarkdown>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        {/* Empty State */}\r\n        {comments.length === 0 && (\r\n          <div className=\"text-center py-8 text-sm text-muted-foreground border border-dashed rounded-lg\">\r\n            {t.empty}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* New Comment Form */}\r\n      <div className=\"space-y-2\">\r\n        <MentionTextarea\r\n          value={newComment}\r\n          onChange={(e) => setNewComment(e.target.value)}\r\n          placeholder={t.placeholder}\r\n          className=\"min-h-[100px] resize-none\"\r\n          users={users}\r\n          onKeyDown={(e) => {\r\n            if (e.key === 'Enter' && (e.metaKey || e.ctrlKey)) {\r\n              handleCreateComment();\r\n            }\r\n          }}\r\n        />\r\n        <div className=\"flex items-center justify-between\">\r\n          <p className=\"text-xs text-muted-foreground\">\r\n            {t.shortcut}\r\n          </p>\r\n          <Button\r\n            onClick={handleCreateComment}\r\n            disabled={!newComment.trim() || isSubmitting}\r\n            size=\"sm\"\r\n          >\r\n            <Send className=\"mr-2 h-4 w-4\" />\r\n            {isSubmitting ? t.actions.sending : t.actions.send}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\task\\create-task-dialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":318,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":318,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11180,11183],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11180,11183],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { z } from 'zod';\r\nimport { createTaskSchema } from '@ordo-todo/core';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '../ui/dialog.js';\r\nimport { Label } from '../ui/label.js';\r\nimport { Input } from '../ui/input.js';\r\nimport { Textarea } from '../ui/textarea.js';\r\nimport { Button } from '../ui/button.js';\r\nimport { EmptyState } from '../ui/empty-state.js';\r\nimport { Briefcase, Sparkles, Calendar as CalendarIcon, Flag, Clock } from 'lucide-react';\r\nimport { RecurrenceSelector, RecurrenceValue } from './recurrence-selector.js';\r\n\r\ninterface ProjectOption {\r\n  id: string;\r\n  name: string;\r\n}\r\n\r\ninterface CreateTaskFormData {\r\n  title: string;\r\n  description?: string;\r\n  projectId: string;\r\n  priority: string;\r\n  dueDate?: string;\r\n  estimatedMinutes?: number;\r\n  recurrence?: RecurrenceValue;\r\n}\r\n\r\ninterface CreateTaskDialogProps {\r\n  /** Whether dialog is open */\r\n  open: boolean;\r\n  /** Called when open state changes */\r\n  onOpenChange: (open: boolean) => void;\r\n  /** Pre-selected project ID */\r\n  projectId?: string;\r\n  /** Available projects */\r\n  projects?: ProjectOption[];\r\n  /** Whether projects are loading */\r\n  isLoadingProjects?: boolean;\r\n  /** Called to request creating a new project (empty state action) */\r\n  onRequestCreateProject?: () => void;\r\n  /** Called when form is submitted */\r\n  onSubmit: (data: CreateTaskFormData) => Promise<void> | void;\r\n  /** Called to generate AI description */\r\n  onGenerateAIDescription?: (title: string) => Promise<string>;\r\n  /** Whether submission is pending */\r\n  isPending?: boolean;\r\n  /** Custom labels */\r\n  labels?: {\r\n    title?: string;\r\n    description?: string;\r\n    aiMagic?: string;\r\n    aiGenerating?: string;\r\n    formTitle?: string;\r\n    formTitlePlaceholder?: string;\r\n    formProject?: string;\r\n    formSelectProject?: string;\r\n    formDescription?: string;\r\n    formDescriptionPlaceholder?: string;\r\n    formPriority?: string;\r\n    formEstimatedMinutes?: string;\r\n    formDueDate?: string;\r\n    priorities?: { low: string; medium: string; high: string };\r\n    buttons?: { cancel: string; create: string; creating: string };\r\n    emptyState?: { title: string; description: string; action: string };\r\n    validation?: { titleRequired: string; projectRequired: string };\r\n  };\r\n}\r\n\r\nconst DEFAULT_LABELS = {\r\n  title: 'Create Task',\r\n  description: 'Add a new task to your project.',\r\n  aiMagic: 'AI Magic',\r\n  aiGenerating: 'Generating...',\r\n  formTitle: 'Title',\r\n  formTitlePlaceholder: 'What needs to be done?',\r\n  formProject: 'Project',\r\n  formSelectProject: 'Select a project',\r\n  formDescription: 'Description',\r\n  formDescriptionPlaceholder: 'Add details...',\r\n  formPriority: 'Priority',\r\n  formEstimatedMinutes: 'Est. Minutes',\r\n  formDueDate: 'Due Date',\r\n  priorities: { low: 'Low', medium: 'Medium', high: 'High' },\r\n  buttons: { cancel: 'Cancel', create: 'Create Task', creating: 'Creating...' },\r\n  emptyState: {\r\n    title: 'No Projects Found',\r\n    description: 'You need a project to create tasks.',\r\n    action: 'Create Project',\r\n  },\r\n  validation: { titleRequired: 'Title is required', projectRequired: 'Project is required' },\r\n};\r\n\r\nexport function CreateTaskDialog({\r\n  open,\r\n  onOpenChange,\r\n  projectId,\r\n  projects = [],\r\n  isLoadingProjects = false,\r\n  onRequestCreateProject,\r\n  onSubmit,\r\n  onGenerateAIDescription,\r\n  isPending = false,\r\n  labels = {},\r\n}: CreateTaskDialogProps) {\r\n  const t = { ...DEFAULT_LABELS, ...labels };\r\n  const [isGenerating, setIsGenerating] = useState(false);\r\n\r\n  // Schema extension for form validation\r\n  const formSchema = createTaskSchema.extend({\r\n    title: z.string().min(1, t.validation.titleRequired),\r\n    projectId: z.string().min(1, t.validation.projectRequired),\r\n    recurrence: z.object({\r\n      pattern: z.enum(['DAILY', 'WEEKLY', 'MONTHLY', 'YEARLY', 'CUSTOM']),\r\n      interval: z.number().optional(),\r\n      daysOfWeek: z.array(z.number()).optional(),\r\n      dayOfMonth: z.number().optional(),\r\n      endDate: z.date().optional(),\r\n    }).optional(),\r\n  });\r\n\r\n  type CreateTaskForm = z.infer<typeof formSchema>;\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    reset,\r\n    setValue,\r\n    watch,\r\n    formState: { errors },\r\n  } = useForm<CreateTaskForm>({\r\n    resolver: zodResolver(formSchema),\r\n    defaultValues: {\r\n      priority: 'MEDIUM',\r\n      projectId: projectId || '',\r\n      recurrence: undefined,\r\n    },\r\n  });\r\n\r\n  const currentPriority = watch('priority');\r\n\r\n  const handleFormSubmit = async (data: CreateTaskForm) => {\r\n    // Adapter for form data to output data\r\n    const outputData: CreateTaskFormData = {\r\n      title: data.title,\r\n      description: data.description || undefined,\r\n      projectId: data.projectId,\r\n      priority: data.priority,\r\n      estimatedMinutes: data.estimatedMinutes || undefined,\r\n      dueDate: data.dueDate ? new Date(data.dueDate).toISOString() : undefined,\r\n      recurrence: data.recurrence as RecurrenceValue | undefined,\r\n    };\r\n\r\n    try {\r\n      await onSubmit(outputData);\r\n      reset();\r\n      onOpenChange(false);\r\n    } catch (error) {\r\n       console.error(error);\r\n    }\r\n  };\r\n\r\n  const handleAIMagic = async () => {\r\n    const title = watch('title');\r\n    if (!title || !onGenerateAIDescription) return;\r\n\r\n    setIsGenerating(true);\r\n    try {\r\n      const description = await onGenerateAIDescription(title);\r\n      setValue('description', description);\r\n    } catch (err) {\r\n      console.error(err);\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  };\r\n\r\n  const priorities = [\r\n    { value: 'LOW', label: t.priorities.low, bg: 'bg-blue-500', border: 'border-blue-500' },\r\n    { value: 'MEDIUM', label: t.priorities.medium, bg: 'bg-yellow-500', border: 'border-yellow-500' },\r\n    { value: 'HIGH', label: t.priorities.high, bg: 'bg-red-500', border: 'border-red-500' },\r\n  ];\r\n\r\n  const showEmptyState = !projectId && !isLoadingProjects && projects.length === 0;\r\n\r\n  if (showEmptyState) {\r\n    return (\r\n      <Dialog open={open} onOpenChange={onOpenChange}>\r\n        <DialogContent className=\"sm:max-w-[550px] gap-0 p-0 overflow-hidden bg-background border-border\">\r\n          <div className=\"p-6\">\r\n            <EmptyState\r\n              icon={Briefcase}\r\n              title={t.emptyState.title}\r\n              description={t.emptyState.description}\r\n              actionLabel={t.emptyState.action}\r\n              onAction={() => {\r\n                 onOpenChange(false);\r\n                 onRequestCreateProject?.();\r\n              }}\r\n            />\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"sm:max-w-[550px] gap-0 p-0 overflow-hidden bg-background border-border\">\r\n        <div className=\"p-6 space-y-6\">\r\n          <DialogHeader>\r\n            <div className=\"flex items-center justify-between\">\r\n              <DialogTitle className=\"text-xl font-semibold text-foreground\">\r\n                {t.title}\r\n              </DialogTitle>\r\n              {onGenerateAIDescription && (\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleAIMagic}\r\n                  disabled={isGenerating}\r\n                  className=\"flex items-center gap-2 px-3 py-1.5 text-xs font-medium text-primary bg-primary/10 rounded-full hover:bg-primary/20 transition-colors duration-200 disabled:opacity-50\"\r\n                >\r\n                  <Sparkles\r\n                    className={`w-3.5 h-3.5 ${\r\n                      isGenerating ? 'animate-spin' : 'animate-pulse'\r\n                    }`}\r\n                  />\r\n                  {isGenerating ? t.aiGenerating : t.aiMagic}\r\n                </button>\r\n              )}\r\n            </div>\r\n            <DialogDescription className=\"text-muted-foreground\">\r\n              {t.description}\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n\r\n          <form\r\n            onSubmit={(e) => {\r\n              e.preventDefault();\r\n              handleSubmit(handleFormSubmit)(e);\r\n            }}\r\n            className=\"space-y-6\"\r\n          >\r\n            {/* Title */}\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"title\" className=\"text-sm font-medium text-foreground\">\r\n                {t.formTitle}\r\n              </Label>\r\n              <Input\r\n                id=\"title\"\r\n                {...register('title')}\r\n                placeholder={t.formTitlePlaceholder}\r\n                autoFocus\r\n              />\r\n              {errors.title && <p className=\"text-sm text-destructive\">{errors.title.message}</p>}\r\n            </div>\r\n\r\n            {/* Project Selection (if not provided) */}\r\n            {!projectId && (\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"projectId\" className=\"text-sm font-medium text-foreground\">\r\n                  {t.formProject}\r\n                </Label>\r\n                <select\r\n                  id=\"projectId\"\r\n                  {...register('projectId')}\r\n                  className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\"\r\n                >\r\n                  <option value=\"\">{t.formSelectProject}</option>\r\n                  {projects.map((project) => (\r\n                    <option key={project.id} value={project.id}>\r\n                      {project.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n                {errors.projectId && (\r\n                  <p className=\"text-sm text-red-500\">{errors.projectId.message}</p>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Hidden project ID if provided */}\r\n            {projectId && <input type=\"hidden\" {...register('projectId')} />}\r\n\r\n            {/* Description */}\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"description\" className=\"text-sm font-medium text-foreground\">\r\n                {t.formDescription}\r\n              </Label>\r\n              <Textarea\r\n                id=\"description\"\r\n                {...register('description')}\r\n                className=\"min-h-[100px] resize-none\"\r\n                placeholder={t.formDescriptionPlaceholder}\r\n              />\r\n            </div>\r\n\r\n            {/* Priority */}\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-sm font-medium text-foreground\">{t.formPriority}</Label>\r\n              <div className=\"flex gap-2\">\r\n                {priorities.map((p) => {\r\n                  const isSelected = currentPriority === p.value;\r\n                  return (\r\n                    <button\r\n                      key={p.value}\r\n                      type=\"button\"\r\n                      onClick={() => setValue('priority', p.value as any)}\r\n                      className={`flex-1 flex items-center justify-center gap-1.5 py-2.5 rounded-lg text-xs font-medium transition-colors duration-200 ${\r\n                        isSelected\r\n                          ? `${p.bg} text-white shadow-md shadow-black/10 scale-105`\r\n                          : 'bg-muted/50 text-muted-foreground hover:bg-muted'\r\n                      }`}\r\n                    >\r\n                      {isSelected && <Flag className=\"w-3 h-3 fill-current\" />}\r\n                      {p.label}\r\n                    </button>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              {/* Estimated Minutes */}\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"estimatedMinutes\" className=\"text-sm font-medium text-foreground\">\r\n                  {t.formEstimatedMinutes}\r\n                </Label>\r\n                <div className=\"relative\">\r\n                  <Input\r\n                    type=\"number\"\r\n                    id=\"estimatedMinutes\"\r\n                    {...register('estimatedMinutes', { valueAsNumber: true })}\r\n                    min={1}\r\n                    placeholder=\"30\"\r\n                    className=\"pr-10\"\r\n                  />\r\n                  <Clock className=\"absolute right-3 top-2.5 h-4 w-4 text-muted-foreground pointer-events-none\" />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Due Date */}\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"dueDate\" className=\"text-sm font-medium text-foreground\">\r\n                  {t.formDueDate}\r\n                </Label>\r\n                <div className=\"relative\">\r\n                  <Input\r\n                    type=\"date\"\r\n                    id=\"dueDate\"\r\n                    {...register('dueDate')}\r\n                    autoComplete=\"off\"\r\n                    className=\"pr-10\"\r\n                    onKeyDown={(e) => {\r\n                      if (e.key === 'Enter') {\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n                      }\r\n                    }}\r\n                  />\r\n                  <CalendarIcon className=\"absolute right-3 top-2.5 h-4 w-4 text-muted-foreground pointer-events-none\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Recurrence */}\r\n            <RecurrenceSelector\r\n              value={watch('recurrence')}\r\n              onChange={(val) => setValue('recurrence', val)}\r\n            />\r\n\r\n            <DialogFooter className=\"pt-2\">\r\n              <Button\r\n                type=\"button\"\r\n                variant=\"ghost\"\r\n                onClick={() => onOpenChange(false)}\r\n              >\r\n                {t.buttons.cancel}\r\n              </Button>\r\n              <Button\r\n                type=\"submit\"\r\n                disabled={isPending}\r\n              >\r\n                {isPending ? t.buttons.creating : t.buttons.create}\r\n              </Button>\r\n            </DialogFooter>\r\n          </form>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\task\\file-upload.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'taskId' is defined but never used. Allowed unused args must match /^_/u.","line":81,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":81,"endColumn":9}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useCallback, useEffect } from 'react';\r\nimport { Upload, File, X, Image as ImageIcon, FileText, Film, Music } from 'lucide-react';\r\nimport { cn } from '../../utils/index.js';\r\nimport { Button } from '../ui/button.js';\r\nimport { Progress } from '../ui/progress.js';\r\n\r\ninterface FileUploadProps {\r\n  taskId: string;\r\n  onUpload?: (\r\n    file: File,\r\n    onProgress: (progress: number) => void\r\n  ) => Promise<void>;\r\n  onUploadComplete?: () => void;\r\n  maxFileSize?: number; // in MB\r\n  acceptedFileTypes?: string[];\r\n  filesToUpload?: File[];\r\n  onFilesHandled?: () => void;\r\n  labels?: {\r\n    uploading?: string;\r\n    dropzone?: {\r\n      dragging?: string;\r\n      idle?: string;\r\n      maxSize?: (size: number) => string;\r\n    };\r\n    errors?: {\r\n      tooLarge?: (max: number) => string;\r\n      invalidType?: string;\r\n      uploadError?: (msg: string) => string;\r\n    };\r\n    success?: {\r\n        uploaded?: (name: string) => string;\r\n    };\r\n    info?: {\r\n        cancelled?: (name: string) => string;\r\n    };\r\n  };\r\n}\r\n\r\nconst DEFAULT_MAX_SIZE = 10; // 10MB\r\nconst DEFAULT_ACCEPTED_TYPES = [\r\n  'image/*',\r\n  'application/pdf',\r\n  'application/msword',\r\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n  'application/vnd.ms-excel',\r\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n  'text/*',\r\n];\r\n\r\nconst FILE_ICONS = {\r\n  image: ImageIcon,\r\n  video: Film,\r\n  audio: Music,\r\n  document: FileText,\r\n  default: File,\r\n};\r\n\r\nconst DEFAULT_LABELS = {\r\n  uploading: 'Uploading...',\r\n  dropzone: {\r\n    dragging: 'Drop files here',\r\n    idle: 'Drag & drop files here, or click to select',\r\n    maxSize: (size: number) => `Max file size: ${size}MB`,\r\n  },\r\n  errors: {\r\n    tooLarge: (max: number) => `File exceeds maximum size of ${max}MB`,\r\n    invalidType: 'File type not accepted',\r\n    uploadError: (msg: string) => `Upload failed: ${msg}`,\r\n  },\r\n  success: {\r\n    uploaded: (name: string) => `Uploaded ${name}`,\r\n  },\r\n  info: {\r\n    cancelled: (name: string) => `Cancelled upload of ${name}`,\r\n  },\r\n};\r\n\r\nexport function FileUpload({\r\n  taskId,\r\n  onUpload,\r\n  onUploadComplete,\r\n  maxFileSize = DEFAULT_MAX_SIZE,\r\n  acceptedFileTypes = DEFAULT_ACCEPTED_TYPES,\r\n  filesToUpload = [],\r\n  onFilesHandled,\r\n  labels = {},\r\n}: FileUploadProps) {\r\n  const t = {\r\n    ...DEFAULT_LABELS,\r\n    ...labels,\r\n    dropzone: { ...DEFAULT_LABELS.dropzone, ...labels.dropzone },\r\n    errors: { ...DEFAULT_LABELS.errors, ...labels.errors },\r\n    success: { ...DEFAULT_LABELS.success, ...labels.success },\r\n    info: { ...DEFAULT_LABELS.info, ...labels.info },\r\n  };\r\n\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [uploadingFiles, setUploadingFiles] = useState<\r\n    Array<{ id: string; name: string; progress: number; error?: string }>\r\n  >([]);\r\n\r\n  const getFileType = (file: File): keyof typeof FILE_ICONS => {\r\n    if (file.type.startsWith('image/')) return 'image';\r\n    if (file.type.startsWith('video/')) return 'video';\r\n    if (file.type.startsWith('audio/')) return 'audio';\r\n    if (\r\n      file.type.includes('pdf') ||\r\n      file.type.includes('document') ||\r\n      file.type.includes('word') ||\r\n      file.type.includes('excel') ||\r\n      file.type.includes('text')\r\n    ) {\r\n      return 'document';\r\n    }\r\n    return 'default';\r\n  };\r\n\r\n  const validateFile = (file: File): string | null => {\r\n    // Check file size\r\n    const fileSizeMB = file.size / (1024 * 1024);\r\n    if (fileSizeMB > maxFileSize) {\r\n      return t.errors.tooLarge(maxFileSize);\r\n    }\r\n\r\n    // Check file type\r\n    const isAccepted = acceptedFileTypes.some((type) => {\r\n      if (type.endsWith('/*')) {\r\n        const category = type.split('/')[0];\r\n        return file.type.startsWith(category + '/');\r\n      }\r\n      return file.type === type;\r\n    });\r\n\r\n    if (!isAccepted) {\r\n      return t.errors.invalidType;\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  const uploadFile = async (file: File) => {\r\n    const error = validateFile(file);\r\n    if (error) {\r\n      console.error(error); // Parent should handle toast if needed or we could expose onError\r\n      return;\r\n    }\r\n\r\n    if (!onUpload) return;\r\n\r\n    // Generate unique ID for this upload\r\n    const uploadId = `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n\r\n    // Add to uploading files with unique ID\r\n    setUploadingFiles((prev) => [\r\n      ...prev,\r\n      { id: uploadId, name: file.name, progress: 0 },\r\n    ]);\r\n\r\n    try {\r\n      await onUpload(file, (progress) => {\r\n        setUploadingFiles((prev) =>\r\n          prev.map((f) => (f.id === uploadId ? { ...f, progress } : f))\r\n        );\r\n      });\r\n\r\n      // Scan complete\r\n      setUploadingFiles((prev) => prev.filter((f) => f.id !== uploadId));\r\n      onUploadComplete?.();\r\n    } catch (err: unknown) {\r\n      console.error('Upload error:', err);\r\n      const errorMessage = err instanceof Error ? err.message : 'Unknown error';\r\n      setUploadingFiles((prev) =>\r\n        prev.map((f) =>\r\n          f.id === uploadId ? { ...f, error: errorMessage } : f\r\n        )\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleFiles = (files: FileList | null) => {\r\n    if (!files) return;\r\n\r\n    Array.from(files).forEach((file) => {\r\n      uploadFile(file);\r\n    });\r\n  };\r\n\r\n  // Handle initial files passed from parent (e.g. via drag & drop on the panel)\r\n  useEffect(() => {\r\n    if (filesToUpload.length > 0) {\r\n      // Create a dummy FileList-like object or just iterate array\r\n      // handleFiles expects FileList, but we iterate array inside\r\n      filesToUpload.forEach(f => uploadFile(f));\r\n      onFilesHandled?.();\r\n    }\r\n     \r\n  }, [filesToUpload]);\r\n\r\n  const handleDragOver = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragging(true);\r\n  }, []);\r\n\r\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragging(false);\r\n  }, []);\r\n\r\n  const handleDrop = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragging(false);\r\n    handleFiles(e.dataTransfer.files);\r\n  }, []);\r\n\r\n  const handleFileInput = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    handleFiles(e.target.files);\r\n    e.target.value = ''; // Reset input\r\n  };\r\n\r\n  const cancelUpload = (uploadId: string) => {\r\n    setUploadingFiles((prev) => prev.filter((f) => f.id !== uploadId));\r\n    // Implementation of real cancellation would require AbortController support in onUpload\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Drop Zone */}\r\n      <div\r\n        className={cn(\r\n          'relative rounded-lg border-2 border-dashed transition-all',\r\n          'hover:border-primary/50 hover:bg-accent/50',\r\n          isDragging && 'border-primary bg-accent/50 scale-[1.02]',\r\n          'p-8 text-center cursor-pointer'\r\n        )}\r\n        onClick={() => document.getElementById('file-input')?.click()}\r\n        onDragOver={handleDragOver} // Added\r\n        onDragLeave={handleDragLeave} // Added\r\n        onDrop={handleDrop} // Added\r\n      >\r\n        <input\r\n          id=\"file-input\"\r\n          type=\"file\"\r\n          multiple\r\n          accept={acceptedFileTypes.join(',')}\r\n          onChange={handleFileInput}\r\n          className=\"hidden\"\r\n        />\r\n\r\n        <div className=\"flex flex-col items-center gap-3\">\r\n          <div\r\n            className={cn(\r\n              'rounded-full p-4 transition-colors',\r\n              isDragging ? 'bg-primary/20' : 'bg-muted'\r\n            )}\r\n          >\r\n            <Upload\r\n              className={cn(\r\n                'h-8 w-8 transition-colors',\r\n                isDragging ? 'text-primary' : 'text-muted-foreground'\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"space-y-1\">\r\n            <p className=\"text-sm font-medium\">\r\n              {isDragging ? t.dropzone.dragging : t.dropzone.idle}\r\n            </p>\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              {t.dropzone.maxSize(maxFileSize)}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Uploading Files */}\r\n      {uploadingFiles.length > 0 && (\r\n        <div className=\"space-y-2\">\r\n          <p className=\"text-sm font-semibold\">{t.uploading}</p>\r\n          {uploadingFiles.map((file) => {\r\n            const FileIcon = FILE_ICONS[getFileType({ type: 'application/octet-stream', name: file.name } as File)] || File;\r\n\r\n            return (\r\n              <div\r\n                key={file.id}\r\n                className=\"flex items-center gap-3 rounded-lg border p-3\"\r\n              >\r\n                <div className=\"h-5 w-5 shrink-0 text-muted-foreground\">\r\n                    <FileIcon className=\"h-5 w-5\" />\r\n                </div>\r\n\r\n                <div className=\"flex-1 min-w-0 space-y-1\">\r\n                  <div className=\"flex items-center justify-between gap-2\">\r\n                    <p className=\"text-sm font-medium truncate\">{file.name}</p>\r\n                    {!file.error && (\r\n                      <span className=\"text-xs text-muted-foreground shrink-0\">\r\n                        {file.progress}%\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n\r\n                  {file.error ? (\r\n                    <p className=\"text-xs text-destructive\">{file.error}</p>\r\n                  ) : (\r\n                    <Progress value={file.progress} className=\"h-1\" />\r\n                  )}\r\n                </div>\r\n\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"icon\"\r\n                  className=\"h-6 w-6 shrink-0\"\r\n                  onClick={() => cancelUpload(file.id)}\r\n                >\r\n                  <X className=\"h-3 w-3\" />\r\n                </Button>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\task\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\task\\recurrence-selector.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":109,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":109,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3289,3292],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3289,3292],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '../ui/select.js';\r\nimport { Label } from '../ui/label.js';\r\nimport { Checkbox } from '../ui/checkbox.js';\r\nimport { DatePicker } from '../ui/date-picker.js';\r\n\r\nexport interface RecurrenceValue {\r\n  pattern: 'DAILY' | 'WEEKLY' | 'MONTHLY' | 'YEARLY' | 'CUSTOM';\r\n  interval?: number;\r\n  daysOfWeek?: number[];\r\n  dayOfMonth?: number;\r\n  endDate?: Date;\r\n}\r\n\r\ninterface RecurrenceSelectorProps {\r\n  value?: RecurrenceValue;\r\n  onChange: (value?: RecurrenceValue) => void;\r\n  labels?: {\r\n    enable?: string;\r\n    frequency?: string;\r\n    daily?: string;\r\n    weekly?: string;\r\n    monthly?: string;\r\n    yearly?: string;\r\n    weekDays?: string;\r\n    endDate?: string;\r\n    daysShort?: string[]; // ['D', 'L', 'M', ...]\r\n  };\r\n}\r\n\r\nconst DEFAULT_LABELS = {\r\n  enable: 'Repeat task',\r\n  frequency: 'Frequency',\r\n  daily: 'Daily',\r\n  weekly: 'Weekly',\r\n  monthly: 'Monthly',\r\n  yearly: 'Yearly',\r\n  weekDays: 'Days of week',\r\n  endDate: 'End date (Optional)',\r\n  daysShort: ['S', 'M', 'T', 'W', 'T', 'F', 'S'],\r\n};\r\n\r\nexport function RecurrenceSelector({ value, onChange, labels = {} }: RecurrenceSelectorProps) {\r\n  const t = { ...DEFAULT_LABELS, ...labels };\r\n  \r\n  const [enabled, setEnabled] = useState(!!value);\r\n  const [pattern, setPattern] = useState<RecurrenceValue['pattern']>(value?.pattern || 'DAILY');\r\n  const [interval, setInterval] = useState(value?.interval || 1);\r\n  const [daysOfWeek, setDaysOfWeek] = useState<number[]>(value?.daysOfWeek || []);\r\n  const [endDate, setEndDate] = useState<Date | undefined>(value?.endDate);\r\n\r\n  // Sync state with value prop if it changes externally (optional but good practice)\r\n  useEffect(() => {\r\n    if (value) {\r\n      setEnabled(true);\r\n      setPattern(value.pattern);\r\n      if (value.interval) setInterval(value.interval);\r\n      if (value.daysOfWeek) setDaysOfWeek(value.daysOfWeek);\r\n      if (value.endDate) setEndDate(value.endDate);\r\n    }\r\n  }, [value?.pattern]); // Simplified dependency check\r\n\r\n  useEffect(() => {\r\n    if (enabled) {\r\n      onChange({\r\n        pattern,\r\n        interval: pattern === 'CUSTOM' ? interval : 1,\r\n        daysOfWeek: pattern === 'WEEKLY' ? daysOfWeek : undefined,\r\n        endDate,\r\n      });\r\n    } else {\r\n      onChange(undefined);\r\n    }\r\n  }, [enabled, pattern, interval, daysOfWeek, endDate]);\r\n\r\n  const toggleDay = (day: number) => {\r\n    if (daysOfWeek.includes(day)) {\r\n      setDaysOfWeek(daysOfWeek.filter((d) => d !== day));\r\n    } else {\r\n      setDaysOfWeek([...daysOfWeek, day]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center space-x-2\">\r\n        <Checkbox\r\n          id=\"recurrence-enabled\"\r\n          checked={enabled}\r\n          onCheckedChange={(checked) => setEnabled(!!checked)}\r\n        />\r\n        <Label htmlFor=\"recurrence-enabled\">{t.enable}</Label>\r\n      </div>\r\n\r\n      {enabled && (\r\n        <div className=\"space-y-4 pl-6 border-l-2 border-muted ml-1\">\r\n          <div className=\"grid gap-2\">\r\n            <Label>{t.frequency}</Label>\r\n            <Select\r\n              value={pattern}\r\n              onValueChange={(val) => setPattern(val as any)}\r\n            >\r\n              <SelectTrigger>\r\n                <SelectValue />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"DAILY\">{t.daily}</SelectItem>\r\n                <SelectItem value=\"WEEKLY\">{t.weekly}</SelectItem>\r\n                <SelectItem value=\"MONTHLY\">{t.monthly}</SelectItem>\r\n                <SelectItem value=\"YEARLY\">{t.yearly}</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          {pattern === 'WEEKLY' && (\r\n            <div className=\"grid gap-2\">\r\n              <Label>{t.weekDays}</Label>\r\n              <div className=\"flex gap-2 flex-wrap\">\r\n                {t.daysShort?.map((day, index) => (\r\n                  <div key={index} className=\"flex items-center space-x-1\">\r\n                    <Checkbox\r\n                      id={`day-${index}`}\r\n                      checked={daysOfWeek.includes(index)}\r\n                      onCheckedChange={() => toggleDay(index)}\r\n                    />\r\n                    <Label htmlFor={`day-${index}`}>{day}</Label>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"grid gap-2\">\r\n            <Label>{t.endDate}</Label>\r\n            <DatePicker date={endDate} setDate={setEndDate} />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\task\\subtask-list.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\task\\task-card-compact.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showGradient' is assigned a value but never used. Allowed unused args must match /^_/u.","line":98,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":98,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'statusLabel' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":112,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":112,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, type ReactNode } from 'react';\r\nimport {\r\n  CheckCircle2,\r\n  MoreVertical,\r\n  Trash2,\r\n  Calendar,\r\n  Edit,\r\n  Circle,\r\n  AlertCircle,\r\n  Flame,\r\n  Clock,\r\n  PlayCircle,\r\n  PauseCircle,\r\n  ListTodo,\r\n  ChevronDown,\r\n} from 'lucide-react';\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n  DropdownMenuLabel,\r\n} from '../ui/dropdown-menu.js';\r\nimport { format } from 'date-fns';\r\nimport { motion } from 'framer-motion';\r\nimport { cn } from '../../utils/index.js';\r\nimport { Badge } from '../ui/badge.js';\r\n\r\ntype ViewMode = 'list' | 'grid';\r\n\r\nexport interface TaskCompactData {\r\n  id?: string | number;\r\n  title: string;\r\n  description?: string | null;\r\n  status: string;\r\n  priority: string;\r\n  dueDate?: Date | string | null;\r\n  estimatedTime?: number | null;\r\n  tags?: Array<{ id: string; name: string; color: string }>;\r\n  project?: { id: string; name: string; color: string };\r\n}\r\n\r\ninterface TaskCardCompactProps {\r\n  /** Task data */\r\n  task: TaskCompactData;\r\n  /** Index for animation delay */\r\n  index?: number;\r\n  /** View mode: list or grid */\r\n  viewMode?: ViewMode;\r\n  /** Whether to show project info */\r\n  showProject?: boolean;\r\n  /** Whether to show gradient effect */\r\n  showGradient?: boolean;\r\n  /** Called when task is clicked */\r\n  onTaskClick?: (taskId: string) => void;\r\n  /** Called when status changes */\r\n  onStatusChange?: (taskId: string, status: string) => void;\r\n  /** Called when delete is requested */\r\n  onDelete?: (taskId: string) => void;\r\n  /** Detail panel component to render when needed */\r\n  DetailPanel?: ReactNode;\r\n  /** Function to control DetailPanel visibility if passing it as ReactNode is not enough */\r\n  onToggleDetail?: (open: boolean) => void;\r\n  /** Date locale */\r\n  dateLocale?: Locale;\r\n  /** Custom labels for i18n */\r\n  labels?: {\r\n    // Statuses\r\n    statusTodo?: string;\r\n    statusInProgress?: string;\r\n    statusCompleted?: string;\r\n    statusOnHold?: string;\r\n    statusLabel?: string;\r\n    changeStatus?: string;\r\n    // Priorities\r\n    priorityUrgent?: string;\r\n    priorityHigh?: string;\r\n    priorityMedium?: string;\r\n    priorityLow?: string;\r\n    priorityNormal?: string;\r\n    // Actions\r\n    viewDetails?: string;\r\n    delete?: string;\r\n    // Meta (optional as icons used mostly)\r\n  };\r\n}\r\n\r\ntype Locale = Parameters<typeof format>[2] extends { locale?: infer L } ? L : never;\r\n\r\nexport function TaskCardCompact({\r\n  task,\r\n  index = 0,\r\n  viewMode = 'list',\r\n  showProject = false,\r\n  showGradient = false,\r\n  onTaskClick,\r\n  onStatusChange,\r\n  onDelete,\r\n  DetailPanel,\r\n  onToggleDetail,\r\n  dateLocale,\r\n  labels = {},\r\n}: TaskCardCompactProps) {\r\n  const {\r\n    statusTodo = 'To Do',\r\n    statusInProgress = 'In Progress',\r\n    statusCompleted = 'Completed',\r\n    statusOnHold = 'On Hold',\r\n    statusLabel = 'Status',\r\n    changeStatus = 'Change Status',\r\n    priorityUrgent = 'Urgent',\r\n    priorityHigh = 'High',\r\n    priorityMedium = 'Medium',\r\n    priorityLow = 'Low',\r\n    priorityNormal = 'Normal',\r\n    viewDetails = 'View Details',\r\n    delete: deleteLabel = 'Delete',\r\n  } = labels;\r\n\r\n  const [showDetailInternal, setShowDetailInternal] = useState(false);\r\n  const isCompleted = task.status === 'COMPLETED';\r\n\r\n  // Helper to handle detail opening\r\n  const openDetail = () => {\r\n    if (onToggleDetail) {\r\n      onToggleDetail(true);\r\n    } else {\r\n      setShowDetailInternal(true);\r\n    }\r\n  };\r\n\r\n  // Status configuration\r\n  const getStatusConfig = (status: string) => {\r\n    switch (status) {\r\n      case 'TODO':\r\n        return {\r\n          color: '#6b7280',\r\n          bgColor: '#6b728015',\r\n          icon: ListTodo,\r\n          label: statusTodo,\r\n        };\r\n      case 'IN_PROGRESS':\r\n        return {\r\n          color: '#3b82f6',\r\n          bgColor: '#3b82f615',\r\n          icon: PlayCircle,\r\n          label: statusInProgress,\r\n        };\r\n      case 'COMPLETED':\r\n        return {\r\n          color: '#22c55e',\r\n          bgColor: '#22c55e15',\r\n          icon: CheckCircle2,\r\n          label: statusCompleted,\r\n        };\r\n      case 'ON_HOLD':\r\n        return {\r\n          color: '#f59e0b',\r\n          bgColor: '#f59e0b15',\r\n          icon: PauseCircle,\r\n          label: statusOnHold,\r\n        };\r\n      default:\r\n        return {\r\n          color: '#6b7280',\r\n          bgColor: '#6b728015',\r\n          icon: Circle,\r\n          label: status,\r\n        };\r\n    }\r\n  };\r\n\r\n  // Priority configuration with icons\r\n  const getPriorityConfig = (priority: string) => {\r\n    switch (priority) {\r\n      case 'URGENT':\r\n        return {\r\n          color: '#ef4444',\r\n          bgColor: '#ef444420',\r\n          icon: Flame,\r\n          label: priorityUrgent,\r\n        };\r\n      case 'HIGH':\r\n        return {\r\n          color: '#f97316',\r\n          bgColor: '#f9731620',\r\n          icon: AlertCircle,\r\n          label: priorityHigh,\r\n        };\r\n      case 'MEDIUM':\r\n        return {\r\n          color: '#3b82f6',\r\n          bgColor: '#3b82f620',\r\n          icon: Circle,\r\n          label: priorityMedium,\r\n        };\r\n      case 'LOW':\r\n        return {\r\n          color: '#3b82f6',\r\n          bgColor: '#3b82f620',\r\n          icon: Circle,\r\n          label: priorityLow,\r\n        };\r\n      default:\r\n        return {\r\n          color: '#6b7280',\r\n          bgColor: '#6b728020',\r\n          icon: Circle,\r\n          label: priorityNormal,\r\n        };\r\n    }\r\n  };\r\n\r\n  const priorityConfig = getPriorityConfig(task.priority);\r\n  const PriorityIcon = priorityConfig.icon;\r\n  const statusConfig = getStatusConfig(task.status);\r\n  const StatusIcon = statusConfig.icon;\r\n  const accentColor = task.project?.color || priorityConfig.color;\r\n\r\n  const handleStatusChange = (newStatus: string) => {\r\n    if (task.id) {\r\n      onStatusChange?.(String(task.id), newStatus);\r\n    }\r\n  };\r\n\r\n  const formatDueDate = (date: Date | string | null | undefined) => {\r\n    if (!date) return null;\r\n    const dateObj = typeof date === 'string' ? new Date(date) : date;\r\n    return format(\r\n      dateObj,\r\n      'd MMM',\r\n      dateLocale ? { locale: dateLocale } : undefined\r\n    );\r\n  };\r\n\r\n  const isOverdue =\r\n    !isCompleted && task.dueDate && new Date(task.dueDate) < new Date();\r\n\r\n  const handleClick = () => {\r\n    if (onTaskClick && task.id) {\r\n      onTaskClick(String(task.id));\r\n    } else {\r\n      openDetail();\r\n    }\r\n  };\r\n\r\n  const handleMenuClick = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n  };\r\n\r\n  const renderStatusDropdown = (align: 'end' | 'start' = 'end') => (\r\n    <DropdownMenu>\r\n      <DropdownMenuTrigger asChild onClick={handleMenuClick}>\r\n        <button\r\n          className={cn(\r\n            'flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200',\r\n            'hover:ring-2 hover:ring-offset-1 hover:ring-offset-background',\r\n            isCompleted && 'opacity-80'\r\n          )}\r\n          style={{\r\n            backgroundColor: statusConfig.bgColor,\r\n            color: statusConfig.color,\r\n          }}\r\n        >\r\n          <StatusIcon className=\"h-4 w-4\" />\r\n          <span className=\"hidden sm:inline\">{statusConfig.label}</span>\r\n          <ChevronDown className=\"h-3.5 w-3.5 opacity-60\" />\r\n        </button>\r\n      </DropdownMenuTrigger>\r\n      <DropdownMenuContent align={align} className=\"w-44\">\r\n        <DropdownMenuLabel className=\"text-xs text-muted-foreground\">\r\n          {changeStatus}\r\n        </DropdownMenuLabel>\r\n        <DropdownMenuSeparator />\r\n        {[\r\n          {\r\n            value: 'TODO',\r\n            label: statusTodo,\r\n            icon: ListTodo,\r\n            color: '#6b7280',\r\n          },\r\n          {\r\n            value: 'IN_PROGRESS',\r\n            label: statusInProgress,\r\n            icon: PlayCircle,\r\n            color: '#3b82f6',\r\n          },\r\n          {\r\n            value: 'COMPLETED',\r\n            label: statusCompleted,\r\n            icon: CheckCircle2,\r\n            color: '#22c55e',\r\n          },\r\n          {\r\n            value: 'ON_HOLD',\r\n            label: statusOnHold,\r\n            icon: PauseCircle,\r\n            color: '#f59e0b',\r\n          },\r\n        ].map((status) => {\r\n          const Icon = status.icon;\r\n          return (\r\n            <DropdownMenuItem\r\n              key={status.value}\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                handleStatusChange(status.value);\r\n              }}\r\n              className={cn(\r\n                'gap-2',\r\n                task.status === status.value && 'bg-accent'\r\n              )}\r\n            >\r\n              <Icon className=\"h-4 w-4\" style={{ color: status.color }} />\r\n              <span>{status.label}</span>\r\n              {task.status === status.value && (\r\n                <CheckCircle2 className=\"h-3 w-3 ml-auto text-primary\" />\r\n              )}\r\n            </DropdownMenuItem>\r\n          );\r\n        })}\r\n      </DropdownMenuContent>\r\n    </DropdownMenu>\r\n  );\r\n\r\n  const renderActionsMenu = () => (\r\n    <DropdownMenu>\r\n      <DropdownMenuTrigger asChild onClick={handleMenuClick}>\r\n        <button\r\n          className={cn(\r\n            'opacity-0 group-hover:opacity-100 transition-opacity duration-150',\r\n            'rounded-lg p-2 hover:bg-muted text-muted-foreground hover:text-foreground shrink-0'\r\n          )}\r\n        >\r\n          <MoreVertical className=\"h-4 w-4\" />\r\n        </button>\r\n      </DropdownMenuTrigger>\r\n      <DropdownMenuContent align=\"end\" className=\"w-44\">\r\n        <DropdownMenuItem\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            openDetail();\r\n          }}\r\n        >\r\n          <Edit className=\"mr-2 h-4 w-4\" />\r\n          {viewDetails}\r\n        </DropdownMenuItem>\r\n        <DropdownMenuSeparator />\r\n        <DropdownMenuItem\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            if (task.id) onDelete?.(String(task.id));\r\n          }}\r\n          className=\"text-destructive focus:text-destructive focus:bg-destructive/10\"\r\n        >\r\n          <Trash2 className=\"mr-2 h-4 w-4\" />\r\n          {deleteLabel}\r\n        </DropdownMenuItem>\r\n      </DropdownMenuContent>\r\n    </DropdownMenu>\r\n  );\r\n\r\n  // List View - Dise├▒o mejorado m├ís legible\r\n  if (viewMode === 'list') {\r\n    return (\r\n      <>\r\n        <motion.div\r\n          initial={{ opacity: 0, x: -10 }}\r\n          animate={{ opacity: 1, x: 0 }}\r\n          transition={{ duration: 0.2, delay: index * 0.02 }}\r\n          onClick={handleClick}\r\n          className={cn(\r\n            'group relative flex items-center rounded-xl border px-4 py-4 transition-all duration-200 cursor-pointer',\r\n            isCompleted\r\n              ? 'border-border/30 bg-muted/20 opacity-70 hover:opacity-90'\r\n              : 'border-border/40 bg-card hover:border-border/60 hover:bg-accent/5 hover:shadow-md'\r\n          )}\r\n          style={{\r\n            borderLeftWidth: '4px',\r\n            borderLeftColor: isCompleted ? '#22c55e' : accentColor,\r\n          }}\r\n        >\r\n          {/* Left Section: Title & Meta */}\r\n          <div className=\"flex-1 min-w-0 pr-4\">\r\n            {/* Title */}\r\n            <p\r\n              className={cn(\r\n                'font-semibold text-[17px] mb-1.5',\r\n                isCompleted\r\n                  ? 'line-through text-muted-foreground'\r\n                  : 'text-foreground'\r\n              )}\r\n            >\r\n              {task.title}\r\n            </p>\r\n\r\n            {/* Meta info row */}\r\n            <div className=\"flex items-center gap-3 flex-wrap\">\r\n              {showProject && task.project && (\r\n                <span className=\"flex items-center gap-1.5 text-sm text-muted-foreground\">\r\n                  <span\r\n                    className=\"w-2.5 h-2.5 rounded-full shrink-0\"\r\n                    style={{ backgroundColor: task.project.color }}\r\n                  />\r\n                  <span className=\"truncate max-w-[150px]\">\r\n                    {task.project.name}\r\n                  </span>\r\n                </span>\r\n              )}\r\n              {task.dueDate && (\r\n                <span\r\n                  className={cn(\r\n                    'flex items-center gap-1.5 text-sm',\r\n                    isOverdue\r\n                      ? 'text-destructive font-medium'\r\n                      : 'text-muted-foreground'\r\n                  )}\r\n                >\r\n                  <Calendar className=\"h-4 w-4\" />\r\n                  {formatDueDate(task.dueDate)}\r\n                </span>\r\n              )}\r\n              {task.estimatedTime && !isCompleted && (\r\n                <span className=\"flex items-center gap-1.5 text-sm text-muted-foreground\">\r\n                  <Clock className=\"h-4 w-4\" />\r\n                  {task.estimatedTime}m\r\n                </span>\r\n              )}\r\n              {/* Tags */}\r\n              {task.tags && task.tags.length > 0 && !isCompleted && (\r\n                <div className=\"flex items-center gap-1.5\">\r\n                  {task.tags.slice(0, 2).map((tag) => (\r\n                    <span\r\n                      key={tag.id}\r\n                      className=\"text-xs px-2 py-0.5 rounded-full font-medium\"\r\n                      style={{\r\n                        backgroundColor: tag.color + '20',\r\n                        color: tag.color,\r\n                      }}\r\n                    >\r\n                      {tag.name}\r\n                    </span>\r\n                  ))}\r\n                  {task.tags.length > 2 && (\r\n                    <span className=\"text-sm text-muted-foreground\">\r\n                      +{task.tags.length - 2}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Right Section: Status, Priority & Menu */}\r\n          <div className=\"flex items-center gap-3 shrink-0\">\r\n            {renderStatusDropdown()}\r\n\r\n            {/* Priority Badge */}\r\n            <div\r\n              className=\"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium shrink-0\"\r\n              style={{\r\n                backgroundColor: priorityConfig.bgColor,\r\n                color: priorityConfig.color,\r\n              }}\r\n              title={priorityConfig.label}\r\n            >\r\n              <PriorityIcon className=\"h-4 w-4\" />\r\n              <span className=\"hidden sm:inline\">{priorityConfig.label}</span>\r\n            </div>\r\n\r\n            {/* Menu */}\r\n            {renderActionsMenu()}\r\n          </div>\r\n        </motion.div>\r\n\r\n        {DetailPanel &&\r\n          (onToggleDetail\r\n            ? DetailPanel\r\n            : showDetailInternal && DetailPanel)}\r\n      </>\r\n    );\r\n  }\r\n\r\n  // Grid View\r\n  return (\r\n    <>\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.3, delay: index * 0.03 }}\r\n        onClick={handleClick}\r\n        className={cn(\r\n          'group relative overflow-hidden rounded-xl border p-4 transition-all duration-300 cursor-pointer h-full flex flex-col',\r\n          'hover:shadow-lg hover:shadow-black/5 dark:hover:shadow-black/20',\r\n          isCompleted\r\n            ? 'border-border/30 bg-muted/30 opacity-60 hover:opacity-80'\r\n            : 'border-border/50 bg-card hover:border-border'\r\n        )}\r\n        style={{\r\n          borderTopWidth: '3px',\r\n          borderTopColor: isCompleted ? '#22c55e' : accentColor,\r\n        }}\r\n      >\r\n        {/* Header: Menu only */}\r\n        <div className=\"relative z-10 flex items-center justify-end mb-3\">\r\n          {renderActionsMenu()}\r\n        </div>\r\n\r\n        {/* Title */}\r\n        <h3\r\n          className={cn(\r\n            'relative z-10 font-semibold text-base leading-tight mb-2 line-clamp-2',\r\n            isCompleted && 'line-through text-muted-foreground'\r\n          )}\r\n        >\r\n          {task.title}\r\n        </h3>\r\n\r\n        {/* Description - only in grid */}\r\n        {task.description && !isCompleted && (\r\n          <p className=\"relative z-10 text-sm text-muted-foreground line-clamp-2 mb-3\">\r\n            {task.description}\r\n          </p>\r\n        )}\r\n\r\n        {/* Tags */}\r\n        {task.tags && task.tags.length > 0 && !isCompleted && (\r\n          <div className=\"relative z-10 flex flex-wrap gap-1.5 mb-3\">\r\n            {task.tags.slice(0, 2).map((tag) => (\r\n              <Badge\r\n                key={tag.id}\r\n                variant=\"secondary\"\r\n                className=\"text-xs px-2 py-0.5 border-0 font-medium\"\r\n                style={{\r\n                  backgroundColor: tag.color + '20',\r\n                  color: tag.color,\r\n                }}\r\n              >\r\n                {tag.name}\r\n              </Badge>\r\n            ))}\r\n            {task.tags.length > 2 && (\r\n              <span className=\"text-xs text-muted-foreground\">\r\n                +{task.tags.length - 2}\r\n              </span>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Footer */}\r\n        <div className=\"relative z-10 mt-auto pt-3 border-t border-dashed border-border/50\">\r\n          <div className=\"flex items-center justify-between text-sm\">\r\n            <div className=\"flex items-center gap-3 text-muted-foreground\">\r\n              {showProject && task.project && (\r\n                <span className=\"flex items-center gap-1.5 truncate max-w-24\">\r\n                  <span\r\n                    className=\"w-2.5 h-2.5 rounded-full shrink-0\"\r\n                    style={{ backgroundColor: task.project.color }}\r\n                  />\r\n                  <span className=\"truncate\">{task.project.name}</span>\r\n                </span>\r\n              )}\r\n              {task.dueDate && (\r\n                <span\r\n                  className={cn(\r\n                    'flex items-center gap-1',\r\n                    isOverdue ? 'text-destructive font-medium' : ''\r\n                  )}\r\n                >\r\n                  <Calendar className=\"h-3.5 w-3.5\" />\r\n                  {formatDueDate(task.dueDate)}\r\n                </span>\r\n              )}\r\n            </div>\r\n\r\n            {/* Status & Priority */}\r\n            <div className=\"flex items-center gap-2\">\r\n              {renderStatusDropdown('end')}\r\n\r\n              {/* Priority Badge */}\r\n              <div\r\n                className=\"flex items-center gap-1 px-2 py-0.5 rounded-md text-xs font-medium\"\r\n                style={{\r\n                  backgroundColor: priorityConfig.bgColor,\r\n                  color: priorityConfig.color,\r\n                }}\r\n              >\r\n                <PriorityIcon className=\"h-3.5 w-3.5\" />\r\n                <span>{priorityConfig.label}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n\r\n      {DetailPanel &&\r\n          (onToggleDetail\r\n            ? DetailPanel\r\n            : showDetailInternal && DetailPanel)}\r\n    </>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\task\\task-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\task\\task-detail-panel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\task\\task-detail-view.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\task\\task-filters.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\task\\task-form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\task\\task-list.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\timer\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\timer\\pomodoro-timer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\timer\\session-history.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\timer\\task-selector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\timer\\timer-widget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\alert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\calendar.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":132,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":132,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4951,4954],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4951,4954],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport {\r\n  ChevronDownIcon,\r\n  ChevronLeftIcon,\r\n  ChevronRightIcon,\r\n} from \"lucide-react\";\r\nimport { DayButton, DayPicker, getDefaultClassNames } from \"react-day-picker\";\r\n\r\nimport { cn } from \"../../utils/index.js\";\r\nimport { Button, buttonVariants } from \"./button.js\";\r\n\r\nfunction Calendar({\r\n  className,\r\n  classNames,\r\n  showOutsideDays = true,\r\n  captionLayout = \"label\",\r\n  buttonVariant = \"ghost\",\r\n  formatters,\r\n  components,\r\n  ...props\r\n}: React.ComponentProps<typeof DayPicker> & {\r\n  buttonVariant?: React.ComponentProps<typeof Button>[\"variant\"];\r\n}) {\r\n  const defaultClassNames = getDefaultClassNames();\r\n\r\n  return (\r\n    <DayPicker\r\n      showOutsideDays={showOutsideDays}\r\n      className={cn(\r\n        \"bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent\",\r\n        String.raw`rtl:**:[.rdp-button\\_next>svg]:rotate-180`,\r\n        String.raw`rtl:**:[.rdp-button\\_previous>svg]:rotate-180`,\r\n        className\r\n      )}\r\n      captionLayout={captionLayout}\r\n      formatters={{\r\n        formatMonthDropdown: (date) =>\r\n          date.toLocaleString(\"default\", { month: \"short\" }),\r\n        ...formatters,\r\n      }}\r\n      classNames={{\r\n        root: cn(\"w-fit\", defaultClassNames.root),\r\n        months: cn(\r\n          \"flex gap-4 flex-col md:flex-row relative\",\r\n          defaultClassNames.months\r\n        ),\r\n        month: cn(\"flex flex-col w-full gap-4\", defaultClassNames.month),\r\n        nav: cn(\r\n          \"flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between\",\r\n          defaultClassNames.nav\r\n        ),\r\n        button_previous: cn(\r\n          buttonVariants({ variant: buttonVariant }),\r\n          \"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none\",\r\n          defaultClassNames.button_previous\r\n        ),\r\n        button_next: cn(\r\n          buttonVariants({ variant: buttonVariant }),\r\n          \"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none\",\r\n          defaultClassNames.button_next\r\n        ),\r\n        month_caption: cn(\r\n          \"flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)\",\r\n          defaultClassNames.month_caption\r\n        ),\r\n        dropdowns: cn(\r\n          \"w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5\",\r\n          defaultClassNames.dropdowns\r\n        ),\r\n        dropdown_root: cn(\r\n          \"relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md\",\r\n          defaultClassNames.dropdown_root\r\n        ),\r\n        dropdown: cn(\r\n          \"absolute bg-popover inset-0 opacity-0\",\r\n          defaultClassNames.dropdown\r\n        ),\r\n        caption_label: cn(\r\n          \"select-none font-medium\",\r\n          captionLayout === \"label\"\r\n            ? \"text-sm\"\r\n            : \"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5\",\r\n          defaultClassNames.caption_label\r\n        ),\r\n        table: \"w-full border-collapse\",\r\n        weekdays: cn(\"flex\", defaultClassNames.weekdays),\r\n        weekday: cn(\r\n          \"text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none\",\r\n          defaultClassNames.weekday\r\n        ),\r\n        week: cn(\"flex w-full mt-2\", defaultClassNames.week),\r\n        week_number_header: cn(\r\n          \"select-none w-(--cell-size)\",\r\n          defaultClassNames.week_number_header\r\n        ),\r\n        week_number: cn(\r\n          \"text-[0.8rem] select-none text-muted-foreground\",\r\n          defaultClassNames.week_number\r\n        ),\r\n        day: cn(\r\n          \"relative w-full h-full p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none\",\r\n          defaultClassNames.day\r\n        ),\r\n        range_start: cn(\r\n          \"rounded-l-md bg-accent\",\r\n          defaultClassNames.range_start\r\n        ),\r\n        range_middle: cn(\"rounded-none\", defaultClassNames.range_middle),\r\n        range_end: cn(\"rounded-r-md bg-accent\", defaultClassNames.range_end),\r\n        today: cn(\r\n          \"bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none\",\r\n          defaultClassNames.today\r\n        ),\r\n        outside: cn(\r\n          \"text-muted-foreground aria-selected:text-muted-foreground\",\r\n          defaultClassNames.outside\r\n        ),\r\n        disabled: cn(\r\n          \"text-muted-foreground opacity-50\",\r\n          defaultClassNames.disabled\r\n        ),\r\n        hidden: cn(\"invisible\", defaultClassNames.hidden),\r\n        ...classNames,\r\n      }}\r\n      components={{\r\n        Root: ({ className, rootRef, ...props }) => {\r\n          return (\r\n            <div\r\n              data-slot=\"calendar\"\r\n              ref={rootRef as any}\r\n              className={cn(className)}\r\n              {...props}\r\n            />\r\n          );\r\n        },\r\n        Chevron: ({ className, orientation, ...props }) => {\r\n          if (orientation === \"left\") {\r\n            return (\r\n              <ChevronLeftIcon className={cn(\"size-4\", className)} {...props} />\r\n            );\r\n          }\r\n\r\n          if (orientation === \"right\") {\r\n            return (\r\n              <ChevronRightIcon\r\n                className={cn(\"size-4\", className)}\r\n                {...props}\r\n              />\r\n            );\r\n          }\r\n\r\n          return (\r\n            <ChevronDownIcon className={cn(\"size-4\", className)} {...props} />\r\n          );\r\n        },\r\n        DayButton: CalendarDayButton,\r\n        WeekNumber: ({ children, ...props }) => {\r\n          return (\r\n            <td {...props}>\r\n              <div className=\"flex size-(--cell-size) items-center justify-center text-center\">\r\n                {children}\r\n              </div>\r\n            </td>\r\n          );\r\n        },\r\n        ...components,\r\n      }}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction CalendarDayButton({\r\n  className,\r\n  day,\r\n  modifiers,\r\n  ...props\r\n}: React.ComponentProps<typeof DayButton>) {\r\n  const defaultClassNames = getDefaultClassNames();\r\n\r\n  const ref = React.useRef<HTMLButtonElement>(null);\r\n  React.useEffect(() => {\r\n    if (modifiers.focused) ref.current?.focus();\r\n  }, [modifiers.focused]);\r\n\r\n  return (\r\n    <Button\r\n      ref={ref}\r\n      variant=\"ghost\"\r\n      size=\"icon\"\r\n      data-day={day.date.toLocaleDateString()}\r\n      data-selected-single={\r\n        modifiers.selected &&\r\n        !modifiers.range_start &&\r\n        !modifiers.range_end &&\r\n        !modifiers.range_middle\r\n      }\r\n      data-range-start={modifiers.range_start}\r\n      data-range-end={modifiers.range_end}\r\n      data-range-middle={modifiers.range_middle}\r\n      className={cn(\r\n        \"data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70\",\r\n        defaultClassNames.day,\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nexport { Calendar, CalendarDayButton };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\collapsible.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\command.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\custom-icons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\date-picker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\empty-state.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\hover-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\mention-textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\slider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\sonner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\ui\\visually-hidden.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\user\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\user\\user-profile-card.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Mail' is defined but never used. Allowed unused vars must match /^_/u.","line":31,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Check' is defined but never used. Allowed unused vars must match /^_/u.","line":36,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":36,"endColumn":8}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/card';\r\nimport { Button } from '../ui/button';\r\nimport { Input } from '../ui/input';\r\nimport { Label } from '../ui/label';\r\nimport { Badge } from '../ui/badge';\r\nimport { Avatar, AvatarFallback, AvatarImage } from '../ui/avatar';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n} from '../ui/dialog';\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n  AlertDialogTrigger,\r\n} from '../ui/alert-dialog';\r\nimport {\r\n  User,\r\n  Mail,\r\n  Calendar,\r\n  MapPin,\r\n  Globe,\r\n  Edit,\r\n  Check,\r\n  X,\r\n  AlertTriangle,\r\n  Info,\r\n  Clock,\r\n  Zap,\r\n  AlertCircle,\r\n  Plus\r\n} from 'lucide-react';\r\nimport { cn } from '../../lib/utils';\r\nimport { UsernameInput } from '../auth/username-input';\r\n\r\ninterface UserProfileCardProps {\r\n  user: {\r\n    id: string;\r\n    username: string;\r\n    name: string | null;\r\n    email: string;\r\n    image?: string | null;\r\n    createdAt: string;\r\n    bio?: string | null;\r\n    location?: string | null;\r\n    website?: string | null;\r\n    timezone?: string;\r\n    locale?: string;\r\n  };\r\n  onUpdateUsername?: (newUsername: string) => Promise<void>;\r\n  onUpdateProfile?: (data: Partial<UserProfileCardProps['user']>) => Promise<void>;\r\n  showEditButton?: boolean;\r\n  className?: string;\r\n  variant?: 'default' | 'compact' | 'minimal';\r\n  usernameValidation?: {\r\n    isLoading: boolean;\r\n    isValid: boolean;\r\n    isAvailable?: boolean;\r\n    message?: string;\r\n  };\r\n  onValidateUsername?: (username: string) => void;\r\n}\r\n\r\nexport function UserProfileCard({\r\n  user,\r\n  onUpdateUsername,\r\n  onUpdateProfile,\r\n  showEditButton = true,\r\n  className,\r\n  variant = 'default',\r\n  usernameValidation = { \r\n    isLoading: false, \r\n    isValid: true, \r\n    isAvailable: true \r\n  },\r\n  onValidateUsername,\r\n}: UserProfileCardProps) {\r\n  const [isEditingUsername, setIsEditingUsername] = useState(false);\r\n  const [isEditingProfile, setIsEditingProfile] = useState(false);\r\n  const [username, setUsername] = useState(user.username);\r\n  const [profileData, setProfileData] = useState({\r\n    name: user.name || '',\r\n    bio: user.bio || '',\r\n    location: user.location || '',\r\n    website: user.website || '',\r\n    timezone: user.timezone || '',\r\n    locale: user.locale || '',\r\n  });\r\n  const [isUpdating, setIsUpdating] = useState(false);\r\n  const [updateError, setUpdateError] = useState<string | null>(null);\r\n\r\n  const handleUsernameUpdate = async () => {\r\n    if (!onUpdateUsername || username === user.username) return;\r\n\r\n    setIsUpdating(true);\r\n    setUpdateError(null);\r\n\r\n    try {\r\n      await onUpdateUsername(username);\r\n      setIsEditingUsername(false);\r\n    } catch (error) {\r\n      setUpdateError(error instanceof Error ? error.message : 'Failed to update username');\r\n    } finally {\r\n      setIsUpdating(false);\r\n    }\r\n  };\r\n\r\n  const handleProfileUpdate = async () => {\r\n    if (!onUpdateProfile) return;\r\n\r\n    setIsUpdating(true);\r\n    setUpdateError(null);\r\n\r\n    try {\r\n      await onUpdateProfile(profileData);\r\n      setIsEditingProfile(false);\r\n    } catch (error) {\r\n      setUpdateError(error instanceof Error ? error.message : 'Failed to update profile');\r\n    } finally {\r\n      setIsUpdating(false);\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric',\r\n    });\r\n  };\r\n\r\n  const getInitials = (name: string | null, username: string) => {\r\n    if (name) {\r\n      return name\r\n        .split(' ')\r\n        .map(n => n[0])\r\n        .join('')\r\n        .toUpperCase()\r\n        .slice(0, 2);\r\n    }\r\n    return username.slice(0, 2).toUpperCase();\r\n  };\r\n\r\n  const getAvatarUrl = () => {\r\n    if (user.image) return user.image;\r\n    // Generate avatar URL based on username for consistent avatars\r\n    return `https://api.dicebear.com/7.x/initials/svg?seed=${user.username}&backgroundColor=6366f1`;\r\n  };\r\n\r\n  if (variant === 'minimal') {\r\n    return (\r\n      <div className={cn('flex items-center gap-3', className)}>\r\n        <Avatar className=\"h-10 w-10\">\r\n          <AvatarImage src={getAvatarUrl()} alt={user.name || user.username} />\r\n          <AvatarFallback>{getInitials(user.name, user.username)}</AvatarFallback>\r\n        </Avatar>\r\n        <div>\r\n          <p className=\"font-medium text-sm\">{user.name || user.username}</p>\r\n          <p className=\"text-xs text-muted-foreground\">@{user.username}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (variant === 'compact') {\r\n    return (\r\n      <Card className={cn('', className)}>\r\n        <CardContent className=\"p-4\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Avatar className=\"h-12 w-12\">\r\n              <AvatarImage src={getAvatarUrl()} alt={user.name || user.username} />\r\n              <AvatarFallback>{getInitials(user.name, user.username)}</AvatarFallback>\r\n            </Avatar>\r\n            <div className=\"flex-1\">\r\n              <h3 className=\"font-semibold\">{user.name || user.username}</h3>\r\n              <p className=\"text-sm text-muted-foreground\">@{user.username}</p>\r\n              <p className=\"text-xs text-muted-foreground\">{user.email}</p>\r\n            </div>\r\n            {showEditButton && (\r\n              <Button variant=\"ghost\" size=\"sm\">\r\n                <Edit className=\"h-4 w-4\" />\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Card className={cn('', className)}>\r\n      <CardHeader className=\"pb-4\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <CardTitle className=\"text-lg\">Profile</CardTitle>\r\n          {showEditButton && (\r\n            <Dialog open={isEditingProfile} onOpenChange={setIsEditingProfile}>\r\n              <DialogTrigger asChild>\r\n                <Button variant=\"outline\" size=\"sm\">\r\n                  <Edit className=\"h-4 w-4 mr-2\" />\r\n                  Edit Profile\r\n                </Button>\r\n              </DialogTrigger>\r\n              <DialogContent className=\"sm:max-w-[425px]\">\r\n                <DialogHeader>\r\n                  <DialogTitle>Edit Profile</DialogTitle>\r\n                  <DialogDescription>\r\n                    Update your profile information.\r\n                  </DialogDescription>\r\n                </DialogHeader>\r\n                <div className=\"space-y-4 py-4\">\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"name\">Display Name</Label>\r\n                    <Input\r\n                      id=\"name\"\r\n                      value={profileData.name}\r\n                      onChange={(e) => setProfileData(prev => ({ ...prev, name: e.target.value }))}\r\n                      placeholder=\"Enter your name\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"bio\">Bio</Label>\r\n                    <textarea\r\n                      id=\"bio\"\r\n                      className=\"w-full min-h-[80px] rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\"\r\n                      value={profileData.bio}\r\n                      onChange={(e) => setProfileData(prev => ({ ...prev, bio: e.target.value }))}\r\n                      placeholder=\"Tell us about yourself\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"location\">Location</Label>\r\n                    <Input\r\n                      id=\"location\"\r\n                      value={profileData.location}\r\n                      onChange={(e) => setProfileData(prev => ({ ...prev, location: e.target.value }))}\r\n                      placeholder=\"City, Country\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"website\">Website</Label>\r\n                    <Input\r\n                      id=\"website\"\r\n                      type=\"url\"\r\n                      value={profileData.website}\r\n                      onChange={(e) => setProfileData(prev => ({ ...prev, website: e.target.value }))}\r\n                      placeholder=\"https://yourwebsite.com\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                {updateError && (\r\n                  <div className=\"flex items-center gap-2 text-sm text-destructive\">\r\n                    <AlertTriangle className=\"h-4 w-4\" />\r\n                    {updateError}\r\n                  </div>\r\n                )}\r\n                <div className=\"flex justify-end gap-2\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    onClick={() => setIsEditingProfile(false)}\r\n                    disabled={isUpdating}\r\n                  >\r\n                    Cancel\r\n                  </Button>\r\n                  <Button onClick={handleProfileUpdate} disabled={isUpdating}>\r\n                    {isUpdating && <Clock className=\"h-4 w-4 mr-2 animate-spin\" />}\r\n                    Save Changes\r\n                  </Button>\r\n                </div>\r\n              </DialogContent>\r\n            </Dialog>\r\n          )}\r\n        </div>\r\n      </CardHeader>\r\n\r\n      <CardContent className=\"space-y-6\">\r\n        {/* User Info */}\r\n        <div className=\"flex items-start gap-4\">\r\n          <Avatar className=\"h-16 w-16\">\r\n            <AvatarImage src={getAvatarUrl()} alt={user.name || user.username} />\r\n            <AvatarFallback className=\"text-lg\">\r\n              {getInitials(user.name, user.username)}\r\n            </AvatarFallback>\r\n          </Avatar>\r\n          <div className=\"flex-1\">\r\n            <h2 className=\"text-2xl font-bold\">{user.name || 'User'}</h2>\r\n            <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n              {user.username ? (\r\n                <span>@{user.username}</span>\r\n              ) : (\r\n                <div className=\"flex items-center gap-2\">\r\n                  <AlertCircle className=\"h-4 w-4 text-yellow-500\" />\r\n                  <span className=\"text-yellow-600 dark:text-yellow-400\">No username set</span>\r\n                </div>\r\n              )}\r\n              <Badge variant=\"secondary\" className=\"text-xs\">\r\n                ID: {user.id.slice(-8)}\r\n              </Badge>\r\n            </div>\r\n            <p className=\"text-sm text-muted-foreground\">{user.email}</p>\r\n            {user.bio && (\r\n              <p className=\"mt-2 text-sm\">{user.bio}</p>\r\n            )}\r\n            {!user.username && (\r\n              <div className=\"mt-2 flex items-center gap-2 text-sm text-muted-foreground\">\r\n                <Info className=\"h-3 w-3\" />\r\n                <span>Username is required for profile URL and sharing</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Username Management */}\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <User className=\"h-4 w-4\" />\r\n              <Label className=\"text-sm font-medium\">Username</Label>\r\n              <div className=\"flex items-center gap-1 text-xs text-muted-foreground\">\r\n                <Info className=\"h-3 w-3\" />\r\n                <span>Part of your profile URL</span>\r\n              </div>\r\n            </div>\r\n            {/* Show different button based on whether user has username */}\r\n            {user.username ? (\r\n              onUpdateUsername && (\r\n                <Dialog open={isEditingUsername} onOpenChange={setIsEditingUsername}>\r\n                  <DialogTrigger asChild>\r\n                    <Button variant=\"ghost\" size=\"sm\">\r\n                      <Edit className=\"h-4 w-4 mr-2\" />\r\n                      Change\r\n                    </Button>\r\n                  </DialogTrigger>\r\n                  <DialogContent className=\"sm:max-w-[425px]\">\r\n                    <DialogHeader>\r\n                      <DialogTitle>Change Username</DialogTitle>\r\n                      <DialogDescription>\r\n                        Enter your new username. This will change your profile URL.\r\n                      </DialogDescription>\r\n                    </DialogHeader>\r\n                    <div className=\"space-y-4 py-4\">\r\n                      <UsernameInput\r\n                        value={username}\r\n                        onChange={(value) => {\r\n                          setUsername(value);\r\n                          onValidateUsername?.(value);\r\n                        }}\r\n                        isLoading={usernameValidation.isLoading}\r\n                        isValid={usernameValidation.isValid}\r\n                        isAvailable={usernameValidation.isAvailable}\r\n                        validationMessage={usernameValidation.message}\r\n                        label=\"New Username\"\r\n                        helperText=\"This will be your new profile identifier\"\r\n                      />\r\n                    </div>\r\n                    {updateError && (\r\n                      <div className=\"flex items-center gap-2 text-sm text-destructive\">\r\n                        <X className=\"h-4 w-4\" />\r\n                        {updateError}\r\n                      </div>\r\n                    )}\r\n                    <div className=\"flex justify-end gap-2\">\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        onClick={() => {\r\n                          setIsEditingUsername(false);\r\n                          setUsername(user.username);\r\n                          setUpdateError(null);\r\n                        }}\r\n                        disabled={isUpdating}\r\n                      >\r\n                        Cancel\r\n                      </Button>\r\n                      <AlertDialog>\r\n                        <AlertDialogTrigger asChild>\r\n                          <Button\r\n                            disabled={isUpdating || username === user.username || !usernameValidation.isValid || !usernameValidation.isAvailable}\r\n                          >\r\n                            {isUpdating ? (\r\n                              <>\r\n                                <Clock className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                                Updating...\r\n                              </>\r\n                            ) : (\r\n                              <>\r\n                                <Zap className=\"h-4 w-4 mr-2\" />\r\n                                Change Username\r\n                              </>\r\n                            )}\r\n                          </Button>\r\n                        </AlertDialogTrigger>\r\n                        <AlertDialogContent>\r\n                          <AlertDialogHeader>\r\n                            <AlertDialogTitle>Change Username</AlertDialogTitle>\r\n                            <AlertDialogDescription>\r\n                              Are you sure you want to change your username from{' '}\r\n                              <span className=\"font-medium\">@{user.username}</span> to{' '}\r\n                              <span className=\"font-medium\">@{username}</span>?\r\n                              <br />\r\n                              <br />\r\n                              This will change your profile URL and may affect bookmarks.\r\n                            </AlertDialogDescription>\r\n                          </AlertDialogHeader>\r\n                          <AlertDialogFooter>\r\n                            <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                            <AlertDialogAction onClick={handleUsernameUpdate}>\r\n                              Yes, Change Username\r\n                            </AlertDialogAction>\r\n                          </AlertDialogFooter>\r\n                        </AlertDialogContent>\r\n                      </AlertDialog>\r\n                    </div>\r\n                  </DialogContent>\r\n                </Dialog>\r\n              )\r\n            ) : (\r\n              onUpdateUsername && (\r\n                <Dialog open={isEditingUsername} onOpenChange={setIsEditingUsername}>\r\n                  <DialogTrigger asChild>\r\n                    <Button variant=\"outline\" size=\"sm\">\r\n                      <Plus className=\"h-4 w-4 mr-2\" />\r\n                      Add Username\r\n                    </Button>\r\n                  </DialogTrigger>\r\n                  <DialogContent className=\"sm:max-w-[425px]\">\r\n                    <DialogHeader>\r\n                      <DialogTitle>Add Username</DialogTitle>\r\n                      <DialogDescription>\r\n                        Choose a username for your profile. This will be part of your profile URL\r\n                        and must be unique.\r\n                      </DialogDescription>\r\n                    </DialogHeader>\r\n                    <div className=\"space-y-4 py-4\">\r\n                      <UsernameInput\r\n                        value={username}\r\n                        onChange={(value) => {\r\n                          setUsername(value);\r\n                          onValidateUsername?.(value);\r\n                        }}\r\n                        isLoading={usernameValidation.isLoading}\r\n                        isValid={usernameValidation.isValid}\r\n                        isAvailable={usernameValidation.isAvailable}\r\n                        validationMessage={usernameValidation.message}\r\n                        label=\"Username\"\r\n                        helperText=\"This will be your unique profile identifier\"\r\n                      />\r\n                    </div>\r\n                    {updateError && (\r\n                      <div className=\"flex items-center gap-2 text-sm text-destructive\">\r\n                        <X className=\"h-4 w-4\" />\r\n                        {updateError}\r\n                      </div>\r\n                    )}\r\n                    <div className=\"flex justify-end gap-2\">\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        onClick={() => {\r\n                          setIsEditingUsername(false);\r\n                          setUsername('');\r\n                          setUpdateError(null);\r\n                        }}\r\n                        disabled={isUpdating}\r\n                      >\r\n                        Cancel\r\n                      </Button>\r\n                      <AlertDialog>\r\n                        <AlertDialogTrigger asChild>\r\n                          <Button\r\n                            disabled={isUpdating || username.length < 3}\r\n                          >\r\n                            {isUpdating ? (\r\n                              <>\r\n                                <Clock className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                                Adding...\r\n                              </>\r\n                            ) : (\r\n                              <>\r\n                                <Zap className=\"h-4 w-4 mr-2\" />\r\n                                Add Username\r\n                              </>\r\n                            )}\r\n                          </Button>\r\n                        </AlertDialogTrigger>\r\n                        <AlertDialogContent>\r\n                          <AlertDialogHeader>\r\n                            <AlertDialogTitle>Add Username</AlertDialogTitle>\r\n                            <AlertDialogDescription>\r\n                              Are you sure you want to add the username{' '}\r\n                              <span className=\"font-medium\"> @{username}</span>?\r\n                              <br />\r\n                              <br />\r\n                              This will be your permanent profile identifier.\r\n                            </AlertDialogDescription>\r\n                          </AlertDialogHeader>\r\n                          <AlertDialogFooter>\r\n                            <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                            <AlertDialogAction onClick={handleUsernameUpdate}>\r\n                              Yes, Add Username\r\n                            </AlertDialogAction>\r\n                          </AlertDialogFooter>\r\n                        </AlertDialogContent>\r\n                      </AlertDialog>\r\n                    </div>\r\n                  </DialogContent>\r\n                </Dialog>\r\n              )\r\n            )}\r\n          </div>\r\n          <div className=\"bg-muted/50 rounded-lg p-3\">\r\n            <code className=\"text-sm\">\r\n              ordo-todo.com/{username || 'username'}/workspace-name\r\n            </code>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Additional Info */}\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n            <Calendar className=\"h-4 w-4\" />\r\n            <span>Joined {formatDate(user.createdAt)}</span>\r\n          </div>\r\n          {user.location && (\r\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n              <MapPin className=\"h-4 w-4\" />\r\n              <span>{user.location}</span>\r\n            </div>\r\n          )}\r\n          {user.website && (\r\n            <div className=\"flex items-center gap-2 text-sm\">\r\n              <Globe className=\"h-4 w-4\" />\r\n              <a\r\n                href={user.website}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                className=\"text-primary hover:underline\"\r\n              >\r\n                {user.website.replace(/^https?:\\/\\//, '')}\r\n              </a>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\workspace\\__tests__\\workspace-card.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'waitFor' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":37,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":44},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":254,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":254,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8398,8401],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8398,8401],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":267,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":267,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8795,8798],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8795,8798],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":281,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":281,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9208,9211],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9208,9211],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":297,"column":98,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":297,"endColumn":101,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9753,9756],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9753,9756],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Unit Tests for WorkspaceCard Component\n *\n * These tests verify the WorkspaceCard component behavior:\n * 1. Rendering workspace information (name, description, type, stats)\n * 2. User interactions (click, delete, settings)\n * 3. Accessibility (keyboard navigation, ARIA labels)\n * 4. Visual states (hover, loading)\n * 5. Label customization\n */\n\nimport { describe, it, expect, vi, beforeEach, afterEach } from 'vitest';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { WorkspaceCard, type WorkspaceData } from '../workspace-card';\n\n// Mock framer-motion to avoid animation complexity in tests\nvi.mock('framer-motion', () => ({\n  motion: {\n    div: ({ children, onClick, className, style }: { children?: React.ReactNode; onClick?: () => void; className?: string; style?: React.CSSProperties }) => (\n      <div onClick={onClick} className={className} style={style}>\n        {children}\n      </div>\n    ),\n  },\n}));\n\n// Mock window.confirm\nconst mockConfirm = vi.fn();\nObject.defineProperty(global, 'window', {\n  value: {\n    confirm: mockConfirm,\n  },\n  writable: true,\n});\n\ndescribe('WorkspaceCard Component', () => {\n  const mockWorkspace: WorkspaceData = {\n    id: 'workspace-123',\n    slug: 'test-workspace',\n    name: 'Test Workspace',\n    description: 'A test workspace for testing',\n    type: 'PERSONAL',\n    color: '#06b6d4',\n    icon: null,\n    projectsCount: 5,\n    tasksCount: 25,\n  };\n\n  beforeEach(() => {\n    mockConfirm.mockReset();\n  });\n\n  afterEach(() => {\n    vi.clearAllMocks();\n  });\n\n  // ============ RENDERING TESTS ============\n\n  describe('Rendering', () => {\n    it('should render workspace name', () => {\n      render(<WorkspaceCard workspace={mockWorkspace} />);\n\n      expect(screen.getByText('Test Workspace')).toBeInTheDocument();\n    });\n\n    it('should render workspace description when provided', () => {\n      render(<WorkspaceCard workspace={mockWorkspace} />);\n\n      expect(screen.getByText('A test workspace for testing')).toBeInTheDocument();\n    });\n\n    it('should not render description when not provided', () => {\n      const workspaceWithoutDesc = { ...mockWorkspace, description: undefined };\n      render(<WorkspaceCard workspace={workspaceWithoutDesc} />);\n\n      expect(screen.queryByText('A test workspace for testing')).not.toBeInTheDocument();\n    });\n\n    it('should render workspace type badge', () => {\n      render(<WorkspaceCard workspace={mockWorkspace} />);\n\n      expect(screen.getByText('Personal')).toBeInTheDocument();\n    });\n\n    it('should render active status badge', () => {\n      render(<WorkspaceCard workspace={mockWorkspace} />);\n\n      expect(screen.getByText('Active')).toBeInTheDocument();\n    });\n\n    it('should render project stats', () => {\n      render(<WorkspaceCard workspace={mockWorkspace} />);\n\n      expect(screen.getByText(/5 projects/)).toBeInTheDocument();\n    });\n\n    it('should render task stats', () => {\n      render(<WorkspaceCard workspace={mockWorkspace} />);\n\n      expect(screen.getByText(/25 tasks/)).toBeInTheDocument();\n    });\n\n    it('should render zero stats when not provided', () => {\n      const workspaceWithoutStats = { ...mockWorkspace, projectsCount: undefined, tasksCount: undefined };\n      render(<WorkspaceCard workspace={workspaceWithoutStats} />);\n\n      expect(screen.getByText(/0 projects/)).toBeInTheDocument();\n      expect(screen.getByText(/0 tasks/)).toBeInTheDocument();\n    });\n\n    it('should render correct icon for WORK type', () => {\n      const workWorkspace = { ...mockWorkspace, type: 'WORK' as const };\n      render(<WorkspaceCard workspace={workWorkspace} />);\n\n      expect(screen.getByText('Work')).toBeInTheDocument();\n    });\n\n    it('should render correct icon for TEAM type', () => {\n      const teamWorkspace = { ...mockWorkspace, type: 'TEAM' as const };\n      render(<WorkspaceCard workspace={teamWorkspace} />);\n\n      expect(screen.getByText('Team')).toBeInTheDocument();\n    });\n  });\n\n  // ============ USER INTERACTIONS ============\n\n  describe('User Interactions', () => {\n    it('should call onWorkspaceClick when card is clicked', async () => {\n      const handleClick = vi.fn();\n      const user = userEvent.setup();\n\n      render(<WorkspaceCard workspace={mockWorkspace} onWorkspaceClick={handleClick} />);\n\n      const card = screen.getByText('Test Workspace').closest('div');\n      await user.click(card!);\n\n      expect(handleClick).toHaveBeenCalledTimes(1);\n      expect(handleClick).toHaveBeenCalledWith(mockWorkspace);\n    });\n\n    it('should open dropdown menu when more button is clicked', async () => {\n      const user = userEvent.setup();\n\n      render(<WorkspaceCard workspace={mockWorkspace} />);\n\n      // Find the more button (it appears on hover but we can still click it)\n      const moreButton = screen.getAllByRole('button').find(\n        (btn) => btn.querySelector('svg')?.getAttribute('data-lucide') === 'more-vertical'\n      );\n\n      if (moreButton) {\n        await user.click(moreButton);\n\n        // Menu items should be visible after clicking\n        expect(screen.getByText('Settings')).toBeInTheDocument();\n        expect(screen.getByText('Delete')).toBeInTheDocument();\n      }\n    });\n\n    it('should call onOpenSettings when settings menu item is clicked', async () => {\n      const handleSettings = vi.fn();\n      const user = userEvent.setup();\n\n      render(<WorkspaceCard workspace={mockWorkspace} onOpenSettings={handleSettings} />);\n\n      // Find and click the more button\n      const buttons = screen.getAllByRole('button');\n      const moreButton = buttons.find(\n        (btn) => btn.querySelector('svg')\n      );\n\n      if (moreButton) {\n        await user.click(moreButton);\n\n        const settingsButton = screen.getByText('Settings');\n        await user.click(settingsButton);\n\n        expect(handleSettings).toHaveBeenCalledWith('workspace-123');\n      }\n    });\n\n    it('should show confirmation dialog before deleting', async () => {\n      mockConfirm.mockReturnValue(false);\n      const handleDelete = vi.fn();\n      const user = userEvent.setup();\n\n      render(<WorkspaceCard workspace={mockWorkspace} onDelete={handleDelete} />);\n\n      // Find and click the more button\n      const buttons = screen.getAllByRole('button');\n      const moreButton = buttons.find((btn) => btn.querySelector('svg'));\n\n      if (moreButton) {\n        await user.click(moreButton);\n\n        const deleteButton = screen.getByText('Delete');\n        await user.click(deleteButton);\n\n        expect(mockConfirm).toHaveBeenCalledWith(\n          expect.stringContaining('Test Workspace')\n        );\n        expect(handleDelete).not.toHaveBeenCalled();\n      }\n    });\n\n    it('should call onDelete when delete is confirmed', async () => {\n      mockConfirm.mockReturnValue(true);\n      const handleDelete = vi.fn().mockResolvedValue(undefined);\n      const user = userEvent.setup();\n\n      render(<WorkspaceCard workspace={mockWorkspace} onDelete={handleDelete} />);\n\n      // Find and click the more button\n      const buttons = screen.getAllByRole('button');\n      const moreButton = buttons.find((btn) => btn.querySelector('svg'));\n\n      if (moreButton) {\n        await user.click(moreButton);\n\n        const deleteButton = screen.getByText('Delete');\n        await user.click(deleteButton);\n\n        expect(handleDelete).toHaveBeenCalledWith('workspace-123');\n      }\n    });\n\n    it('should not show delete option for owner', () => {\n      // This would be tested by checking that OWNER role members don't see delete\n      // The component itself doesn't handle permissions - it's up to the parent\n      render(<WorkspaceCard workspace={mockWorkspace} />);\n\n      // Delete option should still be visible in menu\n      // Permission checks should be done in the parent component\n      const deleteButton = screen.queryByText('Delete');\n      // Initially not visible until menu is open\n      expect(deleteButton).not.toBeInTheDocument();\n    });\n  });\n\n  // ============ CUSTOM LABELS ============\n\n  describe('Custom Labels', () => {\n    it('should use custom type labels', () => {\n      const customLabels = {\n        types: {\n          PERSONAL: 'My Personal',\n          WORK: 'My Work',\n          TEAM: 'My Team',\n        },\n      };\n\n      render(<WorkspaceCard workspace={mockWorkspace} labels={customLabels as any} />);\n\n      expect(screen.getByText('My Personal')).toBeInTheDocument();\n    });\n\n    it('should use custom stats labels', () => {\n      const customLabels = {\n        stats: {\n          projects: (count: number) => `${count} projects!`,\n          tasks: (count: number) => `${count} tasks!`,\n        },\n      };\n\n      render(<WorkspaceCard workspace={mockWorkspace} labels={customLabels as any} />);\n\n      expect(screen.getByText('5 projects!')).toBeInTheDocument();\n      expect(screen.getByText('25 tasks!')).toBeInTheDocument();\n    });\n\n    it('should use custom action labels', () => {\n      const customLabels = {\n        actions: {\n          settings: 'Configurar',\n          delete: 'Eliminar',\n        },\n      };\n\n      render(<WorkspaceCard workspace={mockWorkspace} labels={customLabels as any} />);\n\n      // Need to open the menu to see these labels\n      // This would require clicking the more button first\n    });\n\n    it('should use custom confirm delete message', async () => {\n      mockConfirm.mockReturnValue(true);\n      const handleDelete = vi.fn();\n      const user = userEvent.setup();\n\n      const customLabels = {\n        confirmDelete: (name: string) => `┬┐Seguro que quieres eliminar \"${name}\"?`,\n      };\n\n      render(\n        <WorkspaceCard workspace={mockWorkspace} onDelete={handleDelete} labels={customLabels as any} />\n      );\n\n      // Open menu and click delete\n      const buttons = screen.getAllByRole('button');\n      const moreButton = buttons.find((btn) => btn.querySelector('svg'));\n\n      if (moreButton) {\n        await user.click(moreButton);\n\n        const deleteButton = screen.getByText('Eliminar');\n        if (deleteButton) {\n          await user.click(deleteButton);\n        } else {\n          const deleteButtonEn = screen.getByText('Delete');\n          await user.click(deleteButtonEn);\n        }\n\n        expect(mockConfirm).toHaveBeenCalledWith(\n          '┬┐Seguro que quieres eliminar \"Test Workspace\"?'\n        );\n      }\n    });\n  });\n\n  // ============ ACCESSIBILITY TESTS ============\n\n  describe('Accessibility', () => {\n    it('should be keyboard navigable', async () => {\n      const handleClick = vi.fn();\n      render(<WorkspaceCard workspace={mockWorkspace} onWorkspaceClick={handleClick} />);\n\n      const card = screen.getByText('Test Workspace').closest('div');\n      card?.focus();\n\n      expect(document.activeElement).toBe(card);\n\n      // Press Enter to click\n      fireEvent.keyDown(card!, { key: 'Enter', code: 'Enter' });\n\n      // Note: The click handler is on the div, not a button\n      // This test verifies the element can receive focus\n    });\n\n    it('should have clickable area with cursor pointer', () => {\n      render(<WorkspaceCard workspace={mockWorkspace} />);\n\n      const card = screen.getByText('Test Workspace').closest('div');\n      expect(card).toHaveClass('cursor-pointer');\n    });\n\n    it('should have proper button roles for interactive elements', () => {\n      render(<WorkspaceCard workspace={mockWorkspace} />);\n\n      // Settings and delete buttons should have role=\"button\"\n      const buttons = screen.getAllByRole('button');\n      expect(buttons.length).toBeGreaterThan(0);\n    });\n\n    it('should announce workspace type to screen readers', () => {\n      render(<WorkspaceCard workspace={mockWorkspace} />);\n\n      const typeBadge = screen.getByText('Personal');\n      expect(typeBadge).toBeVisible();\n    });\n  });\n\n  // ============ VISUAL STATES ============\n\n  describe('Visual States', () => {\n    it('should apply border color based on workspace type', () => {\n      const { container } = render(<WorkspaceCard workspace={mockWorkspace} />);\n\n      const card = container.querySelector('.border-l-\\\\[4px\\\\]');\n      expect(card).toBeInTheDocument();\n    });\n\n    it('should use workspace color for gradient overlay', () => {\n      const { container } = render(<WorkspaceCard workspace={mockWorkspace} />);\n\n      // Check if the decorative gradient element exists\n      const gradient = container.querySelector('.absolute');\n      expect(gradient).toBeInTheDocument();\n    });\n\n    it('should render different colors for different workspace types', () => {\n      const { rerender } = render(<WorkspaceCard workspace={mockWorkspace} />);\n\n      // PERSONAL type uses cyan color\n      const personalCard = screen.getByText('Test Workspace').closest('div');\n      expect(personalCard).toBeInTheDocument();\n\n      // Rerender with WORK type\n      const workWorkspace = { ...mockWorkspace, type: 'WORK' as const };\n      rerender(<WorkspaceCard workspace={workWorkspace} />);\n\n      expect(screen.getByText('Work')).toBeInTheDocument();\n    });\n  });\n\n  // ============ EDGE CASES ============\n\n  describe('Edge Cases', () => {\n    it('should handle workspace without owner', () => {\n      const workspaceWithoutOwner = { ...mockWorkspace, ownerId: undefined };\n      expect(() =>\n        render(<WorkspaceCard workspace={workspaceWithoutOwner} />)\n      ).not.toThrow();\n    });\n\n    it('should handle very long workspace names', () => {\n      const longNameWorkspace = {\n        ...mockWorkspace,\n        name: 'This is a very very very long workspace name that should be truncated',\n      };\n\n      render(<WorkspaceCard workspace={longNameWorkspace} />);\n\n      expect(\n        screen.getByText('This is a very very very long workspace name that should be truncated')\n      ).toBeInTheDocument();\n    });\n\n    it('should handle very long descriptions', () => {\n      const longDescWorkspace = {\n        ...mockWorkspace,\n        description: 'This is a very long description that should be truncated with line-clamp-2 class',\n      };\n\n      render(<WorkspaceCard workspace={longDescWorkspace} />);\n\n      expect(\n        screen.getByText('This is a very long description that should be truncated with line-clamp-2 class')\n      ).toBeInTheDocument();\n    });\n\n    it('should handle missing stats gracefully', () => {\n      const workspaceWithoutStats = {\n        ...mockWorkspace,\n        projectsCount: undefined,\n        tasksCount: undefined,\n      };\n\n      expect(() =>\n        render(<WorkspaceCard workspace={workspaceWithoutStats} />)\n      ).not.toThrow();\n\n      expect(screen.getByText(/0 projects/)).toBeInTheDocument();\n    });\n\n    it('should handle null description', () => {\n      const workspaceWithNullDesc = { ...mockWorkspace, description: null };\n      render(<WorkspaceCard workspace={workspaceWithNullDesc} />);\n\n      // Should not show null as text\n      expect(screen.queryByText('null')).not.toBeInTheDocument();\n    });\n\n    it('should handle empty description', () => {\n      const workspaceWithEmptyDesc = { ...mockWorkspace, description: '' };\n      render(<WorkspaceCard workspace={workspaceWithEmptyDesc} />);\n\n      // Empty string is falsy, so description should not be shown\n      const descriptions = screen.queryAllByText(/A test workspace/);\n      expect(descriptions).toHaveLength(0);\n    });\n  });\n\n  // ============ SETTINGS DIALOG RENDER ============\n\n  describe('Settings Dialog', () => {\n    it('should render settings dialog when provided', () => {\n      const settingsDialog = <div data-testid=\"settings-dialog\">Settings Dialog</div>;\n\n      render(\n        <WorkspaceCard workspace={mockWorkspace} renderSettingsDialog={() => settingsDialog} />\n      );\n\n      expect(screen.getByTestId('settings-dialog')).toBeInTheDocument();\n    });\n\n    it('should not render settings dialog when not provided', () => {\n      render(<WorkspaceCard workspace={mockWorkspace} />);\n\n      expect(screen.queryByTestId('settings-dialog')).not.toBeInTheDocument();\n    });\n  });\n\n  // ============ ANIMATION DELAY ============\n\n  describe('Animation', () => {\n    it('should apply staggered animation delay based on index', () => {\n      const { rerender } = render(<WorkspaceCard workspace={mockWorkspace} index={0} />);\n\n      // Index 0 should have minimal delay\n      rerender(<WorkspaceCard workspace={mockWorkspace} index={2} />);\n\n      // Index 2 should have a delay\n      // The actual delay is handled by framer-motion which we mocked\n      expect(() =>\n        render(<WorkspaceCard workspace={mockWorkspace} index={5} />)\n      ).not.toThrow();\n    });\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\workspace\\__tests__\\workspace-members-settings.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":611,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":611,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18848,18851],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18848,18851],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Unit Tests for WorkspaceMembersSettings Component\n *\n * These tests verify the WorkspaceMembersSettings component behavior:\n * 1. Rendering member lists\n * 2. Rendering invitation lists\n * 3. Add member functionality\n * 4. Remove member functionality\n * 5. Loading states\n * 6. Error handling\n * 7. Custom labels\n */\n\nimport { describe, it, expect, vi, beforeEach, afterEach } from 'vitest';\nimport { render, screen, waitFor } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport {\n  WorkspaceMembersSettings,\n  type WorkspaceMember,\n  type WorkspaceInvitation,\n  type InviteFormValues,\n} from '../workspace-members-settings';\n\n// Mock the InviteMemberDialog component\nvi.mock('../invite-member-dialog.js', () => ({\n  InviteMemberDialog: ({\n    open,\n    onOpenChange,\n    onSubmit,\n    isPending,\n  }: {\n    open: boolean;\n    onOpenChange: (open: boolean) => void;\n    onSubmit: (data: InviteFormValues) => Promise<void>;\n    isPending: boolean;\n  }) => {\n    if (!open) return null;\n\n    return (\n      <div data-testid=\"invite-dialog\">\n        <button\n          onClick={() =>\n            onSubmit({ email: 'test@example.com', role: 'MEMBER' })\n          }\n          data-testid=\"submit-invite\"\n        >\n          Submit Invite\n        </button>\n        <button onClick={() => onOpenChange(false)} data-testid=\"cancel-invite\">\n          Cancel\n        </button>\n        {isPending && <span data-testid=\"invite-pending\">Inviting...</span>}\n      </div>\n    );\n  },\n}));\n\n// Mock window.confirm\nconst mockConfirm = vi.fn();\nObject.defineProperty(global, 'window', {\n  value: {\n    confirm: mockConfirm,\n  },\n  writable: true,\n});\n\ndescribe('WorkspaceMembersSettings Component', () => {\n  const mockMembers: WorkspaceMember[] = [\n    {\n      id: 'member-1',\n      userId: 'user-1',\n      role: 'OWNER',\n      joinedAt: '2024-01-01T00:00:00.000Z',\n      user: {\n        id: 'user-1',\n        name: 'John Doe',\n        email: 'john@example.com',\n        image: null,\n      },\n    },\n    {\n      id: 'member-2',\n      userId: 'user-2',\n      role: 'ADMIN',\n      joinedAt: '2024-01-15T00:00:00.000Z',\n      user: {\n        id: 'user-2',\n        name: 'Jane Smith',\n        email: 'jane@example.com',\n        image: null,\n      },\n    },\n    {\n      id: 'member-3',\n      userId: 'user-3',\n      role: 'MEMBER',\n      joinedAt: '2024-02-01T00:00:00.000Z',\n      user: {\n        id: 'user-3',\n        name: 'Bob Johnson',\n        email: 'bob@example.com',\n        image: null,\n      },\n    },\n  ];\n\n  const mockInvitations: WorkspaceInvitation[] = [\n    {\n      id: 'invite-1',\n      email: 'pending@example.com',\n      role: 'MEMBER',\n      status: 'PENDING',\n      createdAt: '2024-02-15T00:00:00.000Z',\n    },\n    {\n      id: 'invite-2',\n      email: 'expired@example.com',\n      role: 'VIEWER',\n      status: 'EXPIRED',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n  ];\n\n  const defaultProps = {\n    members: mockMembers,\n    invitations: mockInvitations,\n    isLoading: false,\n    onInviteMember: vi.fn(),\n    onRemoveMember: vi.fn(),\n    onDeleteInvitation: vi.fn(),\n    isInvitePending: false,\n    isRemovePending: false,\n  };\n\n  beforeEach(() => {\n    mockConfirm.mockReset();\n  });\n\n  afterEach(() => {\n    vi.clearAllMocks();\n  });\n\n  // ============ RENDERING TESTS ============\n\n  describe('Rendering Members', () => {\n    it('should render all members', () => {\n      render(<WorkspaceMembersSettings {...defaultProps} />);\n\n      expect(screen.getByText('John Doe')).toBeInTheDocument();\n      expect(screen.getByText('jane@example.com')).toBeInTheDocument();\n      expect(screen.getByText('Bob Johnson')).toBeInTheDocument();\n    });\n\n    it('should render member roles with badges', () => {\n      render(<WorkspaceMembersSettings {...defaultProps} />);\n\n      expect(screen.getByText('Creator')).toBeInTheDocument();\n      expect(screen.getByText('Admin')).toBeInTheDocument();\n      expect(screen.getByText('Member')).toBeInTheDocument();\n    });\n\n    it('should render member emails', () => {\n      render(<WorkspaceMembersSettings {...defaultProps} />);\n\n      expect(screen.getByText('john@example.com')).toBeInTheDocument();\n      expect(screen.getByText('jane@example.com')).toBeInTheDocument();\n      expect(screen.getByText('bob@example.com')).toBeInTheDocument();\n    });\n\n    it('should render joined dates', () => {\n      render(<WorkspaceMembersSettings {...defaultProps} />);\n\n      // Dates are formatted as \"MMM d, yyyy\"\n      expect(screen.getByText('Jan 1, 2024')).toBeInTheDocument();\n      expect(screen.getByText('Jan 15, 2024')).toBeInTheDocument();\n      expect(screen.getByText('Feb 1, 2024')).toBeInTheDocument();\n    });\n\n    it('should render avatar fallbacks for users without images', () => {\n      render(<WorkspaceMembersSettings {...defaultProps} />);\n\n      // Avatar fallbacks should show first letter of name or email\n      expect(screen.getByText('J')).toBeInTheDocument(); // John\n      expect(screen.getByText('B')).toBeInTheDocument(); // Bob\n    });\n\n    it('should show remove button for non-OWNER members', () => {\n      render(<WorkspaceMembersSettings {...defaultProps} />);\n\n      // Owner should not have remove option\n      const johnRow = screen.getByText('John Doe').closest('tr');\n      expect(johnRow?.querySelector('button')).toBeNull();\n\n      // Admin should have remove option (in dropdown menu)\n      const janeRow = screen.getByText('Jane Smith').closest('tr');\n      expect(janeRow?.querySelector('button')).toBeInTheDocument();\n    });\n\n    it('should handle members without names', () => {\n      const membersWithoutNames: WorkspaceMember[] = [\n        {\n          id: 'member-1',\n          userId: 'user-1',\n          role: 'MEMBER',\n          joinedAt: '2024-01-01T00:00:00.000Z',\n          user: {\n            id: 'user-1',\n            email: 'noname@example.com',\n          },\n        },\n      ];\n\n      render(<WorkspaceMembersSettings {...defaultProps} members={membersWithoutNames} />);\n\n      expect(screen.getByText('Unknown User')).toBeInTheDocument();\n      expect(screen.getByText('noname@example.com')).toBeInTheDocument();\n    });\n\n    it('should show email as avatar fallback when name is missing', () => {\n      const membersWithoutNames: WorkspaceMember[] = [\n        {\n          id: 'member-1',\n          userId: 'user-1',\n          role: 'MEMBER',\n          joinedAt: '2024-01-01T00:00:00.000Z',\n          user: {\n            id: 'user-1',\n            email: 'test@example.com',\n          },\n        },\n      ];\n\n      render(<WorkspaceMembersSettings {...defaultProps} members={membersWithoutNames} />);\n\n      // First letter of email should be in avatar\n      const avatars = screen.getAllByText('t');\n      expect(avatars.length).toBeGreaterThan(0);\n    });\n  });\n\n  // ============ RENDERING INVITATIONS ============\n\n  describe('Rendering Invitations', () => {\n    it('should render pending invitations', () => {\n      render(<WorkspaceMembersSettings {...defaultProps} />);\n\n      expect(screen.getByText('pending@example.com')).toBeInTheDocument();\n      expect(screen.getByText('expired@example.com')).toBeInTheDocument();\n    });\n\n    it('should render invitation roles', () => {\n      render(<WorkspaceMembersSettings {...defaultProps} />);\n\n      const memberBadges = screen.getAllByText('Member');\n      expect(memberBadges.length).toBeGreaterThan(0);\n\n      const viewerBadges = screen.getAllByText('Viewer');\n      expect(viewerBadges.length).toBeGreaterThan(0);\n    });\n\n    it('should render invitation status badges', () => {\n      render(<WorkspaceMembersSettings {...defaultProps} />);\n\n      expect(screen.getByText('pending')).toBeInTheDocument();\n      expect(screen.getByText('expired')).toBeInTheDocument();\n    });\n\n    it('should render invitation dates', () => {\n      render(<WorkspaceMembersSettings {...defaultProps} />);\n\n      expect(screen.getByText('Feb 15, 2024')).toBeInTheDocument();\n    });\n\n    it('should show delete button for invitations', () => {\n      render(<WorkspaceMembersSettings {...defaultProps} />);\n\n      // Delete buttons should be visible for invitations\n      const deleteButtons = screen.getAllByRole('button').filter(\n        (btn) => btn.querySelector('svg')\n      );\n      expect(deleteButtons.length).toBeGreaterThan(0);\n    });\n\n    it('should not render invitations section when empty', () => {\n      render(<WorkspaceMembersSettings {...defaultProps} invitations={[]} />);\n\n      expect(screen.queryByText('Pending Invitations')).not.toBeInTheDocument();\n    });\n  });\n\n  // ============ LOADING STATES ============\n\n  describe('Loading States', () => {\n    it('should show loading message when isLoading is true', () => {\n      render(<WorkspaceMembersSettings {...defaultProps} isLoading={true} />);\n\n      expect(screen.getByText('Loading...')).toBeInTheDocument();\n    });\n\n    it('should not render members table when loading', () => {\n      render(<WorkspaceMembersSettings {...defaultProps} isLoading={true} />);\n\n      expect(screen.queryByText('John Doe')).not.toBeInTheDocument();\n    });\n  });\n\n  // ============ USER INTERACTIONS ============\n\n  describe('User Interactions', () => {\n    it('should open invite dialog when invite button is clicked', async () => {\n      const user = userEvent.setup();\n      render(<WorkspaceMembersSettings {...defaultProps} />);\n\n      const inviteButton = screen.getByRole('button', { name: /invite member/i });\n      await user.click(inviteButton);\n\n      expect(screen.getByTestId('invite-dialog')).toBeInTheDocument();\n    });\n\n    it('should call onInviteMember when invite form is submitted', async () => {\n      const user = userEvent.setup();\n      const onInviteMember = vi.fn().mockResolvedValue({});\n\n      render(\n        <WorkspaceMembersSettings {...defaultProps} onInviteMember={onInviteMember} />\n      );\n\n      // Open invite dialog\n      const inviteButton = screen.getByRole('button', { name: /invite member/i });\n      await user.click(inviteButton);\n\n      // Submit invite\n      const submitButton = screen.getByTestId('submit-invite');\n      await user.click(submitButton);\n\n      await waitFor(() => {\n        expect(onInviteMember).toHaveBeenCalledWith({\n          email: 'test@example.com',\n          role: 'MEMBER',\n        });\n      });\n    });\n\n    it('should show pending state during invite', async () => {\n      const user = userEvent.setup();\n      const onInviteMember = vi.fn(() => new Promise((resolve) => setTimeout(resolve, 100)));\n\n      render(\n        <WorkspaceMembersSettings\n          {...defaultProps}\n          onInviteMember={onInviteMember}\n          isInvitePending={true}\n        />\n      );\n\n      // Open invite dialog\n      const inviteButton = screen.getByRole('button', { name: /invite member/i });\n      await user.click(inviteButton);\n\n      expect(screen.getByTestId('invite-pending')).toBeInTheDocument();\n    });\n\n    it('should show confirmation before removing member', async () => {\n      const user = userEvent.setup();\n      const onRemoveMember = vi.fn();\n      mockConfirm.mockReturnValue(false);\n\n      render(\n        <WorkspaceMembersSettings {...defaultProps} onRemoveMember={onRemoveMember} />\n      );\n\n      // Find a non-OWNER member's action button\n      const memberRows = screen.getAllByRole('row');\n      const janeRow = memberRows.find((row) =>\n        row.textContent?.includes('Jane Smith')\n      );\n\n      const actionButton = janeRow?.querySelector('button');\n      if (actionButton) {\n        await user.click(actionButton);\n\n        // Should show confirmation\n        expect(mockConfirm).toHaveBeenCalledWith(\n          'Are you sure you want to remove this member?'\n        );\n\n        // Should not call onRemoveMember when cancelled\n        expect(onRemoveMember).not.toHaveBeenCalled();\n      }\n    });\n\n    it('should call onRemoveMember when removal is confirmed', async () => {\n      const user = userEvent.setup();\n      const onRemoveMember = vi.fn();\n      mockConfirm.mockReturnValue(true);\n\n      render(\n        <WorkspaceMembersSettings {...defaultProps} onRemoveMember={onRemoveMember} />\n      );\n\n      // Find a non-OWNER member's action button\n      const memberRows = screen.getAllByRole('row');\n      const janeRow = memberRows.find((row) =>\n        row.textContent?.includes('Jane Smith')\n      );\n\n      const actionButton = janeRow?.querySelector('button');\n      if (actionButton) {\n        await user.click(actionButton);\n\n        await waitFor(() => {\n          expect(onRemoveMember).toHaveBeenCalledWith('user-2');\n        });\n      }\n    });\n\n    it('should call onDeleteInvitation when delete button is clicked', async () => {\n      const user = userEvent.setup();\n      const onDeleteInvitation = vi.fn();\n\n      render(\n        <WorkspaceMembersSettings\n          {...defaultProps}\n          onDeleteInvitation={onDeleteInvitation}\n        />\n      );\n\n      // Find delete buttons for invitations\n      const deleteButtons = screen.getAllByRole('button').filter(\n        (btn) => btn.querySelector('svg')\n      );\n\n      if (deleteButtons.length > 0) {\n        await user.click(deleteButtons[0]);\n\n        expect(onDeleteInvitation).toHaveBeenCalledWith('invite-1');\n      }\n    });\n  });\n\n  // ============ CUSTOM LABELS ============\n\n  describe('Custom Labels', () => {\n    it('should use custom labels', () => {\n      const customLabels = {\n        membersTitle: 'Team',\n        membersDescription: 'Manage your team members',\n        inviteMember: 'Add New Member',\n        user: 'User Name',\n        role: 'Role Type',\n        joined: 'Joined On',\n        remove: 'Remove Member',\n        confirmRemove: 'Really remove?',\n        invitationsTitle: 'Pending',\n        invitationsDescription: 'Invites waiting',\n        roles: {\n          owner: 'Owner',\n          admin: 'Admin',\n          member: 'Team Member',\n          viewer: 'Guest',\n        },\n      };\n\n      render(<WorkspaceMembersSettings {...defaultProps} labels={customLabels} />);\n\n      expect(screen.getByText('Team')).toBeInTheDocument();\n      expect(screen.getByText('Manage your team members')).toBeInTheDocument();\n      expect(screen.getByText('Add New Member')).toBeInTheDocument();\n      expect(screen.getByText('Owner')).toBeInTheDocument();\n      expect(screen.getByText('Team Member')).toBeInTheDocument();\n    });\n\n    it('should use custom invite dialog labels', () => {\n      const customLabels = {\n        inviteDialog: {\n          title: 'Send Invitation',\n          description: 'Invite a new team member',\n          emailLabel: 'Email Address',\n          roleLabel: 'Role',\n          cancel: 'Close',\n          invite: 'Send',\n        },\n      };\n\n      render(<WorkspaceMembersSettings {...defaultProps} labels={customLabels} />);\n\n      // Labels are passed to the InviteMemberDialog\n      // The dialog is mocked so we can't test the actual labels here\n    });\n  });\n\n  // ============ EMPTY STATES ============\n\n  describe('Empty States', () => {\n    it('should render empty members list', () => {\n      render(<WorkspaceMembersSettings {...defaultProps} members={[]} />);\n\n      expect(screen.getByText('John Doe')).not.toBeInTheDocument();\n      // Table should still be rendered\n      expect(screen.getByRole('table')).toBeInTheDocument();\n    });\n\n    it('should render with only owner member', () => {\n      const onlyOwner: WorkspaceMember[] = [\n        {\n          id: 'member-1',\n          userId: 'user-1',\n          role: 'OWNER',\n          joinedAt: '2024-01-01T00:00:00.000Z',\n          user: {\n            id: 'user-1',\n            name: 'Owner User',\n            email: 'owner@example.com',\n            image: null,\n          },\n        },\n      ];\n\n      render(<WorkspaceMembersSettings {...defaultProps} members={onlyOwner} />);\n\n      expect(screen.getByText('Owner User')).toBeInTheDocument();\n      expect(screen.getByText('Creator')).toBeInTheDocument();\n    });\n  });\n\n  // ============ ACCESSIBILITY ============\n\n  describe('Accessibility', () => {\n    it('should have proper table structure', () => {\n      render(<WorkspaceMembersSettings {...defaultProps} />);\n\n      const table = screen.getByRole('table');\n      expect(table).toBeInTheDocument();\n\n      // Check for table headers\n      expect(screen.getByRole('columnheader', { name: /user/i })).toBeInTheDocument();\n      expect(screen.getByRole('columnheader', { name: /role/i })).toBeInTheDocument();\n      expect(screen.getByRole('columnheader', { name: /joined/i })).toBeInTheDocument();\n    });\n\n    it('should have clickable buttons for actions', () => {\n      render(<WorkspaceMembersSettings {...defaultProps} />);\n\n      const buttons = screen.getAllByRole('button');\n      expect(buttons.length).toBeGreaterThan(0);\n\n      buttons.forEach((button) => {\n        expect(button).toBeVisible();\n      });\n    });\n\n    it('should announce role changes to screen readers', () => {\n      render(<WorkspaceMembersSettings {...defaultProps} />);\n\n      // Role badges should be visible\n      const roleBadges = screen.getAllByText(/Creator|Admin|Member/);\n      roleBadges.forEach((badge) => {\n        expect(badge).toBeVisible();\n      });\n    });\n  });\n\n  // ============ ROLE DISPLAY ============\n\n  describe('Role Display', () => {\n    it('should display all role types correctly', () => {\n      const allRoles: WorkspaceMember[] = [\n        {\n          id: 'member-1',\n          userId: 'user-1',\n          role: 'OWNER',\n          joinedAt: '2024-01-01T00:00:00.000Z',\n          user: { id: 'user-1', name: 'Owner', email: 'owner@example.com' },\n        },\n        {\n          id: 'member-2',\n          userId: 'user-2',\n          role: 'ADMIN',\n          joinedAt: '2024-01-01T00:00:00.000Z',\n          user: { id: 'user-2', name: 'Admin', email: 'admin@example.com' },\n        },\n        {\n          id: 'member-3',\n          userId: 'user-3',\n          role: 'MEMBER',\n          joinedAt: '2024-01-01T00:00:00.000Z',\n          user: { id: 'user-3', name: 'Member', email: 'member@example.com' },\n        },\n        {\n          id: 'member-4',\n          userId: 'user-4',\n          role: 'VIEWER',\n          joinedAt: '2024-01-01T00:00:00.000Z',\n          user: { id: 'user-4', name: 'Viewer', email: 'viewer@example.com' },\n        },\n      ];\n\n      render(<WorkspaceMembersSettings {...defaultProps} members={allRoles} />);\n\n      expect(screen.getByText('Creator')).toBeInTheDocument();\n      expect(screen.getByText('Admin')).toBeInTheDocument();\n      expect(screen.getByText('Member')).toBeInTheDocument();\n      expect(screen.getByText('Viewer')).toBeInTheDocument();\n    });\n\n    it('should use lowercase for unknown roles', () => {\n      const unknownRole: WorkspaceMember[] = [\n        {\n          id: 'member-1',\n          userId: 'user-1',\n          role: 'UNKNOWN_ROLE' as any,\n          joinedAt: '2024-01-01T00:00:00.000Z',\n          user: { id: 'user-1', name: 'Unknown', email: 'unknown@example.com' },\n        },\n      ];\n\n      render(<WorkspaceMembersSettings {...defaultProps} members={unknownRole} />);\n\n      expect(screen.getByText('unknown_role')).toBeInTheDocument();\n    });\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\workspace\\__tests__\\workspace-selector.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'user' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":437,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":437,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/// <reference types=\"@testing-library/jest-dom\" />\n/**\n * Unit Tests for WorkspaceSelector Component\n *\n * These tests verify the WorkspaceSelector component behavior:\n * 1. Rendering workspace list\n * 2. Opening/closing dropdown\n * 3. Selecting workspace\n * 4. Searching/filtering\n * 5. Grouping by type\n * 6. Creating new workspace\n * 7. Loading states\n * 8. Empty states\n */\n\nimport { describe, it, expect, vi, beforeEach, afterEach } from 'vitest';\nimport { render, screen, waitFor } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { WorkspaceSelector, type WorkspaceSelectorItem } from '../workspace-selector';\n\ndescribe('WorkspaceSelector Component', () => {\n  const mockWorkspaces: WorkspaceSelectorItem[] = [\n    {\n      id: 'ws-1',\n      slug: 'personal-ws',\n      name: 'Personal Workspace',\n      type: 'PERSONAL',\n      color: '#06b6d4',\n      stats: { projectCount: 3, taskCount: 15 },\n    },\n    {\n      id: 'ws-2',\n      slug: 'work-ws',\n      name: 'Work Projects',\n      type: 'WORK',\n      color: '#a855f7',\n      stats: { projectCount: 5, taskCount: 25 },\n    },\n    {\n      id: 'ws-3',\n      slug: 'team-ws',\n      name: 'Team Collaboration',\n      type: 'TEAM',\n      color: '#ec4899',\n      stats: { projectCount: 2, taskCount: 8 },\n    },\n  ];\n\n  const defaultProps = {\n    workspaces: mockWorkspaces,\n    selectedWorkspaceId: 'ws-1',\n    onSelect: vi.fn(),\n    onCreateClick: vi.fn(),\n  };\n\n  beforeEach(() => {\n    vi.clearAllMocks();\n  });\n\n  afterEach(() => {\n    vi.clearAllMocks();\n  });\n\n  // ============ RENDERING TESTS ============\n\n  describe('Rendering', () => {\n    it('should render selected workspace name', () => {\n      render(<WorkspaceSelector {...defaultProps} />);\n\n      expect(screen.getByText('Personal Workspace')).toBeInTheDocument();\n    });\n\n    it('should render workspace stats', () => {\n      render(<WorkspaceSelector {...defaultProps} />);\n\n      // Should show project count\n      expect(screen.getByText('3')).toBeInTheDocument();\n    });\n\n    it('should render first workspace when none selected', () => {\n      render(<WorkspaceSelector {...defaultProps} selectedWorkspaceId={null} />);\n\n      expect(screen.getByText('Personal Workspace')).toBeInTheDocument();\n    });\n\n    it('should show different colors for different workspace types', () => {\n      const { rerender } = render(<WorkspaceSelector {...defaultProps} selectedWorkspaceId=\"ws-1\" />);\n\n      // PERSONAL workspace selected\n      expect(screen.getByText('Personal Workspace')).toBeInTheDocument();\n\n      rerender(<WorkspaceSelector {...defaultProps} selectedWorkspaceId=\"ws-2\" />);\n\n      // WORK workspace selected\n      expect(screen.getByText('Work Projects')).toBeInTheDocument();\n    });\n\n    it('should render chevron icon', () => {\n      render(<WorkspaceSelector {...defaultProps} />);\n\n      // The chevron icon should be present (lucide icon)\n      // The chevron icon should be present (lucide icon)\n      // Lucide icons render as svgs with specific classes\n      const trigger = screen.getByRole('button');\n      expect(trigger.querySelector('svg')).toBeInTheDocument();\n    });\n  });\n\n  // ============ DROPDOWN INTERACTIONS ============\n\n  describe('Dropdown Interactions', () => {\n    it('should open dropdown when trigger is clicked', async () => {\n      const user = userEvent.setup();\n      render(<WorkspaceSelector {...defaultProps} />);\n\n      const trigger = screen.getByText('Personal Workspace').closest('button');\n      await user.click(trigger!);\n\n      // Dropdown content should be visible (rendered in DOM)\n      expect(screen.getByText('Personal')).toBeInTheDocument();\n      expect(screen.getByText('Work')).toBeInTheDocument();\n      expect(screen.getByText('Team')).toBeInTheDocument();\n    });\n\n    it('should call onSelect when workspace is clicked', async () => {\n      const user = userEvent.setup();\n      const onSelect = vi.fn();\n\n      render(<WorkspaceSelector {...defaultProps} onSelect={onSelect} />);\n\n      // Open dropdown\n      const trigger = screen.getByText('Personal Workspace').closest('button');\n      await user.click(trigger!);\n\n      // Click on a different workspace\n      const workWorkspace = screen.getByText('Work Projects');\n      await user.click(workWorkspace);\n\n      expect(onSelect).toHaveBeenCalledWith(mockWorkspaces[1]);\n    });\n\n    it('should close dropdown after selecting workspace', async () => {\n      const user = userEvent.setup();\n      render(<WorkspaceSelector {...defaultProps} />);\n\n      const trigger = screen.getByText('Personal Workspace').closest('button');\n      await user.click(trigger!);\n\n      // Dropdown should be open\n      expect(screen.getByText('Personal')).toBeInTheDocument();\n\n      // Select a workspace\n      const workWorkspace = screen.getByText('Work Projects');\n      await user.click(workWorkspace);\n\n      // After selection, dropdown should close (content removed from DOM)\n      await waitFor(() => {\n        expect(screen.queryByText('Personal')).not.toBeInTheDocument();\n      });\n    });\n\n    it('should show checkmark for selected workspace', async () => {\n      const user = userEvent.setup();\n      render(<WorkspaceSelector {...defaultProps} selectedWorkspaceId=\"ws-2\" />);\n\n      // Open dropdown\n      const trigger = screen.getByText('Work Projects').closest('button');\n      await user.click(trigger!);\n\n      // Checkmark should be on selected workspace\n      const checkIcon = document.querySelector('[data-lucide=\"check\"]');\n      expect(checkIcon).toBeInTheDocument();\n    });\n  });\n\n  // ============ SEARCH FUNCTIONALITY ============\n\n  describe('Search Functionality', () => {\n    it('should filter workspaces by search query', async () => {\n      const user = userEvent.setup();\n      render(<WorkspaceSelector {...defaultProps} />);\n\n      // Open dropdown\n      const trigger = screen.getByText('Personal Workspace').closest('button');\n      await user.click(trigger!);\n\n      // Type in search\n      const searchInput = screen.getByRole('textbox');\n      await user.type(searchInput, 'Personal');\n\n      // Only Personal workspace should be visible\n      expect(screen.getByText('Personal Workspace')).toBeInTheDocument();\n      expect(screen.queryByText('Work Projects')).not.toBeInTheDocument();\n      expect(screen.queryByText('Team Collaboration')).not.toBeInTheDocument();\n    });\n\n    it('should show no results when search matches nothing', async () => {\n      const user = userEvent.setup();\n      render(<WorkspaceSelector {...defaultProps} />);\n\n      // Open dropdown\n      const trigger = screen.getByText('Personal Workspace').closest('button');\n      await user.click(trigger!);\n\n      // Type non-matching search\n      const searchInput = screen.getByRole('textbox');\n      await user.type(searchInput, 'NonExistent');\n\n      expect(screen.getByText('No workspaces found')).toBeInTheDocument();\n    });\n\n    it('should be case-insensitive when searching', async () => {\n      const user = userEvent.setup();\n      render(<WorkspaceSelector {...defaultProps} />);\n\n      // Open dropdown\n      const trigger = screen.getByText('Personal Workspace').closest('button');\n      await user.click(trigger!);\n\n      // Type lowercase\n      const searchInput = screen.getByRole('textbox');\n      await user.type(searchInput, 'team');\n\n      expect(screen.getByText('Team Collaboration')).toBeInTheDocument();\n    });\n  });\n\n  // ============ GROUPING BY TYPE ============\n\n  describe('Grouping by Type', () => {\n    it('should group workspaces by type', async () => {\n      const user = userEvent.setup();\n      render(<WorkspaceSelector {...defaultProps} />);\n\n      // Open dropdown\n      const trigger = screen.getByText('Personal Workspace').closest('button');\n      await user.click(trigger!);\n\n      // Should show type headers\n      expect(screen.getByText('Personal')).toBeInTheDocument();\n      expect(screen.getByText('Work')).toBeInTheDocument();\n      expect(screen.getByText('Team')).toBeInTheDocument();\n    });\n\n    it('should show workspaces under correct type groups', async () => {\n      const user = userEvent.setup();\n      render(<WorkspaceSelector {...defaultProps} />);\n\n      // Open dropdown\n      const trigger = screen.getByText('Personal Workspace').closest('button');\n      await user.click(trigger!);\n\n      // All workspaces should be visible\n      expect(screen.getByText('Personal Workspace')).toBeInTheDocument();\n      expect(screen.getByText('Work Projects')).toBeInTheDocument();\n      expect(screen.getByText('Team Collaboration')).toBeInTheDocument();\n    });\n\n    it('should hide empty type groups', async () => {\n      const user = userEvent.setup();\n      const onlyPersonalWorkspaces: WorkspaceSelectorItem[] = [\n        {\n          id: 'ws-1',\n          slug: 'personal',\n          name: 'Personal Only',\n          type: 'PERSONAL',\n          color: '#06b6d4',\n        },\n      ];\n\n      render(<WorkspaceSelector {...defaultProps} workspaces={onlyPersonalWorkspaces} />);\n\n      // Open dropdown\n      const trigger = screen.getByText('Personal Only').closest('button');\n      await user.click(trigger!);\n\n      // Only Personal group should be visible\n      expect(screen.getByText('Personal')).toBeInTheDocument();\n      expect(screen.queryByText('Work')).not.toBeInTheDocument();\n      expect(screen.queryByText('Team')).not.toBeInTheDocument();\n    });\n  });\n\n  // ============ CREATE WORKSPACE ============\n\n  describe('Create Workspace', () => {\n    it('should show create workspace button in dropdown', async () => {\n      const user = userEvent.setup();\n      render(<WorkspaceSelector {...defaultProps} />);\n\n      // Open dropdown\n      const trigger = screen.getByText('Personal Workspace').closest('button');\n      await user.click(trigger!);\n\n      // Create button should be at bottom\n      const createButton = screen.getByText('Create Workspace');\n      expect(createButton).toBeInTheDocument();\n    });\n\n    it('should call onCreateClick when create button is clicked', async () => {\n      const user = userEvent.setup();\n      const onCreateClick = vi.fn();\n\n      render(<WorkspaceSelector {...defaultProps} onCreateClick={onCreateClick} />);\n\n      // Open dropdown\n      const trigger = screen.getByText('Personal Workspace').closest('button');\n      await user.click(trigger!);\n\n      // Click create button\n      const createButton = screen.getByText('Create Workspace');\n      await user.click(createButton);\n\n      expect(onCreateClick).toHaveBeenCalledTimes(1);\n    });\n\n    it('should close dropdown after clicking create', async () => {\n      const user = userEvent.setup();\n      render(<WorkspaceSelector {...defaultProps} />);\n\n      // Open dropdown\n      const trigger = screen.getByText('Personal Workspace').closest('button');\n      await user.click(trigger!);\n\n      // Click create\n      const createButton = screen.getByText('Create Workspace');\n      await user.click(createButton);\n\n      // Dropdown should close\n      await waitFor(() => {\n        expect(screen.queryByText('Create Workspace')).not.toBeInTheDocument();\n      });\n    });\n  });\n\n  // ============ LOADING STATES ============\n\n  describe('Loading States', () => {\n    it('should show skeleton when loading', () => {\n      render(<WorkspaceSelector {...defaultProps} isLoading={true} />);\n\n      // Should show skeleton elements (animate-pulse)\n      const skeletonElements = document.querySelectorAll('.animate-pulse');\n      expect(skeletonElements.length).toBeGreaterThan(0);\n    });\n\n    it('should not show dropdown when loading', () => {\n      render(<WorkspaceSelector {...defaultProps} isLoading={true} />);\n\n      // Trigger should still be visible\n      const trigger = screen.getByRole('button');\n      expect(trigger).toBeInTheDocument();\n    });\n  });\n\n  // ============ EMPTY STATES ============\n\n  describe('Empty States', () => {\n    it('should show create button when no workspaces', () => {\n      render(<WorkspaceSelector {...defaultProps} workspaces={[]} />);\n\n      expect(screen.getByText('Create Workspace')).toBeInTheDocument();\n    });\n\n    it('should call onCreateClick when clicking create in empty state', async () => {\n      const user = userEvent.setup();\n      const onCreateClick = vi.fn();\n\n      render(<WorkspaceSelector {...defaultProps} workspaces={[]} onCreateClick={onCreateClick} />);\n\n      const createButton = screen.getByText('Create Workspace');\n      await user.click(createButton);\n\n      expect(onCreateClick).toHaveBeenCalledTimes(1);\n    });\n\n    it('should show dashed border in empty state', () => {\n      render(<WorkspaceSelector {...defaultProps} workspaces={[]} />);\n\n      const createButton = screen.getByRole('button');\n      expect(createButton).toHaveClass('border-dashed');\n    });\n  });\n\n  // ============ CUSTOM LABELS ============\n\n  describe('Custom Labels', () => {\n    it('should use custom create label', () => {\n      render(\n        <WorkspaceSelector\n          {...defaultProps}\n          workspaces={[]}\n          labels={{ create: 'New Workspace' }}\n        />\n      );\n\n      expect(screen.getByText('New Workspace')).toBeInTheDocument();\n    });\n\n    it('should use custom search placeholder', async () => {\n      const user = userEvent.setup();\n      render(<WorkspaceSelector {...defaultProps} labels={{ search: 'Find...' }} />);\n\n      // Open dropdown\n      const trigger = screen.getByText('Personal Workspace').closest('button');\n      await user.click(trigger!);\n\n      const searchInput = screen.getByPlaceholderText('Find...');\n      expect(searchInput).toBeInTheDocument();\n    });\n\n    it('should use custom type labels', async () => {\n      const user = userEvent.setup();\n      render(\n        <WorkspaceSelector\n          {...defaultProps}\n          labels={{\n            types: {\n              personal: 'My Personal',\n              work: 'My Work',\n              team: 'My Team',\n            },\n          }}\n        />\n      );\n\n      // Open dropdown\n      const trigger = screen.getByText('Personal Workspace').closest('button');\n      await user.click(trigger!);\n\n      expect(screen.getByText('My Personal')).toBeInTheDocument();\n      expect(screen.getByText('My Work')).toBeInTheDocument();\n      expect(screen.getByText('My Team')).toBeInTheDocument();\n    });\n\n    it('should use custom stats labels', async () => {\n      const user = userEvent.setup();\n      render(\n        <WorkspaceSelector\n          {...defaultProps}\n          labels={{\n            stats: {\n              projects: 'projs',\n              tasks: 'tasks',\n            },\n          }}\n        />\n      );\n\n      // Stats should be visible without opening dropdown\n      expect(screen.getByText(/projs/)).toBeInTheDocument();\n    });\n  });\n\n  // ============ ACCESSIBILITY ============\n\n  describe('Accessibility', () => {\n    it('should have clickable trigger button', () => {\n      render(<WorkspaceSelector {...defaultProps} />);\n\n      const trigger = screen.getByRole('button');\n      expect(trigger).toBeInTheDocument();\n    });\n\n    it('should have accessible search input', async () => {\n      const user = userEvent.setup();\n      render(<WorkspaceSelector {...defaultProps} />);\n\n      // Open dropdown\n      const trigger = screen.getByText('Personal Workspace').closest('button');\n      await user.click(trigger!);\n\n      const searchInput = screen.getByRole('textbox');\n      expect(searchInput).toBeInTheDocument();\n    });\n\n    it('should have keyboard navigation support', () => {\n      render(<WorkspaceSelector {...defaultProps} />);\n\n      const trigger = screen.getByRole('button');\n      trigger?.focus();\n\n      expect(document.activeElement).toBe(trigger);\n    });\n  });\n\n  // ============ STATS DISPLAY ============\n\n  describe('Stats Display', () => {\n    it('should show project count in dropdown', async () => {\n      const user = userEvent.setup();\n      render(<WorkspaceSelector {...defaultProps} />);\n\n      // Open dropdown\n      const trigger = screen.getByText('Personal Workspace').closest('button');\n      await user.click(trigger!);\n\n      // Stats should be visible in dropdown items\n      expect(screen.getByText('3')).toBeInTheDocument();\n    });\n\n    it('should show task count in dropdown', async () => {\n      const user = userEvent.setup();\n      render(<WorkspaceSelector {...defaultProps} />);\n\n      // Open dropdown\n      const trigger = screen.getByText('Personal Workspace').closest('button');\n      await user.click(trigger!);\n\n      expect(screen.getByText('15')).toBeInTheDocument();\n    });\n\n    it('should show zero for missing stats', () => {\n      const workspaceWithoutStats: WorkspaceSelectorItem[] = [\n        {\n          id: 'ws-1',\n          slug: 'no-stats',\n          name: 'No Stats',\n          type: 'PERSONAL',\n          color: '#06b6d4',\n        },\n      ];\n\n      render(<WorkspaceSelector {...defaultProps} workspaces={workspaceWithoutStats} />);\n\n      expect(screen.getByText('0')).toBeInTheDocument();\n    });\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\workspace\\create-workspace-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\workspace\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\workspace\\invite-member-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\workspace\\workspace-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\workspace\\workspace-members-settings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\components\\workspace\\workspace-selector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\stories\\Badge.stories.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\stories\\Button.stories.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\stories\\Button.stories.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Trash2' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { Meta, StoryObj } from \"@storybook/react\";\r\nimport { Button } from \"../components/ui/button\";\r\nimport { Plus, Trash2, Loader2 } from \"lucide-react\";\r\n\r\nconst meta: Meta<typeof Button> = {\r\n  title: \"UI/Button\",\r\n  component: Button,\r\n  parameters: {\r\n    layout: \"centered\",\r\n    docs: {\r\n      description: {\r\n        component:\r\n          \"A versatile button component with multiple variants and sizes.\",\r\n      },\r\n    },\r\n  },\r\n  tags: [\"autodocs\"],\r\n  argTypes: {\r\n    variant: {\r\n      control: \"select\",\r\n      options: [\r\n        \"default\",\r\n        \"destructive\",\r\n        \"outline\",\r\n        \"secondary\",\r\n        \"ghost\",\r\n        \"link\",\r\n      ],\r\n      description: \"The visual style of the button\",\r\n    },\r\n    size: {\r\n      control: \"select\",\r\n      options: [\"default\", \"sm\", \"lg\", \"icon\"],\r\n      description: \"The size of the button\",\r\n    },\r\n    disabled: {\r\n      control: \"boolean\",\r\n      description: \"Whether the button is disabled\",\r\n    },\r\n    asChild: {\r\n      control: \"boolean\",\r\n      description: \"Whether to render as a child component\",\r\n    },\r\n  },\r\n};\r\n\r\nexport default meta;\r\ntype Story = StoryObj<typeof Button>;\r\n\r\nexport const Default: Story = {\r\n  args: {\r\n    children: \"Button\",\r\n    variant: \"default\",\r\n    size: \"default\",\r\n  },\r\n};\r\n\r\nexport const Destructive: Story = {\r\n  args: {\r\n    children: \"Delete\",\r\n    variant: \"destructive\",\r\n  },\r\n};\r\n\r\nexport const Outline: Story = {\r\n  args: {\r\n    children: \"Outline\",\r\n    variant: \"outline\",\r\n  },\r\n};\r\n\r\nexport const Secondary: Story = {\r\n  args: {\r\n    children: \"Secondary\",\r\n    variant: \"secondary\",\r\n  },\r\n};\r\n\r\nexport const Ghost: Story = {\r\n  args: {\r\n    children: \"Ghost\",\r\n    variant: \"ghost\",\r\n  },\r\n};\r\n\r\nexport const Link: Story = {\r\n  args: {\r\n    children: \"Link\",\r\n    variant: \"link\",\r\n  },\r\n};\r\n\r\nexport const Small: Story = {\r\n  args: {\r\n    children: \"Small\",\r\n    size: \"sm\",\r\n  },\r\n};\r\n\r\nexport const Large: Story = {\r\n  args: {\r\n    children: \"Large\",\r\n    size: \"lg\",\r\n  },\r\n};\r\n\r\nexport const WithIcon: Story = {\r\n  args: {\r\n    children: (\r\n      <>\r\n        <Plus className=\"mr-2 h-4 w-4\" />\r\n        Add New\r\n      </>\r\n    ),\r\n  },\r\n};\r\n\r\nexport const IconOnly: Story = {\r\n  args: {\r\n    size: \"icon\",\r\n    \"aria-label\": \"Add\",\r\n    children: <Plus className=\"h-4 w-4\" />,\r\n  },\r\n};\r\n\r\nexport const Loading: Story = {\r\n  args: {\r\n    disabled: true,\r\n    children: (\r\n      <>\r\n        <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n        Loading...\r\n      </>\r\n    ),\r\n  },\r\n};\r\n\r\nexport const Disabled: Story = {\r\n  args: {\r\n    children: \"Disabled\",\r\n    disabled: true,\r\n  },\r\n};\r\n\r\nexport const AllVariants: Story = {\r\n  render: () => (\r\n    <div className=\"flex flex-wrap gap-4\">\r\n      <Button variant=\"default\">Default</Button>\r\n      <Button variant=\"secondary\">Secondary</Button>\r\n      <Button variant=\"outline\">Outline</Button>\r\n      <Button variant=\"ghost\">Ghost</Button>\r\n      <Button variant=\"link\">Link</Button>\r\n      <Button variant=\"destructive\">Destructive</Button>\r\n    </div>\r\n  ),\r\n};\r\n\r\nexport const AllSizes: Story = {\r\n  render: () => (\r\n    <div className=\"flex items-center gap-4\">\r\n      <Button size=\"sm\">Small</Button>\r\n      <Button size=\"default\">Default</Button>\r\n      <Button size=\"lg\">Large</Button>\r\n      <Button size=\"icon\">\r\n        <Plus className=\"h-4 w-4\" />\r\n      </Button>\r\n    </div>\r\n  ),\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\stories\\Card.stories.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\types\\lucide-react.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\utils\\colors.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\src\\utils\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Usuario\\source\\repos\\ordo-todo\\packages\\ui\\vitest.setup.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import '@testing-library/jest-dom';\nimport { cleanup } from '@testing-library/react';\nimport { afterEach, vi } from 'vitest';\nimport React from 'react';\n\n// Cleanup after each test\nafterEach(() => {\n  cleanup();\n});\n\n// Mock lucide-react icons\nvi.mock('lucide-react', async (importOriginal) => {\n  const actual = await importOriginal<typeof import('lucide-react')>();\n  return {\n    ...actual,\n  };\n});\n\n// Mock @ordo-todo/core\nvi.mock('@ordo-todo/core', () => ({\n  createWorkspaceSchema: {\n    parse: vi.fn((val: unknown) => val),\n    safeParse: vi.fn(() => ({ success: true, data: {} })),\n  },\n  generateSlug: vi.fn((name: string) => name.toLowerCase().replace(/\\s+/g, '-')),\n}));\n\n// Mock navigator.clipboard\nObject.defineProperty(global, 'navigator', {\n  value: {\n    clipboard: {\n      writeText: vi.fn(() => Promise.resolve()),\n    },\n  },\n  writable: true,\n});\n\n// Mock window.Image for avatar components\nclass MockImage {\n  src = '';\n  onload: (() => void) | null = null;\n  onerror: (() => void) | null = null;\n  constructor() {\n    // Simulate immediate load\n    setTimeout(() => {\n      if (this.onload) this.onload();\n    }, 0);\n  }\n}\n\nglobal.Image = MockImage as unknown as typeof Image;\n","usedDeprecatedRules":[]}]
