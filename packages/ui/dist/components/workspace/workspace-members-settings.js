"use client";
import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from "react";
import { Plus, Mail, Trash2, MoreHorizontal } from "lucide-react";
import { format } from "date-fns";
import { Button } from "../ui/button.js";
import { Avatar, AvatarFallback, AvatarImage } from "../ui/avatar.js";
import { Badge } from "../ui/badge.js";
import { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger, } from "../ui/dropdown-menu.js";
import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow, } from "../ui/table.js";
import { InviteMemberDialog } from "./invite-member-dialog.js";
export function WorkspaceMembersSettings({ members = [], invitations = [], isLoading = false, onInviteMember, onRemoveMember, onDeleteInvitation, isInvitePending = false, labels = {}, baseUrl = "", onInviteCopied, }) {
    const [isInviteDialogOpen, setIsInviteDialogOpen] = useState(false);
    if (isLoading) {
        return _jsx("div", { className: "p-8 text-center", children: labels.loading ?? "Loading..." });
    }
    return (_jsxs("div", { className: "space-y-8", children: [_jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("h3", { className: "text-lg font-medium", children: labels.membersTitle ?? "Team Members" }), _jsx("p", { className: "text-sm text-muted-foreground", children: labels.membersDescription ?? "Manage who has access to this workspace." })] }), _jsxs(Button, { onClick: () => setIsInviteDialogOpen(true), children: [_jsx(Plus, { className: "mr-2 h-4 w-4" }), labels.inviteMember ?? "Invite Member"] })] }), _jsx("div", { className: "rounded-md border", children: _jsxs(Table, { children: [_jsx(TableHeader, { children: _jsxs(TableRow, { children: [_jsx(TableHead, { children: labels.user ?? "User" }), _jsx(TableHead, { children: labels.role ?? "Role" }), _jsx(TableHead, { children: labels.joined ?? "Joined" }), _jsx(TableHead, { className: "w-[50px]" })] }) }), _jsx(TableBody, { children: members.map((member) => (_jsxs(TableRow, { children: [_jsx(TableCell, { children: _jsxs("div", { className: "flex items-center gap-3", children: [_jsxs(Avatar, { className: "h-8 w-8", children: [_jsx(AvatarImage, { src: member.user?.image }), _jsx(AvatarFallback, { children: member.user?.name?.charAt(0) ||
                                                                member.user?.email?.charAt(0) ||
                                                                "?" })] }), _jsxs("div", { className: "flex flex-col", children: [_jsx("span", { className: "font-medium", children: member.user?.name || labels.unknownUser || "Unknown User" }), _jsx("span", { className: "text-xs text-muted-foreground", children: member.user?.email })] })] }) }), _jsx(TableCell, { children: _jsx(Badge, { variant: "outline", className: "capitalize", children: member.role.toLowerCase() }) }), _jsx(TableCell, { className: "text-sm text-muted-foreground", children: format(new Date(member.joinedAt), "MMM d, yyyy") }), _jsx(TableCell, { children: member.role !== "OWNER" && (_jsxs(DropdownMenu, { children: [_jsx(DropdownMenuTrigger, { asChild: true, children: _jsx(Button, { variant: "ghost", size: "icon", className: "h-8 w-8", children: _jsx(MoreHorizontal, { className: "h-4 w-4" }) }) }), _jsx(DropdownMenuContent, { align: "end", children: _jsxs(DropdownMenuItem, { className: "text-red-600 focus:text-red-600", onClick: () => {
                                                            if (confirm(labels.confirmRemove ?? "Are you sure you want to remove this member?")) {
                                                                onRemoveMember(member.userId);
                                                            }
                                                        }, children: [_jsx(Trash2, { className: "mr-2 h-4 w-4" }), labels.remove ?? "Remove"] }) })] })) })] }, member.id))) })] }) }), invitations.length > 0 && (_jsxs("div", { className: "space-y-4", children: [_jsxs("div", { children: [_jsx("h3", { className: "text-lg font-medium", children: labels.invitationsTitle ?? "Pending Invitations" }), _jsx("p", { className: "text-sm text-muted-foreground", children: labels.invitationsDescription ?? "Invitations that haven't been accepted yet." })] }), _jsx("div", { className: "rounded-md border", children: _jsxs(Table, { children: [_jsx(TableHeader, { children: _jsxs(TableRow, { children: [_jsx(TableHead, { children: labels.email ?? "Email" }), _jsx(TableHead, { children: labels.role ?? "Role" }), _jsx(TableHead, { children: labels.status ?? "Status" }), _jsx(TableHead, { children: labels.sent ?? "Sent" }), _jsx(TableHead, { className: "w-[50px]" })] }) }), _jsx(TableBody, { children: invitations.map((invitation) => (_jsxs(TableRow, { children: [_jsx(TableCell, { children: _jsxs("div", { className: "flex items-center gap-2", children: [_jsx(Mail, { className: "h-4 w-4 text-muted-foreground" }), _jsx("span", { children: invitation.email })] }) }), _jsx(TableCell, { children: _jsx(Badge, { variant: "outline", className: "capitalize", children: invitation.role.toLowerCase() }) }), _jsx(TableCell, { children: _jsx(Badge, { variant: invitation.status === "PENDING" ? "secondary" : "outline", className: "capitalize", children: invitation.status.toLowerCase() }) }), _jsx(TableCell, { className: "text-sm text-muted-foreground", children: format(new Date(invitation.createdAt), "MMM d, yyyy") }), _jsx(TableCell, { children: onDeleteInvitation && (_jsx(Button, { variant: "ghost", size: "icon", className: "h-8 w-8", onClick: () => onDeleteInvitation(invitation.id), children: _jsx(Trash2, { className: "h-4 w-4 text-muted-foreground" }) })) })] }, invitation.id))) })] }) })] })), _jsx(InviteMemberDialog, { open: isInviteDialogOpen, onOpenChange: setIsInviteDialogOpen, onSubmit: onInviteMember, isPending: isInvitePending, labels: labels.inviteDialog, baseUrl: baseUrl, onCopy: onInviteCopied })] }));
}
